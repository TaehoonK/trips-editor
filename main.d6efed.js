!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=76)}([function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(51),a={};function s(){}function c(t){for(var e=t.length,n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}function u(t,e,n){try{return t.f(e)}catch(t){return n._e(t),a}}e.NO=a;var f={_n:s,_e:s,_c:s};function l(t){t._start=function(t){t.next=t._n,t.error=t._e,t.complete=t._c,this.start(t)},t._stop=t.stop}e.NO_IL=f;var h=function(){function t(t,e){this._stream=t,this._listener=e}return t.prototype.unsubscribe=function(){this._stream._remove(this._listener)},t}(),d=function(){function t(t){this._listener=t}return t.prototype.next=function(t){this._listener._n(t)},t.prototype.error=function(t){this._listener._e(t)},t.prototype.complete=function(){this._listener._c()},t}(),p=function(){function t(t){this.type="fromObservable",this.ins=t,this.active=!1}return t.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new d(t)),this.active||this._sub.unsubscribe()},t.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},t}(),m=function(){function t(t){this.type="merge",this.insArr=t,this.out=a,this.ac=0}return t.prototype._start=function(t){this.out=t;var e=this.insArr,n=e.length;this.ac=n;for(var r=0;r<n;r++)e[r]._add(this)},t.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=0;n<e;n++)t[n]._remove(this);this.out=a},t.prototype._n=function(t){var e=this.out;e!==a&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===a)return;t._c()}},t}(),y=function(){function t(t,e,n){this.i=t,this.out=e,this.p=n,n.ils.push(this)}return t.prototype._n=function(t){var e=this.p,n=this.out;if(n!==a&&e.up(t,this.i)){for(var r=e.vals,i=r.length,o=Array(i),s=0;s<i;++s)o[s]=r[s];n._n(o)}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.p;t.out!==a&&0==--t.Nc&&t.out._c()},t}(),v=function(){function t(t){this.type="combine",this.insArr=t,this.out=a,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return t.prototype.up=function(t,e){var n=this.vals[e],r=this.Nn?n===a?--this.Nn:this.Nn:0;return this.vals[e]=t,0===r},t.prototype._start=function(t){this.out=t;var e=this.insArr,n=this.Nc=this.Nn=e.length,r=this.vals=new Array(n);if(0===n)t._n([]),t._c();else for(var i=0;i<n;i++)r[i]=a,e[i]._add(new y(i,t,this))},t.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=this.ils,r=0;r<e;r++)t[r]._remove(n[r]);this.out=a,this.ils=[],this.vals=[]},t}(),_=function(){function t(t){this.type="fromArray",this.a=t}return t.prototype._start=function(t){for(var e=this.a,n=0,r=e.length;n<r;n++)t._n(e[n]);t._c()},t.prototype._stop=function(){},t}(),b=function(){function t(t){this.type="fromPromise",this.on=!1,this.p=t}return t.prototype._start=function(t){var e=this;this.on=!0,this.p.then(function(n){e.on&&(t._n(n),t._c())},function(e){t._e(e)}).then(s,function(t){setTimeout(function(){throw t})})},t.prototype._stop=function(){this.on=!1},t}(),g=function(){function t(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return t.prototype._start=function(t){var e=this;this.intervalID=setInterval(function(){t._n(e.i++)},this.period)},t.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},t}(),x=function(){function t(t,e){this.type="debug",this.ins=t,this.out=a,this.s=s,this.l="","string"==typeof e?this.l=e:"function"==typeof e&&(this.s=e)}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=this.s,r=this.l;if(n!==s)try{n(t)}catch(t){e._e(t)}else r?console.log(r+":",t):console.log(t);e._n(t)}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),w=function(){function t(t,e){this.type="drop",this.ins=e,this.out=a,this.max=t,this.dropped=0}return t.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;e!==a&&this.dropped++>=this.max&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),k=function(){function t(t,e){this.out=t,this.op=e}return t.prototype._n=function(){this.op.end()},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.end()},t}(),S=function(){function t(t,e){this.type="endWhen",this.ins=e,this.out=a,this.o=t,this.oil=f}return t.prototype._start=function(t){this.out=t,this.o._add(this.oil=new k(t,this)),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=a,this.oil=f},t.prototype.end=function(){var t=this.out;t!==a&&t._c()},t.prototype._n=function(t){var e=this.out;e!==a&&e._n(t)},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){this.end()},t}(),O=function(){function t(t,e){this.type="filter",this.ins=e,this.out=a,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=u(this,t,e);n!==a&&n&&e._n(t)}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),M=function(){function t(t,e){this.out=t,this.op=e}return t.prototype._n=function(t){this.out._n(t)},t.prototype._e=function(t){this.out._e(t)},t.prototype._c=function(){this.op.inner=a,this.op.less()},t}(),j=function(){function t(t){this.type="flatten",this.ins=t,this.out=a,this.open=!0,this.inner=a,this.il=f}return t.prototype._start=function(t){this.out=t,this.open=!0,this.inner=a,this.il=f,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.inner!==a&&this.inner._remove(this.il),this.out=a,this.open=!0,this.inner=a,this.il=f},t.prototype.less=function(){var t=this.out;t!==a&&(this.open||this.inner!==a||t._c())},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=this.inner,r=this.il;n!==a&&r!==f&&n._remove(r),(this.inner=t)._add(this.il=new M(e,this))}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){this.open=!1,this.less()},t}(),E=function(){function t(t,e,n){var r=this;this.type="fold",this.ins=n,this.out=a,this.f=function(e){return t(r.acc,e)},this.acc=this.seed=e}return t.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a,this.acc=this.seed},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=u(this,t,e);n!==a&&e._n(this.acc=n)}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),I=function(){function t(t){this.type="last",this.ins=t,this.out=a,this.has=!1,this.val=a}return t.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a,this.val=a},t.prototype._n=function(t){this.has=!0,this.val=t},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},t}(),T=function(){function t(t,e){this.type="map",this.ins=e,this.out=a,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=u(this,t,e);n!==a&&e._n(n)}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),C=function(){function t(t){this.type="remember",this.ins=t,this.out=a}return t.prototype._start=function(t){this.out=t,this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=a},t}(),A=function(){function t(t,e){this.type="replaceError",this.ins=e,this.out=a,this.f=t}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;e!==a&&e._n(t)},t.prototype._e=function(t){var e=this.out;if(e!==a)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(t){e._e(t)}},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),z=function(){function t(t,e){this.type="startWith",this.ins=t,this.out=a,this.val=e}return t.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},t.prototype._stop=function(){this.ins._remove(this.out),this.out=a},t}(),N=function(){function t(t,e){this.type="take",this.ins=e,this.out=a,this.max=t,this.taken=0}return t.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=a},t.prototype._n=function(t){var e=this.out;if(e!==a){var n=++this.taken;n<this.max?e._n(t):n===this.max&&(e._n(t),e._c())}},t.prototype._e=function(t){var e=this.out;e!==a&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==a&&t._c()},t}(),D=function(){function t(t){this._prod=t||a,this._ils=[],this._stopID=a,this._dl=a,this._d=!1,this._target=a,this._err=a}return t.prototype._n=function(t){var e=this._ils,n=e.length;if(this._d&&this._dl._n(t),1==n)e[0]._n(t);else{if(0==n)return;for(var r=c(e),i=0;i<n;i++)r[i]._n(t)}},t.prototype._e=function(t){if(this._err===a){this._err=t;var e=this._ils,n=e.length;if(this._x(),this._d&&this._dl._e(t),1==n)e[0]._e(t);else{if(0==n)return;for(var r=c(e),i=0;i<n;i++)r[i]._e(t)}if(!this._d&&0==n)throw this._err}},t.prototype._c=function(){var t=this._ils,e=t.length;if(this._x(),this._d&&this._dl._c(),1==e)t[0]._c();else{if(0==e)return;for(var n=c(t),r=0;r<e;r++)n[r]._c()}},t.prototype._x=function(){0!==this._ils.length&&(this._prod!==a&&this._prod._stop(),this._err=a,this._ils=[])},t.prototype._stopNow=function(){this._prod._stop(),this._err=a,this._stopID=a},t.prototype._add=function(t){var e=this._target;if(e!==a)return e._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==a)clearTimeout(this._stopID),this._stopID=a;else{var r=this._prod;r!==a&&r._start(this)}},t.prototype._remove=function(t){var e=this,n=this._target;if(n!==a)return n._remove(t);var r=this._ils,i=r.indexOf(t);i>-1&&(r.splice(i,1),this._prod!==a&&r.length<=0?(this._err=a,this._stopID=setTimeout(function(){return e._stopNow()})):1===r.length&&this._pruneCycles())},t.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},t.prototype._hasNoSinks=function(t,e){if(-1!==e.indexOf(t))return!0;if(t.out===this)return!0;if(t.out&&t.out!==a)return this._hasNoSinks(t.out,e.concat(t));if(t._ils){for(var n=0,r=t._ils.length;n<r;n++)if(!this._hasNoSinks(t._ils[n],e.concat(t)))return!1;return!0}return!1},t.prototype.ctor=function(){return this instanceof L?L:t},t.prototype.addListener=function(t){t._n=t.next||s,t._e=t.error||s,t._c=t.complete||s,this._add(t)},t.prototype.removeListener=function(t){this._remove(t)},t.prototype.subscribe=function(t){return this.addListener(t),new h(this,t)},t.prototype[o.default]=function(){return this},t.create=function(e){if(e){if("function"!=typeof e.start||"function"!=typeof e.stop)throw new Error("producer requires both start and stop functions");l(e)}return new t(e)},t.createWithMemory=function(t){return t&&l(t),new L(t)},t.never=function(){return new t({_start:s,_stop:s})},t.empty=function(){return new t({_start:function(t){t._c()},_stop:s})},t.throw=function(e){return new t({_start:function(t){t._e(e)},_stop:s})},t.from=function(e){if("function"==typeof e[o.default])return t.fromObservable(e);if("function"==typeof e.then)return t.fromPromise(e);if(Array.isArray(e))return t.fromArray(e);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.fromArray(e)},t.fromArray=function(e){return new t(new _(e))},t.fromPromise=function(e){return new t(new b(e))},t.fromObservable=function(e){if(e.endWhen)return e;var n="function"==typeof e[o.default]?e[o.default]():e;return new t(new p(n))},t.periodic=function(e){return new t(new g(e))},t.prototype._map=function(t){return new(this.ctor())(new T(t,this))},t.prototype.map=function(t){return this._map(t)},t.prototype.mapTo=function(t){var e=this.map(function(){return t});return e._prod.type="mapTo",e},t.prototype.filter=function(e){var n,r,i=this._prod;return new t(i instanceof O?new O((n=i.f,r=e,function(t){return n(t)&&r(t)}),i.ins):new O(e,this))},t.prototype.take=function(t){return new(this.ctor())(new N(t,this))},t.prototype.drop=function(e){return new t(new w(e,this))},t.prototype.last=function(){return new t(new I(this))},t.prototype.startWith=function(t){return new L(new z(this,t))},t.prototype.endWhen=function(t){return new(this.ctor())(new S(t,this))},t.prototype.fold=function(t,e){return new L(new E(t,e,this))},t.prototype.replaceError=function(t){return new(this.ctor())(new A(t,this))},t.prototype.flatten=function(){return new t(new j(this))},t.prototype.compose=function(t){return t(this)},t.prototype.remember=function(){return new L(new C(this))},t.prototype.debug=function(t){return new(this.ctor())(new x(this,t))},t.prototype.imitate=function(t){if(t instanceof L)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var e=this._ils,n=e.length,r=0;r<n;r++)t._add(e[r]);this._ils=[]},t.prototype.shamefullySendNext=function(t){this._n(t)},t.prototype.shamefullySendError=function(t){this._e(t)},t.prototype.shamefullySendComplete=function(){this._c()},t.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||s,t._e=t.error||s,t._c=t.complete||s,this._dl=t):(this._d=!1,this._dl=a)},t.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new m(e))},t.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new v(e))},t}();e.Stream=D;var L=function(t){function e(e){var n=t.call(this,e)||this;return n._has=!1,n}return i(e,t),e.prototype._n=function(e){this._v=e,this._has=!0,t.prototype._n.call(this,e)},e.prototype._add=function(t){var e=this._target;if(e!==a)return e._add(t);var n=this._ils;if(n.push(t),n.length>1)this._has&&t._n(this._v);else if(this._stopID!==a)this._has&&t._n(this._v),clearTimeout(this._stopID),this._stopID=a;else if(this._has)t._n(this._v);else{var r=this._prod;r!==a&&r._start(this)}},e.prototype._stopNow=function(){this._has=!1,t.prototype._stopNow.call(this)},e.prototype._x=function(){this._has=!1,t.prototype._x.call(this)},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(e){return t.prototype.mapTo.call(this,e)},e.prototype.take=function(e){return t.prototype.take.call(this,e)},e.prototype.endWhen=function(e){return t.prototype.endWhen.call(this,e)},e.prototype.replaceError=function(e){return t.prototype.replaceError.call(this,e)},e.prototype.remember=function(){return this},e.prototype.debug=function(e){return t.prototype.debug.call(this,e)},e}(D);e.MemoryStream=L;var P=D;e.default=P},function(t,e,n){"use strict";var r=n(12);var i=n(10),o=n(0),a=n.n(o);function s(t,e,n,r,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1);var a=null;return o.Stream.create({start:function(o){a=r?function(t){c(t,r),o.next(t)}:function(t){o.next(t)},t.addEventListener(e,a,{capture:n,passive:i})},stop:function(){t.removeEventListener(e,a,n),a=null}})}function c(t,e){if(e)if("boolean"==typeof e)t.preventDefault();else if("function"==typeof e)e(t)&&t.preventDefault();else{if("object"!=typeof e)throw new Error("preventDefault has to be either a boolean, predicate function or object");(function t(e,n){for(var r=Object.keys(e),i=r.length,o=0;o<i;o++){var a=r[o];if("object"==typeof e[a]&&"object"==typeof n[a]){if(!t(e[a],n[a]))return!1}else if(e[a]!==n[a])return!1}return!0})(e,t)&&t.preventDefault()}}var u=function(){function t(t){this._name=t}return t.prototype.select=function(t){return this},t.prototype.elements=function(){var t=Object(i.adapt)(a.a.of([document]));return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(i.adapt)(a.a.of(document));return t._isCycleSource=this._name,t},t.prototype.events=function(t,e,n){var r;void 0===e&&(e={}),r=s(document,t,e.useCapture,e.preventDefault);var o=Object(i.adapt)(r);return o._isCycleSource=this._name,o},t}(),f=function(){function t(t){this._name=t}return t.prototype.select=function(t){return this},t.prototype.elements=function(){var t=Object(i.adapt)(a.a.of([document.body]));return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(i.adapt)(a.a.of(document.body));return t._isCycleSource=this._name,t},t.prototype.events=function(t,e,n){var r;void 0===e&&(e={}),r=s(document.body,t,e.useCapture,e.preventDefault);var o=Object(i.adapt)(r);return o._isCycleSource=this._name,o},t}();function l(t){if("string"!=typeof t&&(e=t,!("object"==typeof HTMLElement?e instanceof HTMLElement||e instanceof DocumentFragment:e&&"object"==typeof e&&null!==e&&(1===e.nodeType||11===e.nodeType)&&"string"==typeof e.nodeName)))throw new Error("Given container is not a DOM element neither a selector string.");var e}function h(t){for(var e="",n=t.length-1;n>=0&&"selector"===t[n].type;n--)e=t[n].scope+" "+e;return e.trim()}function d(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].type!==e[n].type||t[n].scope!==e[n].scope)return!1;return!0}var p=function(){function t(t,e){this.namespace=t,this.isolateModule=e,this._namespace=t.filter(function(t){return"selector"!==t.type})}return t.prototype.isDirectlyInScope=function(t){var e=this.isolateModule.getNamespace(t);if(!e)return!1;if(this._namespace.length>e.length||!d(this._namespace,e.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<e.length;n++)if("total"===e[n].type)return!1;return!0},t}();var m=function(){function t(t,e){this.namespace=t,this.isolateModule=e}return t.prototype.call=function(){var t,e=this.namespace,n=h(e),r=new p(e,this.isolateModule),i=this.isolateModule.getElement(e.filter(function(t){return"selector"!==t.type}));return void 0===i?[]:""===n?[i]:(t=i.querySelectorAll(n),Array.prototype.slice.call(t)).filter(r.isDirectlyInScope,r).concat(i.matches(n)?[i]:[])},t}(),y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function v(t){return{type:(e=t,e.length>1&&("."===e[0]||"#"===e[0])?"sibling":"total"),scope:t};var e}var _=function(){function t(e,n,r,i,o,a){var s;void 0===r&&(r=[]),this._rootElement$=e,this._sanitation$=n,this._namespace=r,this._isolateModule=i,this._eventDelegator=o,this._name=a,this.isolateSource=function(e,n){return new t(e._rootElement$,e._sanitation$,e._namespace.concat(v(n)),e._isolateModule,e._eventDelegator,e._name)},this.isolateSink=(s=this._namespace,function(t,e){return":root"===e?t:t.map(function(t){if(!t)return t;var n=v(e),r=y({},t,{data:y({},t.data,{isolate:t.data&&Array.isArray(t.data.isolate)?t.data.isolate:s.concat([n])})});return y({},r,{key:void 0!==r.key?r.key:JSON.stringify(r.data.isolate)})})})}return t.prototype._elements=function(){if(0===this._namespace.length)return this._rootElement$.map(function(t){return[t]});var t=new m(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},t.prototype.elements=function(){var t=Object(i.adapt)(this._elements().remember());return t._isCycleSource=this._name,t},t.prototype.element=function(){var t=Object(i.adapt)(this._elements().filter(function(t){return t.length>0}).map(function(t){return t[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(t.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),t.prototype.select=function(e){if("string"!=typeof e)throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if("document"===e)return new u(this._name);if("body"===e)return new f(this._name);var n=":root"===e?[]:this._namespace.concat({type:"selector",scope:e.trim()});return new t(this._rootElement$,this._sanitation$,n,this._isolateModule,this._eventDelegator,this._name)},t.prototype.events=function(t,e,n){if(void 0===e&&(e={}),"string"!=typeof t)throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var r=this._eventDelegator.addEventListener(t,this._namespace,e,n),o=Object(i.adapt)(r);return o._isCycleSource=this._name,o},t.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},t}();function b(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}var g=b,x=Array.isArray;function w(t){return"string"==typeof t||"number"==typeof t}var k={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function S(t){return void 0===t}function O(t){return void 0!==t}var M=g("",{},[],void 0,void 0);function j(t,e){return t.key===e.key&&t.sel===e.sel}function E(t,e,n){var r,i,o,a={};for(r=e;r<=n;++r)null!=(o=t[r])&&void 0!==(i=o.key)&&(a[i]=r);return a}var I=["create","update","remove","destroy","pre","post"];function T(t,e){var n,r,i={},o=void 0!==e?e:k;for(n=0;n<I.length;++n)for(i[I[n]]=[],r=0;r<t.length;++r){var a=t[r][I[n]];void 0!==a&&i[I[n]].push(a)}function s(t,e){return function(){if(0==--e){var n=o.parentNode(t);o.removeChild(n,t)}}}function c(t,e){var n,r=t.data;void 0!==r&&O(n=r.hook)&&O(n=n.init)&&(n(t),r=t.data);var a=t.children,s=t.sel;if("!"===s)S(t.text)&&(t.text=""),t.elm=o.createComment(t.text);else if(void 0!==s){var u=s.indexOf("#"),f=s.indexOf(".",u),l=u>0?u:s.length,h=f>0?f:s.length,d=-1!==u||-1!==f?s.slice(0,Math.min(l,h)):s,p=t.elm=O(r)&&O(n=r.ns)?o.createElementNS(n,d):o.createElement(d);for(l<h&&p.setAttribute("id",s.slice(l+1,h)),f>0&&p.setAttribute("class",s.slice(h+1).replace(/\./g," ")),n=0;n<i.create.length;++n)i.create[n](M,t);if(x(a))for(n=0;n<a.length;++n){var m=a[n];null!=m&&o.appendChild(p,c(m,e))}else w(t.text)&&o.appendChild(p,o.createTextNode(t.text));O(n=t.data.hook)&&(n.create&&n.create(M,t),n.insert&&e.push(t))}else t.elm=o.createTextNode(t.text);return t.elm}function u(t,e,n,r,i,a){for(;r<=i;++r){var s=n[r];null!=s&&o.insertBefore(t,c(s,a),e)}}function f(t){var e,n,r=t.data;if(void 0!==r){for(O(e=r.hook)&&O(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&f(e)}}function l(t,e,n,r){for(;n<=r;++n){var a=void 0,c=void 0,u=void 0,l=e[n];if(null!=l)if(O(l.sel)){for(f(l),c=i.remove.length+1,u=s(l.elm,c),a=0;a<i.remove.length;++a)i.remove[a](l,u);O(a=l.data)&&O(a=a.hook)&&O(a=a.remove)?a(l,u):u()}else o.removeChild(t,l.elm)}}function h(t,e,n){var r,a;O(r=e.data)&&O(a=r.hook)&&O(r=a.prepatch)&&r(t,e);var s=e.elm=t.elm,f=t.children,d=e.children;if(t!==e){if(void 0!==e.data){for(r=0;r<i.update.length;++r)i.update[r](t,e);O(r=e.data.hook)&&O(r=r.update)&&r(t,e)}S(e.text)?O(f)&&O(d)?f!==d&&function(t,e,n,r){for(var i,a,s,f=0,d=0,p=e.length-1,m=e[0],y=e[p],v=n.length-1,_=n[0],b=n[v];f<=p&&d<=v;)null==m?m=e[++f]:null==y?y=e[--p]:null==_?_=n[++d]:null==b?b=n[--v]:j(m,_)?(h(m,_,r),m=e[++f],_=n[++d]):j(y,b)?(h(y,b,r),y=e[--p],b=n[--v]):j(m,b)?(h(m,b,r),o.insertBefore(t,m.elm,o.nextSibling(y.elm)),m=e[++f],b=n[--v]):j(y,_)?(h(y,_,r),o.insertBefore(t,y.elm,m.elm),y=e[--p],_=n[++d]):(void 0===i&&(i=E(e,f,p)),S(a=i[_.key])?(o.insertBefore(t,c(_,r),m.elm),_=n[++d]):((s=e[a]).sel!==_.sel?o.insertBefore(t,c(_,r),m.elm):(h(s,_,r),e[a]=void 0,o.insertBefore(t,s.elm,m.elm)),_=n[++d]));(f<=p||d<=v)&&(f>p?u(t,null==n[v+1]?null:n[v+1].elm,n,d,v,r):l(t,e,f,p))}(s,f,d,n):O(d)?(O(t.text)&&o.setTextContent(s,""),u(s,null,d,0,d.length-1,n)):O(f)?l(s,f,0,f.length-1):O(t.text)&&o.setTextContent(s,""):t.text!==e.text&&(O(f)&&l(s,f,0,f.length-1),o.setTextContent(s,e.text)),O(a)&&O(r=a.postpatch)&&r(t,e)}}return function(t,e){var n,r,a,s=[];for(n=0;n<i.pre.length;++n)i.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return g(o.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),j(t,e)?h(t,e,s):(r=t.elm,a=o.parentNode(r),c(e,s),null!==a&&(o.insertBefore(a,e.elm,o.nextSibling(r)),l(a,[t],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<i.post.length;++n)i.post[n]();return e}}var C=n(39),A=n.n(C),z=n(27),N=n.n(z),D=n(34),L=n(23);var P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},R="[\\w-]+",$="[ \t]*",U="[^\\]]+",q="(?:=|\\$=|\\^=|\\*=|~=|\\|=)",B="(?:(?:[ \t]+)|"+("(?:"+$+"(>)"+$+")")+"|"+("(?:"+$+"(\\+)"+$+")")+"|"+("(?:"+$+"(~)"+$+")")+")",W="(:?"+R+")?",F="(?:\\."+R+")"+"|"+("(?:#"+R+")")+"|"+("(?:\\["+$+R+$+"(?:"+q+$+U+$+")?\\])")+'|:(?:first-child|last-child|nth-child\\((?:even|odd|\\d*(?:-?n(?:\\+\\d+)?)?)\\)|empty|root|contains\\("[^"]*"\\))|'+B,V=new RegExp("^"+B+"$");function H(t){var e=t.trim(),n=new RegExp(W,"y"),r=n.exec(e)[0],i=new RegExp(F,"y");i.lastIndex=n.lastIndex;for(var o=[],a=void 0,s=void 0,c=-1;i.lastIndex<e.length;){var u=i.exec(e);if(!u&&void 0===s)throw new Error("Parse error, invalid selector");if(u&&V.test(u[0])){s=V.exec(u[0])[0],c=i.lastIndex}else{if(void 0!==s){a=[J(s),H(e.substring(c))];break}o.push(u[0])}}var f=o.filter(function(t){return t.startsWith(".")}).map(function(t){return t.substring(1)}),l=o.filter(function(t){return t.startsWith("#")}).map(function(t){return t.substring(1)});if(l.length>1)throw new Error("Invalid selector, only one id is allowed");var h=new RegExp("("+R+")"+$+"("+q+")?"+$+"("+U+")?"),d=o.filter(function(t){return t.startsWith("[")}).map(function(t){return h.exec(t).slice(1,4)}).map(function(t){var e,n=t[0],r=t[1],i=t[2];return(e={})[n]=[K(r),i?Y(i):i],e}).reduce(function(t,e){return P({},t,e)},{}),p=o.filter(function(t){return t.startsWith(":")}).map(function(t){return function(t){if("first-child"===t||"last-child"===t||"root"===t||"empty"===t)return[t,void 0];if(t.startsWith("contains")){var e=t.slice(10,-2);return["contains",e]}var n=t.slice(10,-1);"even"===n&&(n="2n");"odd"===n&&(n="2n+1");return["nth-child",n]}(t.substring(1))});return{id:l[0]||"",tag:r,classList:f,attributes:d,nextSelector:a,pseudos:p}}function Y(t){if(t.startsWith('"'))return t.slice(1,-1);if("true"===t)return!0;if("false"===t)return!1;var e=parseFloat(t);return isNaN(e)?t:e}function K(t){switch(t){case"=":return"exact";case"^=":return"startsWith";case"$=":return"endsWith";case"*=":return"contains";case"~=":return"whitespace";case"|=":return"dash";default:return"has"}}function J(t){switch(t.trim()){case">":return"child";case"+":return"nextSibling";case"~":return"sibling";default:return"subtree"}}function X(t){return function(e,n){var r="object"==typeof e?e:H(e),i=r.tag,o=r.id,a=r.classList,s=r.attributes,c=r.nextSelector,u=r.pseudos;if(void 0!==c)throw new Error("matches can only process selectors that target a single element");if(!n)return!1;if(i&&i.toLowerCase()!==t.tag(n).toLowerCase())return!1;if(o&&o!==t.id(n))return!1;for(var f=t.className(n).split(" "),l=0;l<a.length;l++)if(-1===f.indexOf(a[l]))return!1;for(var h in s){var d=t.attr(n,h),p=s[h][0],m=s[h][1];if(void 0===d)return!1;if("has"===p)return!0;if("exact"===p&&d!==m)return!1;if("exact"!==p){if("string"!=typeof m)throw new Error("All non-string values have to be an exact match");if("startsWith"===p&&!d.startsWith(m))return!1;if("endsWith"===p&&!d.endsWith(m))return!1;if("contains"===p&&-1===d.indexOf(m))return!1;if("whitespace"===p&&-1===d.split(" ").indexOf(m))return!1;if("dash"===p&&-1===d.split("-").indexOf(m))return!1}}for(l=0;l<u.length;l++){var y=u[l],v=(p=y[0],y[1]);if("contains"===p&&v!==t.contents(n))return!1;if("empty"===p&&(t.contents(n)||0!==t.children(n).length))return!1;if("root"===p&&void 0!==t.parent(n))return!1;if(-1!==p.indexOf("child")){if(!t.parent(n))return!1;var _=t.children(t.parent(n));if("first-child"===p&&0!==_.indexOf(n))return!1;if("last-child"===p&&_.indexOf(n)!==_.length-1)return!1;if("nth-child"===p){var b=/([\+-]?)(\d*)(n?)(\+\d+)?/.exec(v).slice(1),g=_.indexOf(n);b[0]||(b[0]="+");var x=b[1]?parseInt(b[0]+b[1]):void 0,w=parseInt(b[3]||"0");if(x&&"n"===b[2]&&g%x!==w)return!1;if(!x&&b[2]&&("+"===b[0]&&g-w<0||"-"===b[0]&&g-w>=0))return!1;if(!b[2]&&x&&g!==x-1)return!1}}}return!0}}function Z(t){if(!t.sel)return{tagName:"",id:"",className:""};var e=t.sel,n=e.indexOf("#"),r=e.indexOf(".",n),i=n>0?n:e.length,o=r>0?r:e.length;return{tagName:-1!==n||-1!==r?e.slice(0,Math.min(i,o)):e,id:i<o?e.slice(i+1,o):void 0,className:r>0?e.slice(o+1).replace(/\./g," "):void 0}}function G(t){var e=Z(t).className,n=void 0===e?"":e;if(!t.data)return n;var r=t.data,i=r.class,o=r.props;i&&(n+=" "+Object.keys(i).filter(function(t){return i[t]}).join(" "));return o&&o.className&&(n+=" "+o.className),n&&n.trim()}var Q=n(21),tt={tag:function(t){return Z(t).tagName},className:function(t){return G(t)},id:function(t){return Z(t).id||""},children:function(t){return t.children||[]},parent:function(t){return t.data[Q.a]||t},contents:function(t){return t.text||""},attr:function(t,e){if(t.data){var n=t.data,r=n.attrs,i=void 0===r?{}:r,o=n.props,a=void 0===o?{}:o,s=n.dataset,c=void 0===s?{}:s;if(i[e])return i[e];if(a[e])return a[e];if(0===e.indexOf("data-")&&c[e.slice(5)])return c[e.slice(5)]}}},et=X(tt);var nt,rt;nt=tt,rt=function(t,e){var n=e.data,r=et.bind(null,t);if(n&&n.fn){var i=void 0;return!!r(i=Array.isArray(n.args)?n.fn.apply(null,n.args):n.args?n.fn.call(null,n.args):n.fn())&&i}return r(e)}||X(nt);var it=function(){function t(t){this.rootElement=t}return t.prototype.call=function(t){if(11===this.rootElement.nodeType)return this.wrapDocFrag(null===t?[]:[t]);if(null===t)return this.wrap([]);var e=Z(t),n=e.tagName,r=e.id,i=G(t),o=((t.data||{}).props||{}).id,a=void 0===o?r:o;return"string"==typeof a&&a.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase()?t:this.wrap([t])},t.prototype.wrapDocFrag=function(t){return Object(L.vnode)("",{isolate:[]},t,void 0,this.rootElement)},t.prototype.wrap=function(t){var e=this.rootElement,n=e.tagName,i=e.id,o=e.className,a=i?"#"+i:"",s=o?"."+o.split(" ").join("."):"",c=Object(r.h)(""+n.toLowerCase()+a+s,{},t);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},t}(),ot=n(29),at=n.n(ot),st=n(30),ct=n.n(st),ut=n(31),ft=n.n(ut),lt=n(32),ht=n.n(lt),dt=n(33),pt=n.n(dt),mt=[ht.a,at.a,ct.a,ft.a,pt.a],yt=function(){function t(t){this.mapper=t,this.tree=[void 0,{}]}return t.prototype.set=function(t,e,n){for(var r=this.tree,i=void 0!==n?n:t.length,o=0;o<i;o++){var a=this.mapper(t[o]),s=r[1][a];s||(s=[void 0,{}],r[1][a]=s),r=s}r[0]=e},t.prototype.getDefault=function(t,e,n){return this.get(t,e,n)},t.prototype.get=function(t,e,n){for(var r=this.tree,i=void 0!==n?n:t.length,o=0;o<i;o++){var a=this.mapper(t[o]),s=r[1][a];if(!s){if(!e)return;s=[void 0,{}],r[1][a]=s}r=s}return e&&!r[0]&&(r[0]=e()),r[0]},t.prototype.delete=function(t){for(var e=this.tree,n=0;n<t.length-1;n++){var r=e[1][this.mapper(t[n])];if(!r)return;e=r}delete e[1][this.mapper(t[t.length-1])]},t}(),vt=function(){function t(){this.namespaceTree=new yt(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return t.prototype.setEventDelegator=function(t){this.eventDelegator=t},t.prototype.insertElement=function(t,e){this.namespaceByElement.set(e,t),this.namespaceTree.set(t,e)},t.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var e=this.getNamespace(t);e&&this.namespaceTree.delete(e)},t.prototype.getElement=function(t,e){return this.namespaceTree.get(t,void 0,e)},t.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var e=t;!this.namespaceByElement.has(e);){if(!(e=e.parentNode))return;if("HTML"===e.tagName)throw new Error("No root element found, this should not happen at all")}return e},t.prototype.getNamespace=function(t){var e=this.getRootElement(t);if(e)return this.namespaceByElement.get(e)},t.prototype.createModule=function(){var t=this;return{create:function(e,n){var r=n.elm,i=n.data,o=(void 0===i?{}:i).isolate;Array.isArray(o)&&t.insertElement(o,r)},update:function(e,n){var r=e.elm,i=e.data,o=void 0===i?{}:i,a=n.elm,s=n.data,c=void 0===s?{}:s,u=o.isolate,f=c.isolate;d(u,f)||Array.isArray(u)&&t.removeElement(r),Array.isArray(f)&&t.insertElement(f,a)},destroy:function(e){t.vnodesBeingRemoved.push(e)},remove:function(e,n){t.vnodesBeingRemoved.push(e),n()},post:function(){for(var e=t.vnodesBeingRemoved,n=e.length-1;n>=0;n--){var r=e[n],i=void 0!==r.data?r.data.isolation:void 0;void 0!==i&&t.removeElement(i),t.eventDelegator.removeElement(r.elm,i)}t.vnodesBeingRemoved=[]}}},t}(),_t=function(){function t(){this.toDelete=[],this.toDeleteSize=0,this._set=new Set}return t.prototype.add=function(t){this._set.add(t)},t.prototype.forEach=function(t){this._set.forEach(t),this.flush()},t.prototype.delete=function(t){this.toDelete.length===this.toDeleteSize?this.toDelete.push(t):this.toDelete[this.toDeleteSize]=t,this.toDeleteSize++},t.prototype.flush=function(){for(var t=0;t<this.toDelete.length;t++)t<this.toDeleteSize&&this._set.delete(this.toDelete[t]),this.toDelete[t]=void 0;this.toDeleteSize=0},t}(),bt=function(){function t(){this.arr=[],this.prios=[]}return t.prototype.add=function(t,e){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<e)return this.arr.splice(n,0,t),void this.prios.splice(n,0,e);this.arr.push(t),this.prios.push(e)},t.prototype.forEach=function(t){for(var e=0;e<this.arr.length;e++)t(this.arr[e],e,this.arr)},t.prototype.delete=function(t){for(var e=0;e<this.arr.length;e++)if(this.arr[e]===t)return this.arr.splice(e,1),void this.prios.splice(e,1)},t}(),gt=function(){return(gt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},xt=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],wt=function(){function t(t,e){var n=this;this.rootElement$=t,this.isolateModule=e,this.virtualListeners=new yt(function(t){return t.scope}),this.nonBubblingListenersToAdd=new _t,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(t){n.origin!==t&&(n.origin=t,n.resetEventListeners(),n.domListenersToAdd.forEach(function(t,e){return n.setupDOMListener(e,t)}),n.domListenersToAdd.clear()),n.resetNonBubblingListeners(),n.nonBubblingListenersToAdd.forEach(function(t){n.setupNonBubblingListener(t)})}})}return t.prototype.addEventListener=function(t,e,n,r){var i=a.a.never(),o=new p(e,this.isolateModule),s=this.insertListener(i,o,t,n);if(void 0===r?-1===xt.indexOf(t):r)this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive);else{var c=new m(e,this.isolateModule);this.setupNonBubblingListener([t,c,s])}return i},t.prototype.removeElement=function(t,e){void 0!==e&&this.virtualListeners.delete(e);var n=[];this.nonBubblingListeners.forEach(function(e,r){e.has(t)&&n.push([r,t])});for(var r=0;r<n.length;r++){var i=this.nonBubblingListeners.get(n[r][0]);i&&(i.delete(n[r][1]),0===i.size?this.nonBubblingListeners.delete(n[r][0]):this.nonBubblingListeners.set(n[r][0],i))}},t.prototype.insertListener=function(t,e,n,r){var i=[],o=e._namespace,a=o.length;do{i.push(this.getVirtualListeners(n,o,!0,a)),a--}while(a>=0&&"total"!==o[a].type);for(var s=gt({},r,{scopeChecker:e,subject:t,bubbles:!!r.bubbles,useCapture:!!r.useCapture,passive:!!r.passive}),c=0;c<i.length;c++)i[c].add(s,o.length);return s},t.prototype.getVirtualListeners=function(t,e,n,r){void 0===n&&(n=!1);var i=void 0!==r?r:e.length;if(!n)for(var o=i-1;o>=0;o--){if("total"===e[o].type){i=o+1;break}i=o}var a=this.virtualListeners.getDefault(e,function(){return new Map},i);return a.has(t)||a.set(t,new bt),a.get(t)},t.prototype.setupDOMListener=function(t,e){var n=this;if(this.origin){var r=s(this.origin,t,!1,!1,e).subscribe({next:function(r){return n.onEvent(t,r,e)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:r,passive:e})}else this.domListenersToAdd.set(t,e)},t.prototype.setupNonBubblingListener=function(t){var e=this,n=t[0],r=t[1],i=t[2];if(this.origin){var o=r.call()[0];if(o){this.nonBubblingListenersToAdd.delete(t);var a=s(o,n,!1,!1,i.passive).subscribe({next:function(t){return e.onEvent(n,t,!!i.passive,!1)},error:function(){},complete:function(){}});this.nonBubblingListeners.has(n)||this.nonBubblingListeners.set(n,new Map);var c=this.nonBubblingListeners.get(n);if(!c)return;c.set(o,{sub:a,destination:i})}else this.nonBubblingListenersToAdd.add(t)}else this.nonBubblingListenersToAdd.add(t)},t.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),e=t.next();!e.done;){var n=e.value,r=n[0],i=n[1],o=i.sub,a=i.passive;o.unsubscribe(),this.setupDOMListener(r,a),e=t.next()}},t.prototype.resetNonBubblingListeners=function(){var t,e=this,n=new Map,r=(t=n,function(e,n,r){var i;t.has(e)?(i=t.get(e)).set(n,r):((i=new Map).set(n,r),t.set(e,i))});this.nonBubblingListeners.forEach(function(t,i){t.forEach(function(t,n){if(document.body.contains(n))r(i,n,t);else{var o=t.sub,a=t.destination;o&&o.unsubscribe();var c=new m(a.scopeChecker.namespace,e.isolateModule).call()[0],u=s(c,i,!1,!1,a.passive).subscribe({next:function(t){return e.onEvent(i,t,!!a.passive,!1)},error:function(){},complete:function(){}});r(i,c,{sub:u,destination:a})}}),e.nonBubblingListeners=n})},t.prototype.putNonBubblingListener=function(t,e,n,r){var i=this.nonBubblingListeners.get(t);if(i){var o=i.get(e);o&&o.destination.passive===r&&o.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=o.destination)}},t.prototype.onEvent=function(t,e,n,r){void 0===r&&(r=!0);var i=this.patchEvent(e),o=this.isolateModule.getRootElement(e.target);if(r){var a=this.isolateModule.getNamespace(e.target);if(!a)return;var s=this.getVirtualListeners(t,a);this.bubble(t,e.target,o,i,s,a,a.length-1,!0,n),this.bubble(t,e.target,o,i,s,a,a.length-1,!1,n)}else this.putNonBubblingListener(t,e.target,!0,n),this.doBubbleStep(t,e.target,o,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,e.target,!1,n),this.doBubbleStep(t,e.target,o,i,this.virtualNonBubblingListener,!1,n),e.stopPropagation()},t.prototype.bubble=function(t,e,n,r,i,o,a,s,c){s||r.propagationHasBeenStopped||this.doBubbleStep(t,e,n,r,i,s,c);var u=n,f=a;if(e===n){if(!(a>=0&&"sibling"===o[a].type))return;u=this.isolateModule.getElement(o,a),f--}e.parentNode&&u&&this.bubble(t,e.parentNode,u,r,i,o,f,s,c),s&&!r.propagationHasBeenStopped&&this.doBubbleStep(t,e,n,r,i,s,c)},t.prototype.doBubbleStep=function(t,e,n,r,i,o,a){n&&(this.mutateEventCurrentTarget(r,e),i.forEach(function(t){if(t.passive===a&&t.useCapture===o){var i=h(t.scopeChecker.namespace);!r.propagationHasBeenStopped&&t.scopeChecker.isDirectlyInScope(e)&&(""!==i&&e.matches(i)||""===i&&e===n)&&(c(r,t.preventDefault),t.subject.shamefullySendNext(r))}}))},t.prototype.patchEvent=function(t){var e=t;e.propagationHasBeenStopped=!1;var n=e.stopPropagation;return e.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},e},t.prototype.mutateEventCurrentTarget=function(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch(t){console.log("please use event.ownerTarget")}t.ownerTarget=e},t}();function kt(t){return a.a.merge(t,a.a.never())}function St(t){return t.elm}function Ot(t){(console.error||console.log)(t)}function Mt(t,e){e||(e={}),l(t);var n=e.modules||mt;!function(t){if(!Array.isArray(t))throw new Error("Optional modules option must be an array for snabbdom modules")}(n);var r,i,o=new vt,s=T([o.createModule()].concat(n)),c=a.a.create({start:function(t){"loading"===document.readyState?document.addEventListener("readystatechange",function(){var e=document.readyState;"interactive"!==e&&"complete"!==e||(t.next(null),t.complete())}):(t.next(null),t.complete())},stop:function(){}}),u=a.a.create({start:function(t){i=new MutationObserver(function(){return t.next(null)})},stop:function(){i.disconnect()}});return function(e,n){void 0===n&&(n="DOM"),function(t){if(!t||"function"!=typeof t.addListener||"function"!=typeof t.fold)throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}(e);var f=a.a.create(),l=c.map(function(){var e=function(t){var e="string"==typeof t?document.querySelector(t):t;if("string"==typeof t&&null===e)throw new Error("Cannot render into unknown element `"+t+"`");return e}(t)||document.body;return r=new it(e),e}),h=e.remember();h.addListener({}),u.addListener({});var d=l.map(function(t){return a.a.merge(h.endWhen(f),f).map(function(t){return r.call(t)}).startWith((e=Object(D.toVNode)(t),e.data=e.data||{},e.data.isolate=[],e)).fold(s,Object(D.toVNode)(t)).drop(1).map(St).startWith(t).map(function(t){return i.observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),t}).compose(kt);var e}).flatten(),p=A()(c,u).endWhen(f).compose(N()(d)).map(function(t){return t[1]}).remember();p.addListener({error:Ot});var m=new wt(p,o);return new _(p,f,[],o,m,n)}}!function(){function t(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=Object(i.adapt)(a.a.empty())}t.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},t.prototype.element=function(){var t=this.elements().filter(function(t){return t.length>0}).map(function(t){return t[0]}).remember(),e=Object(i.adapt)(t);return e._isCycleSource="MockedDOM",e},t.prototype.events=function(t,e,n){var r=this._mockConfig[t],o=Object(i.adapt)(r||a.a.empty());return o._isCycleSource="MockedDOM",o},t.prototype.select=function(e){return new t(this._mockConfig[e]||{})},t.prototype.isolateSource=function(t,e){return t.select(".___"+e)},t.prototype.isolateSink=function(t,e){return Object(i.adapt)(a.a.fromObservable(t).map(function(t){return t.sel&&-1!==t.sel.indexOf("___"+e)?t:(t.sel+=".___"+e,t)}))}}();function jt(t){return function(t){return"string"==typeof t&&t.length>0}(t)&&("."===t[0]||"#"===t[0])}function Et(t){return function(e,n,i){var o=void 0!==e,a=void 0!==n,s=void 0!==i;return jt(e)?a&&s?Object(r.h)(t+e,n,i):a?Object(r.h)(t+e,n):Object(r.h)(t+e,{}):s?Object(r.h)(t+e,n,i):a?Object(r.h)(t,e,n):o?Object(r.h)(t,e):Object(r.h)(t,{})}}var It=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Tt=Et("svg");It.forEach(function(t){Tt[t]=Et(t)});var Ct=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],At={SVG_TAG_NAMES:It,TAG_NAMES:Ct,svg:Tt,isSelector:jt,createTagFunction:Et};Ct.forEach(function(t){At[t]=Et(t)});var zt=At;n.d(e,"b",function(){return Mt}),n.d(e,"a",function(){return r.h});zt.svg,zt.a,zt.abbr,zt.address,zt.area,zt.article,zt.aside,zt.audio,zt.b,zt.base,zt.bdi,zt.bdo,zt.blockquote,zt.body,zt.br,zt.button,zt.canvas,zt.caption,zt.cite,zt.code,zt.col,zt.colgroup,zt.dd,zt.del,zt.dfn,zt.dir,zt.div,zt.dl,zt.dt,zt.em,zt.embed,zt.fieldset,zt.figcaption,zt.figure,zt.footer,zt.form,zt.h1,zt.h2,zt.h3,zt.h4,zt.h5,zt.h6,zt.head,zt.header,zt.hgroup,zt.hr,zt.html,zt.i,zt.iframe,zt.img,zt.input,zt.ins,zt.kbd,zt.keygen,zt.label,zt.legend,zt.li,zt.link,zt.main,zt.map,zt.mark,zt.menu,zt.meta,zt.nav,zt.noscript,zt.object,zt.ol,zt.optgroup,zt.option,zt.p,zt.param,zt.pre,zt.progress,zt.q,zt.rp,zt.rt,zt.ruby,zt.s,zt.samp,zt.script,zt.section,zt.select,zt.small,zt.source,zt.span,zt.strong,zt.style,zt.sub,zt.sup,zt.table,zt.tbody,zt.td,zt.textarea,zt.tfoot,zt.th,zt.thead,zt.title,zt.tr,zt.u,zt.ul,zt.video},function(t,e,n){"use strict";n.r(e),n.d(e,"version",function(){return _r}),n.d(e,"Collection",function(){return S}),n.d(e,"Iterable",function(){return gr}),n.d(e,"Seq",function(){return X}),n.d(e,"Map",function(){return Ae}),n.d(e,"OrderedMap",function(){return vn}),n.d(e,"List",function(){return nn}),n.d(e,"Stack",function(){return kn}),n.d(e,"Set",function(){return Nn}),n.d(e,"OrderedSet",function(){return rr}),n.d(e,"Record",function(){return cr}),n.d(e,"Range",function(){return qn}),n.d(e,"Repeat",function(){return mr}),n.d(e,"is",function(){return ht}),n.d(e,"fromJS",function(){return yr}),n.d(e,"hash",function(){return yt}),n.d(e,"isImmutable",function(){return A}),n.d(e,"isCollection",function(){return _}),n.d(e,"isKeyed",function(){return g}),n.d(e,"isIndexed",function(){return w}),n.d(e,"isAssociative",function(){return k}),n.d(e,"isOrdered",function(){return N}),n.d(e,"isValueObject",function(){return lt}),n.d(e,"get",function(){return re}),n.d(e,"getIn",function(){return Bn}),n.d(e,"has",function(){return ne}),n.d(e,"hasIn",function(){return Fn}),n.d(e,"merge",function(){return _e}),n.d(e,"mergeDeep",function(){return ge}),n.d(e,"mergeWith",function(){return be}),n.d(e,"mergeDeepWith",function(){return xe}),n.d(e,"remove",function(){return oe}),n.d(e,"removeIn",function(){return fe}),n.d(e,"set",function(){return ae}),n.d(e,"setIn",function(){return ce}),n.d(e,"update",function(){return he}),n.d(e,"updateIn",function(){return se});var r=5,i=1<<r,o=i-1,a={};function s(t){t&&(t.value=!0)}function c(){}function u(t){return void 0===t.size&&(t.size=t.__iterate(l)),t.size}function f(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?u(t)+e:e}function l(){return!0}function h(t,e,n){return(0===t&&!y(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function d(t,e){return m(t,e,0)}function p(t,e){return m(t,e,e)}function m(t,e,n){return void 0===t?n:y(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function y(t){return t<0||0===t&&1/t==-1/0}var v="@@__IMMUTABLE_ITERABLE__@@";function _(t){return Boolean(t&&t[v])}var b="@@__IMMUTABLE_KEYED__@@";function g(t){return Boolean(t&&t[b])}var x="@@__IMMUTABLE_INDEXED__@@";function w(t){return Boolean(t&&t[x])}function k(t){return g(t)||w(t)}var S=function(t){return _(t)?t:X(t)},O=function(t){function e(t){return g(t)?t:Z(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),M=function(t){function e(t){return w(t)?t:G(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),j=function(t){function e(t){return _(t)&&!k(t)?t:Q(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S);S.Keyed=O,S.Indexed=M,S.Set=j;var E="@@__IMMUTABLE_SEQ__@@";function I(t){return Boolean(t&&t[E])}var T="@@__IMMUTABLE_RECORD__@@";function C(t){return Boolean(t&&t[T])}function A(t){return _(t)||C(t)}var z="@@__IMMUTABLE_ORDERED__@@";function N(t){return Boolean(t&&t[z])}var D=0,L=1,P=2,R="function"==typeof Symbol&&Symbol.iterator,$="@@iterator",U=R||$,q=function(t){this.next=t};function B(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function W(){return{value:void 0,done:!0}}function F(t){return!!Y(t)}function V(t){return t&&"function"==typeof t.next}function H(t){var e=Y(t);return e&&e.call(t)}function Y(t){var e=t&&(R&&t[R]||t[$]);if("function"==typeof e)return e}q.prototype.toString=function(){return"[Iterator]"},q.KEYS=D,q.VALUES=L,q.ENTRIES=P,q.prototype.inspect=q.prototype.toSource=function(){return this.toString()},q.prototype[U]=function(){return this};var K=Object.prototype.hasOwnProperty;function J(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var X=function(t){function e(t){return null==t?it():A(t)?t.toSeq():function(t){var e=st(t);if(e)return e;if("object"==typeof t)return new et(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new q(function(){if(i===r)return{value:void 0,done:!0};var o=n[e?r-++i:i++];return B(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(S),Z=function(t){function e(t){return null==t?it().toKeyedSeq():_(t)?g(t)?t.toSeq():t.fromEntrySeq():C(t)?t.toSeq():ot(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(X),G=function(t){function e(t){return null==t?it():_(t)?g(t)?t.entrySeq():t.toIndexedSeq():C(t)?t.toSeq().entrySeq():at(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(X),Q=function(t){function e(t){return(_(t)&&!k(t)?t:G(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(X);X.isSeq=I,X.Keyed=Z,X.Set=Q,X.Indexed=G,X.prototype[E]=!0;var tt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[f(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new q(function(){if(i===r)return{value:void 0,done:!0};var o=e?r-++i:i++;return B(t,o,n[o])})},e}(G),et=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return K.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var a=r[e?i-++o:o++];if(!1===t(n[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new q(function(){if(o===i)return{value:void 0,done:!0};var a=r[e?i-++o:o++];return B(t,a,n[a])})},e}(Z);et.prototype[z]=!0;var nt,rt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=H(this._collection),r=0;if(V(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=H(this._collection);if(!V(n))return new q(W);var r=0;return new q(function(){var e=n.next();return e.done?e:B(t,r++,e.value)})},e}(G);function it(){return nt||(nt=new tt([]))}function ot(t){var e=Array.isArray(t)?new tt(t):F(t)?new rt(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new et(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function at(t){var e=st(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function st(t){return J(t)?new tt(t):F(t)?new rt(t):void 0}var ct="@@__IMMUTABLE_MAP__@@";function ut(t){return Boolean(t&&t[ct])}function ft(t){return ut(t)&&N(t)}function lt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function ht(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(lt(t)&&lt(e)&&t.equals(e))}var dt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function pt(t){return t>>>1&1073741824|3221225471&t}var mt=Object.prototype.valueOf;function yt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return pt(e)}(t);case"string":return t.length>St?function(t){var e=jt[t];void 0===e&&(e=vt(t),Mt===Ot&&(Mt=0,jt={}),Mt++,jt[t]=e);return e}(t):vt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?pt(t.hashCode(t)):(t.valueOf!==mt&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(xt&&void 0!==(e=gt.get(t)))return e;if(void 0!==(e=t[kt]))return e;if(!bt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[kt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++wt,1073741824&wt&&(wt=0);if(xt)gt.set(t,e);else{if(void 0!==_t&&!1===_t(t))throw new Error("Non-extensible objects are not allowed as keys.");if(bt)Object.defineProperty(t,kt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[kt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[kt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return vt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function vt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return pt(e)}var _t=Object.isExtensible,bt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var gt,xt="function"==typeof WeakMap;xt&&(gt=new WeakMap);var wt=0,kt="__immutablehash__";"function"==typeof Symbol&&(kt=Symbol(kt));var St=16,Ot=255,Mt=0,jt={},Et=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Nt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=zt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Z);Et.prototype[z]=!0;var It=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&u(this),this._iter.__iterate(function(i){return t(i,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(L,e),i=0;return e&&u(this),new q(function(){var o=r.next();return o.done?o:B(t,e?n.size-++i:i++,o.value,o)})},e}(G),Tt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new q(function(){var e=n.next();return e.done?e:B(t,e.value,e.value,e)})},e}(Q),Ct=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ft(e);var r=_(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(L,e);return new q(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Ft(r);var i=_(r);return B(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},e}(Z);function At(t){var e=Ht(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Yt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===P){var r=t.__iterator(e,n);return new q(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===L?D:L,n)},e}function zt(t,e,n){var r=Ht(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,a);return o===a?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(P,i);return new q(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return B(r,s,e.call(n,a[1],s,t),i)})},r}function Nt(t,e){var n=this,r=Ht(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=At(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Yt,r.__iterate=function(n,r){var i=this,o=0;return r&&u(t),t.__iterate(function(t,a){return n(t,e?a:r?i.size-++o:o++,i)},!r)},r.__iterator=function(r,i){var o=0;i&&u(t);var a=t.__iterator(P,!i);return new q(function(){var t=a.next();if(t.done)return t;var s=t.value;return B(r,e?s[0]:i?n.size-++o:o++,s[1],t)})},r}function Dt(t,e,n,r){var i=Ht(t);return r&&(i.has=function(r){var i=t.get(r,a);return i!==a&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,a);return o!==a&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate(function(t,o,c){if(e.call(n,t,o,c))return s++,i(t,r?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(P,o),s=0;return new q(function(){for(;;){var o=a.next();if(o.done)return o;var c=o.value,u=c[0],f=c[1];if(e.call(n,f,u,t))return B(i,r?u:s++,f,o)}})},i}function Lt(t,e,n,r){var i=t.size;if(h(e,n,i))return t;var o=d(e,i),a=p(n,i);if(o!=o||a!=a)return Lt(t.toSeq().cacheResult(),e,n,r);var s,c=a-o;c==c&&(s=c<0?0:c);var u=Ht(t);return u.size=0===s?s:t.size&&s||void 0,!r&&I(t)&&s>=0&&(u.get=function(e,n){return(e=f(this,e))>=0&&e<s?t.get(e+o,n):n}),u.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,c=!0,u=0;return t.__iterate(function(t,n){if(!c||!(c=a++<o))return u++,!1!==e(t,r?n:u-1,i)&&u!==s}),u},u.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);if(0===s)return new q(W);var i=t.__iterator(e,n),a=0,c=0;return new q(function(){for(;a++<o;)i.next();if(++c>s)return{value:void 0,done:!0};var t=i.next();return r||e===L||t.done?t:B(e,c-1,e===D?void 0:t.value[1],t)})},u}function Pt(t,e,n,r){var i=Ht(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,c=0;return t.__iterate(function(t,o,u){if(!s||!(s=e.call(n,t,o,u)))return c++,i(t,r?o:c-1,a)}),c},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(P,o),c=!0,u=0;return new q(function(){var t,o,f;do{if((t=s.next()).done)return r||i===L?t:B(i,u++,i===D?void 0:t.value[1],t);var l=t.value;o=l[0],f=l[1],c&&(c=e.call(n,f,o,a))}while(c);return i===P?t:B(i,o,f,t)})},i}function Rt(t,e,n){var r=Ht(t);return r.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;return function t(c,u){c.__iterate(function(o,c){return(!e||u<e)&&_(o)?t(o,u+1):(a++,!1===i(o,n?c:a-1,r)&&(s=!0)),!s},o)}(t,0),a},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),a=[],s=0;return new q(function(){for(;o;){var t=o.next();if(!1===t.done){var c=t.value;if(r===P&&(c=c[1]),e&&!(a.length<e)||!_(c))return n?t:B(r,s++,c,t);a.push(o),o=c.__iterator(r,i)}else o=a.pop()}return{value:void 0,done:!0}})},r}function $t(t,e,n){e||(e=Kt);var r=g(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).valueSeq().toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Z(o):w(t)?G(o):Q(o)}function Ut(t,e,n){if(e||(e=Kt),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return qt(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return qt(e,t,n)?n:t})}function qt(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function Bt(t,e,n,r){var i=Ht(t),o=new tt(n).map(function(t){return t.size});return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(L,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=S(t),H(i?t.reverse():t)}),a=0,s=!1;return new q(function(){var n;return s||(n=o.map(function(t){return t.next()}),s=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),s?{value:void 0,done:!0}:B(t,a++,e.apply(null,n.map(function(t){return t.value})))})},i}function Wt(t,e){return t===e?t:I(t)?e:t.constructor(e)}function Ft(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Vt(t){return g(t)?O:w(t)?M:j}function Ht(t){return Object.create((g(t)?Z:w(t)?G:Q).prototype)}function Yt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):X.prototype.cacheResult.call(this)}function Kt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Jt(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function Xt(t,e){if(!t)throw new Error(e)}function Zt(t){Xt(t!==1/0,"Cannot perform this action with an infinite size.")}function Gt(t){if(J(t)&&"string"!=typeof t)return t;if(N(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Qt(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function te(t){return"object"==typeof t&&(A(t)||Array.isArray(t)||Qt(t))}function ee(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function ne(t,e){return A(t)?t.has(e):te(t)&&K.call(t,e)}function re(t,e,n){return A(t)?t.get(e,n):ne(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function ie(t){if(Array.isArray(t))return Jt(t);var e={};for(var n in t)K.call(t,n)&&(e[n]=t[n]);return e}function oe(t,e){if(!te(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(A(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!K.call(t,e))return t;var n=ie(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function ae(t,e,n){if(!te(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(A(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(K.call(t,e)&&n===t[e])return t;var r=ie(t);return r[e]=n,r}function se(t,e,n,r){r||(r=n,n=void 0);var i=function t(e,n,r,i,o,s){var c=n===a;if(i===r.length){var u=c?o:n,f=s(u);return f===u?n:f}if(!c&&!te(n))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,i).map(ee)+"]: "+n);var l=r[i];var h=c?a:re(n,l,a);var d=t(h===a?e:A(h),h,r,i+1,o,s);return d===h?n:d===a?oe(n,l):ae(c?e?Fe():{}:n,l,d)}(A(t),t,Gt(e),0,n,r);return i===a?n:i}function ce(t,e,n){return se(t,e,a,function(){return n})}function ue(t,e){return ce(this,t,e)}function fe(t,e){return se(t,e,function(){return a})}function le(t){return fe(this,t)}function he(t,e,n,r){return se(t,[e],n,r)}function de(t,e,n){return 1===arguments.length?t(this):he(this,t,e,n)}function pe(t,e,n){return se(this,t,e,n)}function me(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ve(this,t)}function ye(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return ve(this,e,t)}function ve(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=O(e[i]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var e=n?function(e,r){he(t,r,a,function(t){return t===a?e:n(t,e,r)})}:function(e,n){t.set(n,e)},i=0;i<r.length;i++)r[i].forEach(e)}):t.constructor(r[0])}function _e(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return ke(t,e)}function be(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return ke(e,n,t)}function ge(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return we(t,e)}function xe(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return we(e,n,t)}function we(t,e,n){return ke(t,e,function(t){return function e(n,r,i){return te(n)&&te(r)?ke(n,[r],e):t?t(n,r,i):r}}(n))}function ke(t,e,n){if(!te(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(A(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?M:O,a=r?function(e){i===t&&(i=ie(i)),i.push(e)}:function(e,r){var o=K.call(i,r),a=o&&n?n(i[r],e,r):e;o&&a===i[r]||(i===t&&(i=ie(i)),i[r]=a)},s=0;s<e.length;s++)o(e[s]).forEach(a);return i}function Se(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return we(this,t)}function Oe(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return we(this,e,t)}function Me(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return se(this,t,Fe(),function(t){return ke(t,e)})}function je(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return se(this,t,Fe(),function(t){return we(t,e)})}function Ee(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Ie(){return this.__ownerID?this:this.__ensureOwner(new c)}function Te(){return this.__ensureOwner()}function Ce(){return this.__altered}It.prototype.cacheResult=Et.prototype.cacheResult=Tt.prototype.cacheResult=Ct.prototype.cacheResult=Yt;var Ae=function(t){function e(e){return null==e?Fe():ut(e)&&!N(e)?e:Fe().withMutations(function(n){var r=t(e);Zt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Fe().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Ve(this,t,e)},e.prototype.remove=function(t){return Ve(this,t,a)},e.prototype.deleteAll=function(t){var e=S(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Fe()},e.prototype.sort=function(t){return vn($t(this,t))},e.prototype.sortBy=function(t,e){return vn($t(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,i){n.set(i,t.call(e,r,i,n))})})},e.prototype.__iterator=function(t,e){return new Ue(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?We(this.size,this._root,t,this.__hash):0===this.size?Fe():(this.__ownerID=t,this.__altered=!1,this)},e}(O);Ae.isMap=ut;var ze=Ae.prototype;ze[ct]=!0,ze.delete=ze.remove,ze.removeAll=ze.deleteAll,ze.setIn=ue,ze.removeIn=ze.deleteIn=le,ze.update=de,ze.updateIn=pe,ze.merge=ze.concat=me,ze.mergeWith=ye,ze.mergeDeep=Se,ze.mergeDeepWith=Oe,ze.mergeIn=Me,ze.mergeDeepIn=je,ze.withMutations=Ee,ze.wasAltered=Ce,ze.asImmutable=Te,ze["@@transducer/init"]=ze.asMutable=Ie,ze["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},ze["@@transducer/result"]=function(t){return t.asImmutable()};var Ne=function(t,e){this.ownerID=t,this.entries=e};Ne.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ht(n,i[o][0]))return i[o][1];return r},Ne.prototype.update=function(t,e,n,r,i,o,u){for(var f=i===a,l=this.entries,h=0,d=l.length;h<d&&!ht(r,l[h][0]);h++);var p=h<d;if(p?l[h][1]===i:f)return this;if(s(u),(f||!p)&&s(o),!f||1!==l.length){if(!p&&!f&&l.length>=Ze)return function(t,e,n,r){t||(t=new c);for(var i=new Re(t,yt(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}(t,l,r,i);var m=t&&t===this.ownerID,y=m?l:Jt(l);return p?f?h===d-1?y.pop():y[h]=y.pop():y[h]=[r,i]:y.push([r,i]),m?(this.entries=y,this):new Ne(t,y)}};var De=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};De.prototype.get=function(t,e,n,i){void 0===e&&(e=yt(n));var a=1<<((0===t?e:e>>>t)&o),s=this.bitmap;return 0==(s&a)?i:this.nodes[Je(s&a-1)].get(t+r,e,n,i)},De.prototype.update=function(t,e,n,s,c,u,f){void 0===n&&(n=yt(s));var l=(0===e?n:n>>>e)&o,h=1<<l,d=this.bitmap,p=0!=(d&h);if(!p&&c===a)return this;var m=Je(d&h-1),y=this.nodes,v=p?y[m]:void 0,_=He(v,t,e+r,n,s,c,u,f);if(_===v)return this;if(!p&&_&&y.length>=Ge)return function(t,e,n,r,o){for(var a=0,s=new Array(i),c=0;0!==n;c++,n>>>=1)s[c]=1&n?e[a++]:void 0;return s[r]=o,new Le(t,a+1,s)}(t,y,d,l,_);if(p&&!_&&2===y.length&&Ye(y[1^m]))return y[1^m];if(p&&_&&1===y.length&&Ye(_))return _;var b=t&&t===this.ownerID,g=p?_?d:d^h:d|h,x=p?_?Xe(y,m,_,b):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}(y,m,b):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}(y,m,_,b);return b?(this.bitmap=g,this.nodes=x,this):new De(t,g,x)};var Le=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};Le.prototype.get=function(t,e,n,i){void 0===e&&(e=yt(n));var a=(0===t?e:e>>>t)&o,s=this.nodes[a];return s?s.get(t+r,e,n,i):i},Le.prototype.update=function(t,e,n,i,s,c,u){void 0===n&&(n=yt(i));var f=(0===e?n:n>>>e)&o,l=s===a,h=this.nodes,d=h[f];if(l&&!d)return this;var p=He(d,t,e+r,n,i,s,c,u);if(p===d)return this;var m=this.count;if(d){if(!p&&--m<Qe)return function(t,e,n,r){for(var i=0,o=0,a=new Array(n),s=0,c=1,u=e.length;s<u;s++,c<<=1){var f=e[s];void 0!==f&&s!==r&&(i|=c,a[o++]=f)}return new De(t,i,a)}(t,h,m,f)}else m++;var y=t&&t===this.ownerID,v=Xe(h,f,p,y);return y?(this.count=m,this.nodes=v,this):new Le(t,m,v)};var Pe=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};Pe.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ht(n,i[o][0]))return i[o][1];return r},Pe.prototype.update=function(t,e,n,r,i,o,c){void 0===n&&(n=yt(r));var u=i===a;if(n!==this.keyHash)return u?this:(s(c),s(o),Ke(this,t,e,n,[r,i]));for(var f=this.entries,l=0,h=f.length;l<h&&!ht(r,f[l][0]);l++);var d=l<h;if(d?f[l][1]===i:u)return this;if(s(c),(u||!d)&&s(o),u&&2===h)return new Re(t,this.keyHash,f[1^l]);var p=t&&t===this.ownerID,m=p?f:Jt(f);return d?u?l===h-1?m.pop():m[l]=m.pop():m[l]=[r,i]:m.push([r,i]),p?(this.entries=m,this):new Pe(t,this.keyHash,m)};var Re=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};Re.prototype.get=function(t,e,n,r){return ht(n,this.entry[0])?this.entry[1]:r},Re.prototype.update=function(t,e,n,r,i,o,c){var u=i===a,f=ht(r,this.entry[0]);return(f?i===this.entry[1]:u)?this:(s(c),u?void s(o):f?t&&t===this.ownerID?(this.entry[1]=i,this):new Re(t,this.keyHash,[r,i]):(s(o),Ke(this,t,e,yt(r),[r,i])))},Ne.prototype.iterate=Pe.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},De.prototype.iterate=Le.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},Re.prototype.iterate=function(t,e){return t(this.entry)};var $e,Ue=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Be(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return qe(t,n.entry)}else if(n.entries){if(r<=(i=n.entries.length-1))return qe(t,n.entries[this._reverse?i-r:r])}else if(r<=(i=n.nodes.length-1)){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return qe(t,o.entry);e=this._stack=Be(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(q);function qe(t,e){return B(t,e[0],e[1])}function Be(t,e){return{node:t,index:0,__prev:e}}function We(t,e,n,r){var i=Object.create(ze);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Fe(){return $e||($e=We(0))}function Ve(t,e,n){var r,i;if(t._root){var o={value:!1},s={value:!1};if(r=He(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;i=t.size+(o.value?n===a?-1:1:0)}else{if(n===a)return t;i=1,r=new Ne(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?We(i,r):Fe()}function He(t,e,n,r,i,o,c,u){return t?t.update(e,n,r,i,o,c,u):o===a?t:(s(u),s(c),new Re(e,r,[i,o]))}function Ye(t){return t.constructor===Re||t.constructor===Pe}function Ke(t,e,n,i,a){if(t.keyHash===i)return new Pe(e,i,[t.entry,a]);var s,c=(0===n?t.keyHash:t.keyHash>>>n)&o,u=(0===n?i:i>>>n)&o,f=c===u?[Ke(t,e,n+r,i,a)]:(s=new Re(e,i,a),c<u?[t,s]:[s,t]);return new De(e,1<<c|1<<u,f)}function Je(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Xe(t,e,n,r){var i=r?t:Jt(t);return i[e]=n,i}var Ze=i/4,Ge=i/2,Qe=i/4,tn="@@__IMMUTABLE_LIST__@@";function en(t){return Boolean(t&&t[tn])}var nn=function(t){function e(e){var n=fn();if(null==e)return n;if(en(e))return e;var o=t(e),a=o.size;return 0===a?n:(Zt(a),a>0&&a<i?un(0,a,r,null,new on(o.toArray())):n.withMutations(function(t){t.setSize(a),o.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=f(this,t))>=0&&t<this.size){var n=dn(this,t+=this._origin);return n&&n.array[t&o]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=f(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?pn(t,e).set(0,n):pn(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o={value:!1};e>=mn(t._capacity)?r=ln(r,t.__ownerID,0,e,n,o):i=ln(i,t.__ownerID,t._level,e,n,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t;return un(t._origin,t._capacity,t._level,i,r)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=r,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):fn()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){pn(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return pn(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){pn(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return pn(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!=typeof i&&F(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},e.prototype.setSize=function(t){return pn(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,r))})},e.prototype.slice=function(t,e){var n=this.size;return h(t,e,n)?this:pn(this,d(t,n),p(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=cn(this,e);return new q(function(){var i=r();return i===sn?{value:void 0,done:!0}:B(t,e?--n:n++,i)})},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=cn(this,e);(n=i())!==sn&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?un(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?fn():(this.__ownerID=t,this.__altered=!1,this)},e}(M);nn.isList=en;var rn=nn.prototype;rn[tn]=!0,rn.delete=rn.remove,rn.merge=rn.concat,rn.setIn=ue,rn.deleteIn=rn.removeIn=le,rn.update=de,rn.updateIn=pe,rn.mergeIn=Me,rn.mergeDeepIn=je,rn.withMutations=Ee,rn.wasAltered=Ce,rn.asImmutable=Te,rn["@@transducer/init"]=rn.asMutable=Ie,rn["@@transducer/step"]=function(t,e){return t.push(e)},rn["@@transducer/result"]=function(t){return t.asImmutable()};var on=function(t,e){this.array=t,this.ownerID=e};on.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var i=n>>>e&o;if(i>=this.array.length)return new on([],t);var a,s=0===i;if(e>0){var c=this.array[i];if((a=c&&c.removeBefore(t,e-r,n))===c&&s)return this}if(s&&!a)return this;var u=hn(this,t);if(!s)for(var f=0;f<i;f++)u.array[f]=void 0;return a&&(u.array[i]=a),u},on.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var i,a=n-1>>>e&o;if(a>=this.array.length)return this;if(e>0){var s=this.array[a];if((i=s&&s.removeAfter(t,e-r,n))===s&&a===this.array.length-1)return this}var c=hn(this,t);return c.array.splice(a+1),i&&(c.array[a]=i),c};var an,sn={};function cn(t,e){var n=t._origin,o=t._capacity,a=mn(o),s=t._tail;return c(t._root,t._level,0);function c(t,u,f){return 0===u?function(t,r){var c=r===a?s&&s.array:t&&t.array,u=r>n?0:n-r,f=o-r;f>i&&(f=i);return function(){if(u===f)return sn;var t=e?--f:u++;return c&&c[t]}}(t,f):function(t,a,s){var u,f=t&&t.array,l=s>n?0:n-s>>a,h=1+(o-s>>a);h>i&&(h=i);return function(){for(;;){if(u){var t=u();if(t!==sn)return t;u=null}if(l===h)return sn;var n=e?--h:l++;u=c(f&&f[n],a-r,s+(n<<a))}}}(t,u,f)}}function un(t,e,n,r,i,o,a){var s=Object.create(rn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function fn(){return an||(an=un(0,0,r))}function ln(t,e,n,i,a,c){var u,f=i>>>n&o,l=t&&f<t.array.length;if(!l&&void 0===a)return t;if(n>0){var h=t&&t.array[f],d=ln(h,e,n-r,i,a,c);return d===h?t:((u=hn(t,e)).array[f]=d,u)}return l&&t.array[f]===a?t:(c&&s(c),u=hn(t,e),void 0===a&&f===u.array.length-1?u.array.pop():u.array[f]=a,u)}function hn(t,e){return e&&t&&e===t.ownerID?t:new on(t?t.array.slice():[],e)}function dn(t,e){if(e>=mn(t._capacity))return t._tail;if(e<1<<t._level+r){for(var n=t._root,i=t._level;n&&i>0;)n=n.array[e>>>i&o],i-=r;return n}}function pn(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var i=t.__ownerID||new c,a=t._origin,s=t._capacity,u=a+e,f=void 0===n?s:n<0?s+n:a+n;if(u===a&&f===s)return t;if(u>=f)return t.clear();for(var l=t._level,h=t._root,d=0;u+d<0;)h=new on(h&&h.array.length?[void 0,h]:[],i),d+=1<<(l+=r);d&&(u+=d,a+=d,f+=d,s+=d);for(var p=mn(s),m=mn(f);m>=1<<l+r;)h=new on(h&&h.array.length?[h]:[],i),l+=r;var y=t._tail,v=m<p?dn(t,f-1):m>p?new on([],i):y;if(y&&m>p&&u<s&&y.array.length){for(var _=h=hn(h,i),b=l;b>r;b-=r){var g=p>>>b&o;_=_.array[g]=hn(_.array[g],i)}_.array[p>>>r&o]=y}if(f<s&&(v=v&&v.removeAfter(i,0,f)),u>=m)u-=m,f-=m,l=r,h=null,v=v&&v.removeBefore(i,0,u);else if(u>a||m<p){for(d=0;h;){var x=u>>>l&o;if(x!==m>>>l&o)break;x&&(d+=(1<<l)*x),l-=r,h=h.array[x]}h&&u>a&&(h=h.removeBefore(i,l,u-d)),h&&m<p&&(h=h.removeAfter(i,l,m-d)),d&&(u-=d,f-=d)}return t.__ownerID?(t.size=f-u,t._origin=u,t._capacity=f,t._level=l,t._root=h,t._tail=v,t.__hash=void 0,t.__altered=!0,t):un(u,f,l,h,v)}function mn(t){return t<i?0:t-1>>>r<<r}var yn,vn=function(t){function e(t){return null==t?bn():ft(t)?t:bn().withMutations(function(e){var n=O(t);Zt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):bn()},e.prototype.set=function(t,e){return gn(this,t,e)},e.prototype.remove=function(t){return gn(this,t,a)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?_n(e,n,t,this.__hash):0===this.size?bn():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(Ae);function _n(t,e,n,r){var i=Object.create(vn.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function bn(){return yn||(yn=_n(Fe(),fn()))}function gn(t,e,n){var r,o,s=t._map,c=t._list,u=s.get(e),f=void 0!==u;if(n===a){if(!f)return t;c.size>=i&&c.size>=2*s.size?(r=(o=c.filter(function(t,e){return void 0!==t&&u!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=o.__ownerID=t.__ownerID)):(r=s.remove(e),o=u===c.size-1?c.pop():c.set(u,void 0))}else if(f){if(n===c.get(u)[1])return t;r=s,o=c.set(u,[e,n])}else r=s.set(e,c.size),o=c.set(c.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=o,t.__hash=void 0,t):_n(r,o)}vn.isOrderedMap=ft,vn.prototype[z]=!0,vn.prototype.delete=vn.prototype.remove;var xn="@@__IMMUTABLE_STACK__@@";function wn(t){return Boolean(t&&t[xn])}var kn=function(t){function e(t){return null==t?jn():wn(t)?t:jn().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=f(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Mn(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&wn(e))return e;Zt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Mn(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):jn()},e.prototype.slice=function(e,n){if(h(e,n,this.size))return this;var r=d(e,this.size);if(p(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Mn(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Mn(this.size,this._head,t,this.__hash):0===this.size?jn():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new tt(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new tt(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new q(function(){if(r){var e=r.value;return r=r.next,B(t,n++,e)}return{value:void 0,done:!0}})},e}(M);kn.isStack=wn;var Sn,On=kn.prototype;function Mn(t,e,n,r){var i=Object.create(On);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function jn(){return Sn||(Sn=Mn(0))}On[xn]=!0,On.shift=On.pop,On.unshift=On.push,On.unshiftAll=On.pushAll,On.withMutations=Ee,On.wasAltered=Ce,On.asImmutable=Te,On["@@transducer/init"]=On.asMutable=Ie,On["@@transducer/step"]=function(t,e){return t.unshift(e)},On["@@transducer/result"]=function(t){return t.asImmutable()};var En="@@__IMMUTABLE_SET__@@";function In(t){return Boolean(t&&t[En])}function Tn(t){return In(t)&&N(t)}function Cn(t,e){if(t===e)return!0;if(!_(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||g(t)!==g(e)||w(t)!==w(e)||N(t)!==N(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!k(t);if(N(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&ht(i[1],t)&&(n||ht(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var s=!0,c=e.__iterate(function(e,r){if(n?!t.has(e):i?!ht(e,t.get(r,a)):!ht(t.get(r,a),e))return s=!1,!1});return s&&t.size===c}function An(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function zn(t){if(!t||"object"!=typeof t)return t;if(!_(t)){if(!te(t))return t;t=X(t)}if(g(t)){var e={};return t.__iterate(function(t,n){e[n]=zn(t)}),e}var n=[];return t.__iterate(function(t){n.push(zn(t))}),n}var Nn=function(t){function e(e){return null==e?$n():In(e)&&!N(e)?e:$n().withMutations(function(n){var r=t(e);Zt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(O(t).keySeq())},e.intersect=function(t){return(t=S(t).toArray()).length?Ln.intersect.apply(e(t.pop()),t):$n()},e.union=function(t){return(t=S(t).toArray()).length?Ln.union.apply(e(t.pop()),t):$n()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Pn(this,this._map.set(t,t))},e.prototype.remove=function(t){return Pn(this,this._map.remove(t))},e.prototype.clear=function(){return Pn(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],i=[];return this.forEach(function(o){var a=t.call(e,o,o,n);a!==o&&(r.push(o),i.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),i.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return rr($t(this,t))},e.prototype.sortBy=function(t,e){return rr($t(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(j);Nn.isSet=In;var Dn,Ln=Nn.prototype;function Pn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Rn(t,e){var n=Object.create(Ln);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function $n(){return Dn||(Dn=Rn(Fe()))}Ln[En]=!0,Ln.delete=Ln.remove,Ln.merge=Ln.concat=Ln.union,Ln.withMutations=Ee,Ln.asImmutable=Te,Ln["@@transducer/init"]=Ln.asMutable=Ie,Ln["@@transducer/step"]=function(t,e){return t.add(e)},Ln["@@transducer/result"]=function(t){return t.asImmutable()},Ln.__empty=$n,Ln.__make=Rn;var Un,qn=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Xt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Un)return Un;Un=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+f(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return h(t,n,this.size)?this:(t=d(t,this.size),(n=p(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new q(function(){if(o===n)return{value:void 0,done:!0};var a=i;return i+=e?-r:r,B(t,e?n-++o:o++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Cn(this,t)},e}(G);function Bn(t,e,n){for(var r=Gt(e),i=0;i!==r.length;)if((t=re(t,r[i++],a))===a)return n;return t}function Wn(t,e){return Bn(this,t,e)}function Fn(t,e){return Bn(t,e,a)!==a}function Vn(){Zt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}S.isIterable=_,S.isKeyed=g,S.isIndexed=w,S.isAssociative=k,S.isOrdered=N,S.Iterator=q,An(S,{toArray:function(){Zt(this.size);var t=new Array(this.size||0),e=g(this),n=0;return this.__iterate(function(r,i){t[n++]=e?[i,r]:r}),t},toIndexedSeq:function(){return new It(this)},toJS:function(){return zn(this)},toKeyedSeq:function(){return new Et(this,!0)},toMap:function(){return Ae(this.toKeyedSeq())},toObject:Vn,toOrderedMap:function(){return vn(this.toKeyedSeq())},toOrderedSet:function(){return rr(g(this)?this.valueSeq():this)},toSet:function(){return Nn(g(this)?this.valueSeq():this)},toSetSeq:function(){return new Tt(this)},toSeq:function(){return w(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return kn(g(this)?this.valueSeq():this)},toList:function(){return nn(g(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Wt(this,function(t,e){var n=g(t),r=[t].concat(e).map(function(t){return _(t)?n&&(t=O(t)):t=n?ot(t):at(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&g(i)||w(t)&&w(i))return i}var o=new tt(r);return n?o=o.toKeyedSeq():w(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}(this,t))},includes:function(t){return this.some(function(e){return ht(e,t)})},entries:function(){return this.__iterator(P)},every:function(t,e){Zt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return Wt(this,Dt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Zt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Zt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""}),e},keys:function(){return this.__iterator(D)},map:function(t,e){return Wt(this,zt(this,t,e))},reduce:function(t,e,n){return Jn(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Jn(this,t,e,n,arguments.length<2,!0)},reverse:function(){return Wt(this,Nt(this,!0))},slice:function(t,e){return Wt(this,Lt(this,t,e,!0))},some:function(t,e){return!this.every(Gn(t),e)},sort:function(t){return Wt(this,$t(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return u(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=Ae().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return Cn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(Zn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Gn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(l,null,t)},flatMap:function(t,e){return Wt(this,function(t,e,n){var r=Vt(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Wt(this,Rt(this,t,!0))},fromEntrySeq:function(){return new Ct(this)},get:function(t,e){return this.find(function(e,n){return ht(n,t)},void 0,e)},getIn:Wn,groupBy:function(t,e){return function(t,e,n){var r=g(t),i=(N(t)?vn():Ae()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return(t=t||[]).push(r?[a,o]:o),t})});var o=Vt(t);return i.map(function(e){return Wt(t,o(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,a)!==a},hasIn:function(t){return Fn(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:S(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:S(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return ht(e,t)})},keySeq:function(){return this.toSeq().map(Xn).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ut(this,t)},maxBy:function(t,e){return Ut(this,e,t)},min:function(t){return Ut(this,t?Qn(t):er)},minBy:function(t,e){return Ut(this,e?Qn(e):er,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Wt(this,Pt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Gn(t),e)},sortBy:function(t,e){return Wt(this,$t(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Wt(this,function(t,e,n){var r=Ht(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(P,i),s=!0;return new q(function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var i=t.value,c=i[0],u=i[1];return e.call(n,u,c,o)?r===P?t:B(r,c,u,t):(s=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Gn(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=N(t),n=g(t),r=e?1:0;return function(t,e){return e=dt(e,3432918353),e=dt(e<<15|e>>>-15,461845907),e=dt(e<<13|e>>>-13,5),e=dt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=pt((e=dt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+nr(yt(t),yt(e))|0}:function(t,e){r=r+nr(yt(t),yt(e))|0}:e?function(t){r=31*r+yt(t)|0}:function(t){r=r+yt(t)|0}),r)}(this))}});var Hn=S.prototype;Hn[v]=!0,Hn[U]=Hn.values,Hn.toJSON=Hn.toArray,Hn.__toStringMapper=ee,Hn.inspect=Hn.toSource=function(){return this.toString()},Hn.chain=Hn.flatMap,Hn.contains=Hn.includes,An(O,{flip:function(){return Wt(this,At(this))},mapEntries:function(t,e){var n=this,r=0;return Wt(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Wt(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Yn=O.prototype;Yn[b]=!0,Yn[U]=Hn.entries,Yn.toJSON=Vn,Yn.__toStringMapper=function(t,e){return ee(e)+": "+ee(t)},An(M,{toKeyedSeq:function(){return new Et(this,!1)},filter:function(t,e){return Wt(this,Dt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Wt(this,Nt(this,!1))},slice:function(t,e){return Wt(this,Lt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=d(t,t<0?this.count():this.size);var r=this.slice(0,t);return Wt(this,1===n?r:r.concat(Jt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Wt(this,Rt(this,t,!1))},get:function(t,e){return(t=f(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=f(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Wt(this,function(t,e){var n=Ht(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(L,r),a=0;return new q(function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?B(n,a++,e):B(n,a++,i.value,i)})},n}(this,t))},interleave:function(){var t=[this].concat(Jt(arguments)),e=Bt(this.toSeq(),G.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Wt(this,n)},keySeq:function(){return qn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Wt(this,Pt(this,t,e,!1))},zip:function(){return Wt(this,Bt(this,tr,[this].concat(Jt(arguments))))},zipAll:function(){return Wt(this,Bt(this,tr,[this].concat(Jt(arguments)),!0))},zipWith:function(t){var e=Jt(arguments);return e[0]=this,Wt(this,Bt(this,t,e))}});var Kn=M.prototype;function Jn(t,e,n,r,i,o){return Zt(t.size),t.__iterate(function(t,o,a){i?(i=!1,n=t):n=e.call(r,n,t,o,a)},o),n}function Xn(t,e){return e}function Zn(t,e){return[e,t]}function Gn(t){return function(){return!t.apply(this,arguments)}}function Qn(t){return function(){return-t.apply(this,arguments)}}function tr(){return Jt(arguments)}function er(t,e){return t<e?1:t>e?-1:0}function nr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Kn[x]=!0,Kn[z]=!0,An(j,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),j.prototype.has=Hn.includes,j.prototype.contains=j.prototype.includes,An(Z,O.prototype),An(G,M.prototype),An(Q,j.prototype);var rr=function(t){function e(t){return null==t?sr():Tn(t)?t:sr().withMutations(function(e){var n=j(t);Zt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(O(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Nn);rr.isOrderedSet=Tn;var ir,or=rr.prototype;function ar(t,e){var n=Object.create(or);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function sr(){return ir||(ir=ar(bn()))}or[z]=!0,or.zip=Kn.zip,or.zipWith=Kn.zipWith,or.__empty=sr,or.__make=ar;var cr=function(t,e){var n,r=function(o){var a=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t),c=i._indices={};i._name=e,i._keys=s,i._defaultValues=t;for(var u=0;u<s.length;u++){var f=s[u];c[f]=u,i[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+lr(this)+' with property "'+f+'" since that property name is part of the Record API.'):dr(i,f)}}this.__ownerID=void 0,this._values=nn().withMutations(function(t){t.setSize(a._keys.length),O(o).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},i=r.prototype=Object.create(ur);return i.constructor=r,e&&(r.displayName=e),r};cr.prototype.toString=function(){for(var t,e=lr(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)e+=(r?", ":"")+(t=n[r])+": "+ee(this.get(t));return e+" }"},cr.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&hr(this).equals(hr(t))},cr.prototype.hashCode=function(){return hr(this).hashCode()},cr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},cr.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},cr.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return fr(this,n)}return this},cr.prototype.remove=function(t){return this.set(t)},cr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fr(this,t)},cr.prototype.wasAltered=function(){return this._values.wasAltered()},cr.prototype.toSeq=function(){return hr(this)},cr.prototype.toJS=function(){return zn(this)},cr.prototype.entries=function(){return this.__iterator(P)},cr.prototype.__iterator=function(t,e){return hr(this).__iterator(t,e)},cr.prototype.__iterate=function(t,e){return hr(this).__iterate(t,e)},cr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?fr(this,e,t):(this.__ownerID=t,this._values=e,this)},cr.isRecord=C,cr.getDescriptiveName=lr;var ur=cr.prototype;function fr(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function lr(t){return t.constructor.displayName||t.constructor.name||"Record"}function hr(t){return ot(t._keys.map(function(e){return[e,t.get(e)]}))}function dr(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Xt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}ur[T]=!0,ur.delete=ur.remove,ur.deleteIn=ur.removeIn=le,ur.getIn=Wn,ur.hasIn=Hn.hasIn,ur.merge=me,ur.mergeWith=ye,ur.mergeIn=Me,ur.mergeDeep=Se,ur.mergeDeepWith=Oe,ur.mergeDeepIn=je,ur.setIn=ue,ur.update=de,ur.updateIn=pe,ur.withMutations=Ee,ur.asMutable=Ie,ur.asImmutable=Te,ur[U]=ur.entries,ur.toJSON=ur.toObject=Hn.toObject,ur.inspect=ur.toSource=function(){return this.toString()};var pr,mr=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(pr)return pr;pr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return ht(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return h(t,n,r)?this:new e(this._value,p(n,r)-d(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return ht(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return ht(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,i=0;return new q(function(){return i===r?{value:void 0,done:!0}:B(t,e?r-++i:i++,n._value)})},e.prototype.equals=function(t){return t instanceof e?ht(this._value,t._value):Cn(t)},e}(G);function yr(t,e){return function t(e,n,r,i,o,a){var s=Array.isArray(r)?G:Qt(r)?Z:null;if(s){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),o&&""!==i&&o.push(i);var c=n.call(a,i,s(r).map(function(i,a){return t(e,n,i,a,o,r)}),o&&o.slice());return e.pop(),o&&o.pop(),c}return r}([],e||vr,t,"",e&&e.length>2?[]:void 0,{"":t})}function vr(t,e){return g(e)?e.toMap():e.toList()}var _r="4.0.0-rc.11",br={version:_r,Collection:S,Iterable:S,Seq:X,Map:Ae,OrderedMap:vn,List:nn,Stack:kn,Set:Nn,OrderedSet:rr,Record:cr,Range:qn,Repeat:mr,is:ht,fromJS:yr,hash:yt,isImmutable:A,isCollection:_,isKeyed:g,isIndexed:w,isAssociative:k,isOrdered:N,isValueObject:lt,isSeq:I,isList:en,isMap:ut,isOrderedMap:ft,isStack:wn,isSet:In,isOrderedSet:Tn,isRecord:C,get:re,getIn:Bn,has:ne,hasIn:Fn,merge:_e,mergeDeep:ge,mergeWith:be,mergeDeepWith:xe,remove:oe,removeIn:fe,set:ae,setIn:ce,update:he,updateIn:se},gr=S;e.default=br},function(t,e,n){"use strict";n.d(e,"f",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"j",function(){return f}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return y}),n.d(e,"i",function(){return v});var r=n(0),i=n.n(r),o=n(4);function a(t){return function(t){return t.items.map(t=>t.id).max()||0}(t)+1}function s(t){return t instanceof o.c}function c(t){return t instanceof o.d}function u(t){if(t.isEmpty())return null;const e=t.map(t=>t.x),n=t.map(t=>t.y),r=e.min(),i=n.min();return{x:r,y:i,width:e.max()-r,height:n.max()-i}}const f=t=>(function(t,e){const n=10**e;return Math.round(t*n)/n})(t,3);function l(t,e){const{x:n,y:r}=e;let i=!1;for(let e=0,o=t.length-1;e<t.length;o=e,e+=1){const a=t[e].x,s=t[e].y,c=t[o].x,u=t[o].y;s>r!=u>r&&n<(c-a)*(r-s)/(u-s)+a&&(i=!i)}return i}function h(t,e,n){return r=>t+(n-t)*(r-t)/(e-t)}const d=t=>t*t,p=(t,e)=>d(t.x-e.x)+d(t.y-e.y);function m(t,e){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function y(t,e,n){const r=p(e,n);if(0===r)return m(t,e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<=0?m(e,t):i>=1?m(n,t):Math.sqrt(p(t,{x:e.x+i*(n.x-e.x),y:e.y+i*(n.y-e.y)}))}function v(t,e){return i.a.merge(...t.map(t=>(function(t,e){return e.split(".").reduce((t,e)=>t&&t[e],t)})(t,e)).filter(Boolean))}},function(t,e,n){"use strict";var r=n(24),i=n(13),o=n(26),a=n(1),s=n(2),c=n(50),u=n(3),f=n(16);const l=Object(s.Record)({id:-1,locked:!1,sem:new f.a,points:Object(s.List)(),stroke:"black",strokeWidth:1,opacity:1,fill:"#888888"},"PolygonItem");class h extends l{toJS(){const t=super.toJS();return t.type="PolygonItem",t}static fromJS(t){return new h(t).update("points",s.List).update("sem",f.a.fromJS)}static rectFromPoints(t,e){const n=t.x,r=t.y,i=e.x,o=e.y;return new h({points:Object(s.List)([{x:n,y:r},{x:i,y:r},{x:i,y:o},{x:n,y:o}])})}static fromPoints(t){return new h({points:t})}static isRect(t){if(!(t instanceof h)||4!==t.points.count())return!1;const[e,n,r,i]=t.points;return e.x===n.x&&n.y===r.y&&r.x===i.x&&i.y===e.y||e.y===n.y&&n.x===r.x&&r.y===i.y&&i.x===e.x}resize(t,{h:e,v:n},r,i){if(this.locked)return this;const o=e?Object(u.e)(t.x,r.x,i.x):c.a,a=n?Object(u.e)(t.y,r.y,i.y):c.a;return this.update("points",t=>t.map(t=>({x:o(t.x),y:a(t.y)})))}move(t,e){return this.locked?this:this.update("points",n=>n.map(n=>({x:n.x+t,y:n.y+e})))}render(t){const e=this.getVertices(),n=e.map(t=>t.x).min(),r=e.map(t=>t.y).min();return Object(a.a)("g",{key:this.id},[Object(a.a)("polygon",{key:"shape",attrs:{stroke:this.stroke,"stroke-linejoin":"round","stroke-width":this.strokeWidth,opacity:this.opacity,fill:this.fill,points:this.points.map(t=>`${t.x},${t.y}`).join(" ")}}),this.sem.renderLabel(n,r,t)].filter(Boolean))}getVertices(){return this.points}containsPoint(t){return Object(u.a)(this.points.toArray(),t)}supportEditVertex(){return!0}insertVertex(t,e){return this.update("points",n=>n.insert(t,e))}deleteVertex(t){return this.update("points",e=>e.delete(t))}moveVertex(t,e,n){return this.update("points",r=>r.update(t,t=>({x:t.x+e,y:t.y+n})))}getShortDescription(){return"PolygonItem"}}const d=Object(s.Record)({id:-1,locked:!1,sem:new f.a,points:Object(s.List)(),stroke:"#000000",strokeWidth:5,opacity:1,fill:"none"},"PolylineItem");class p extends d{toJS(){const t=super.toJS();return t.type="PolylineItem",t}static fromJS(t){return new p(t).update("points",s.List).update("sem",f.a.fromJS)}static lineFromPoints([t,e]){return new p({points:Object(s.List)([t,e])})}static fromPoints(t){return new p({points:Object(s.List)(t)})}getVertices(){return this.points}resize(t,{h:e,v:n},r,i){if(this.locked)return this;const o=e?Object(u.e)(t.x,r.x,i.x):c.a,a=n?Object(u.e)(t.y,r.y,i.y):c.a;return this.update("points",t=>t.map(t=>({x:o(t.x),y:a(t.y)})))}render(){return Object(a.a)("polyline",{key:this.id,attrs:{stroke:this.stroke,"stroke-linejoin":"round","stroke-width":this.strokeWidth,opacity:this.opacity,fill:this.fill,points:this.points.map(t=>`${t.x},${t.y}`).join(" ")}})}containsPoint(t){const e=this.points.butLast().zip(this.points.rest());return Boolean(e.find(([e,n])=>{return Object(u.c)(t,e,n)<=this.strokeWidth/2}))}move(t,e){return this.locked?this:this.update("points",n=>n.map(n=>({x:n.x+t,y:n.y+e})))}supportEditVertex(){return!0}insertVertex(t,e){return this.update("points",n=>n.insert(t,e))}deleteVertex(t){return this.update("points",e=>e.delete(t))}moveVertex(t,e,n){return this.update("points",r=>r.update(t,t=>({x:t.x+e,y:t.y+n})))}getShortDescription(){return"PolylineItem"}}var m=n(25);n.d(e,"a",function(){return r.a}),n.d(e,"f",function(){return i.c}),n.d(e,"e",function(){return m.a}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return p}),n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(5);function i(t){return function e(n){return 0===arguments.length||Object(r.a)(n)?e:t.apply(this,arguments)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n(1),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};function o({label:t,key:e},n){return Object(r.a)("div.row",{key:e},[Object(r.a)("h2",t),...n])}function a(t){var{label:e,type:n,value:o,field:a}=t,s=i(t,["label","type","value","field"]);return Object(r.a)("div.field",[Object(r.a)("input",{dataset:{field:a},attrs:Object.assign({type:n},s),props:{value:o}}),Object(r.a)("p",e)])}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(6),i=n(5);function o(t){return function e(n,o){switch(arguments.length){case 0:return e;case 1:return Object(i.a)(n)?e:Object(r.a)(function(e){return t(n,e)});default:return Object(i.a)(n)&&Object(i.a)(o)?e:Object(i.a)(n)?Object(r.a)(function(e){return t(e,o)}):Object(i.a)(o)?Object(r.a)(function(e){return t(n,e)}):t(n,o)}}}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return a});const r=12,i=8,o=30,a=10},function(t,e,n){"use strict";(function(t){function n(){var e;return(e="undefined"!=typeof window?window:void 0!==t?t:this).Cyclejs=e.Cyclejs||{},(e=e.Cyclejs).adaptStream=e.adaptStream||function(t){return t},e}Object.defineProperty(e,"__esModule",{value:!0}),e.setAdapt=function(t){n().adaptStream=t},e.adapt=function(t){return n().adaptStream(t)}}).call(this,n(19))},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=n(53);function o(t,e,n){var o,a,s,c={};if(void 0!==n?(c=e,i.array(n)?o=n:i.primitive(n)?a=n:n&&n.sel&&(o=[n])):void 0!==e&&(i.array(e)?o=e:i.primitive(e)?a=e:e&&e.sel?o=[e]:c=e),void 0!==o)for(s=0;s<o.length;++s)i.primitive(o[s])&&(o[s]=r.vnode(void 0,void 0,void 0,o[s],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,n,r){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var i=0;i<n.length;++i){var o=n[i].data;void 0!==o&&t(o,n[i].children,n[i].sel)}}(c,o,t),r.vnode(t,c,o,a,void 0)}e.h=o,e.default=o},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return f});var r=n(2),i=n(25);const o=Symbol("empty-action"),a=Symbol("undo"),s=Symbol("redo"),c=Symbol("clear-history"),u=Object(r.Record)({state:new i.a,list:Object(r.List)(),index:-1});class f extends u{static fromState(t){return new f({state:t})}pop(){return this.update("list",t=>t.splice(this.index,1)).update("index",t=>t-1)}getLastAction(){return-1===this.index?o:this.list.get(this.index)}getNextAction(){return this.list.get(this.index+1)||o}apply(t){return t===o?this:this.merge({list:this.list.setSize(this.index+1).push(t),index:this.index+1,state:t.next(this.state)})}redo(){const t=this.getNextAction();return t===o?this:this.merge({list:this.list,index:this.index+1,state:t.next(this.state)})}undo(){const t=this.getLastAction();return t===o?this:this.merge({list:this.list,index:this.index-1,state:t.prev(this.state)})}clearHistory(){return this.merge({list:Object(r.List)(),index:-1,state:this.state})}}},function(t,e,n){"use strict";function r(t,e,n){this.k=t,this.x=e,this.y=n}n.r(e),n.d(e,"Transform",function(){return r}),n.d(e,"identity",function(){return i}),n.d(e,"default",function(){return o}),r.prototype={constructor:r,scale:function(t){return 1===t?this:new r(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new r(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i=new r(1,0,0);function o(t){return t.__zoom||i}o.prototype=r.prototype},function(t,e,n){"use strict";var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var o=i(r);o.right,o.left;var a=Array.prototype;a.slice,a.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var s=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};Array.prototype.slice;var c={value:function(){}};function u(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new f(r)}function f(t){this._=t}function l(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function h(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=c,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}f.prototype=u.prototype={constructor:f,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=h(i[n],t.name,e);else if(null==e)for(n in i)i[n]=h(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=l(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new f(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var d=u,p="http://www.w3.org/1999/xhtml",m={svg:"http://www.w3.org/2000/svg",xhtml:p,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},y=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),m.hasOwnProperty(e)?{space:m[e],local:t}:t};var v=function(t){var e=y(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===p&&e.documentElement.namespaceURI===p?e.createElement(t):e.createElementNS(n,t)}})(e)};function _(){}var b=function(t){return null==t?_:function(){return this.querySelector(t)}};function g(){return[]}var x=function(t){return null==t?g:function(){return this.querySelectorAll(t)}},w=function(t){return function(){return this.matches(t)}},k=function(t){return new Array(t.length)};function S(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}S.prototype={constructor:S,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var O="$";function M(t,e,n,r,i,o){for(var a,s=0,c=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new S(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function j(t,e,n,r,i,o,a){var s,c,u,f={},l=e.length,h=o.length,d=new Array(l);for(s=0;s<l;++s)(c=e[s])&&(d[s]=u=O+a.call(c,c.__data__,s,e),u in f?i[s]=c:f[u]=c);for(s=0;s<h;++s)(c=f[u=O+a.call(t,o[s],s,o)])?(r[s]=c,c.__data__=o[s],f[u]=null):n[s]=new S(t,o[s]);for(s=0;s<l;++s)(c=e[s])&&f[d[s]]===c&&(i[s]=c)}function E(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var I=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function T(t,e){return t.style.getPropertyValue(e)||I(t).getComputedStyle(t,null).getPropertyValue(e)}function C(t){return t.trim().split(/^|\s+/)}function A(t){return t.classList||new z(t)}function z(t){this._node=t,this._names=C(t.getAttribute("class")||"")}function N(t,e){for(var n=A(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function D(t,e){for(var n=A(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}z.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function L(){this.textContent=""}function P(){this.innerHTML=""}function R(){this.nextSibling&&this.parentNode.appendChild(this)}function $(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U(){return null}function q(){var t=this.parentNode;t&&t.removeChild(this)}function B(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function W(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var F={},V=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(F={mouseenter:"mouseover",mouseleave:"mouseout"}));function H(t,e,n){return t=Y(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Y(t,e,n){return function(r){var i=V;V=r;try{t.call(this,this.__data__,e,n)}finally{V=i}}}function K(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function J(t,e,n){var r=F.hasOwnProperty(t.type)?H:Y;return function(i,o,a){var s,c=this.__on,u=r(e,o,a);if(c)for(var f=0,l=c.length;f<l;++f)if((s=c[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},c?c.push(s):this.__on=[s]}}function X(t,e,n){var r=I(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Z=[null];function G(t,e){this._groups=t,this._parents=e}function Q(){return new G([[document.documentElement]],Z)}G.prototype=Q.prototype={constructor:G,select:function(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],c=s.length,u=r[i]=new Array(c),f=0;f<c;++f)(o=s[f])&&(a=t.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),u[f]=a);return new G(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],c=s.length,u=0;u<c;++u)(a=s[u])&&(r.push(t.call(a,a.__data__,u,s)),i.push(a));return new G(r,i)},filter:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&c.push(o);return new G(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each(function(t){p[++f]=t}),p;var n,r=e?j:M,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),c=new Array(a),u=new Array(a),f=0;f<a;++f){var l=i[f],h=o[f],d=h.length,p=t.call(l,l&&l.__data__,f,i),m=p.length,y=c[f]=new Array(m),v=s[f]=new Array(m);r(l,h,y,v,u[f]=new Array(d),p,e);for(var _,b,g=0,x=0;g<m;++g)if(_=y[g]){for(g>=x&&(x=g+1);!(b=v[x])&&++x<m;);_._next=b||null}}return(s=new G(s,i))._enter=c,s._exit=u,s},enter:function(){return new G(this._enter||this._groups.map(k),this._parents)},exit:function(){return new G(this._exit||this._groups.map(k),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,u=e[s],f=n[s],l=u.length,h=a[s]=new Array(l),d=0;d<l;++d)(c=u[d]||f[d])&&(h[d]=c);for(;s<r;++s)a[s]=e[s];return new G(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=E);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,u=i[o]=new Array(c),f=0;f<c;++f)(a=s[f])&&(u[f]=a);u.sort(e)}return new G(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=y(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):T(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=C(t+"");if(arguments.length<2){for(var r=A(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?N:D)(this,t)}}:e?function(t){return function(){N(this,t)}}:function(t){return function(){D(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?L:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(R)},lower:function(){return this.each($)},append:function(t){var e="function"==typeof t?t:v(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:v(t),r=null==e?U:"function"==typeof e?e:b(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(q)},clone:function(t){return this.select(t?W:B)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?J:K,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var c,u=0,f=s.length;u<f;++u)for(r=0,c=s[u];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return X(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return X(this,t,e)}})(t,e))}};var tt=Q,et=0;function nt(){this._="@"+(++et).toString(36)}nt.prototype=function(){return new nt}.prototype={constructor:nt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function rt(t,e,n,r,i,o,a,s,c,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=c,this._=u}rt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var it=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ot(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function at(){}var st="\\s*([+-]?\\d+)\\s*",ct="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ft=/^#([0-9a-f]{3})$/,lt=/^#([0-9a-f]{6})$/,ht=new RegExp("^rgb\\("+[st,st,st]+"\\)$"),dt=new RegExp("^rgb\\("+[ut,ut,ut]+"\\)$"),pt=new RegExp("^rgba\\("+[st,st,st,ct]+"\\)$"),mt=new RegExp("^rgba\\("+[ut,ut,ut,ct]+"\\)$"),yt=new RegExp("^hsl\\("+[ct,ut,ut]+"\\)$"),vt=new RegExp("^hsla\\("+[ct,ut,ut,ct]+"\\)$"),_t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bt(t){var e;return t=(t+"").trim().toLowerCase(),(e=ft.exec(t))?new St((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=lt.exec(t))?gt(parseInt(e[1],16)):(e=ht.exec(t))?new St(e[1],e[2],e[3],1):(e=dt.exec(t))?new St(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pt.exec(t))?xt(e[1],e[2],e[3],e[4]):(e=mt.exec(t))?xt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=yt.exec(t))?Mt(e[1],e[2]/100,e[3]/100,1):(e=vt.exec(t))?Mt(e[1],e[2]/100,e[3]/100,e[4]):_t.hasOwnProperty(t)?gt(_t[t]):"transparent"===t?new St(NaN,NaN,NaN,0):null}function gt(t){return new St(t>>16&255,t>>8&255,255&t,1)}function xt(t,e,n,r){return r<=0&&(t=e=n=NaN),new St(t,e,n,r)}function wt(t){return t instanceof at||(t=bt(t)),t?new St((t=t.rgb()).r,t.g,t.b,t.opacity):new St}function kt(t,e,n,r){return 1===arguments.length?wt(t):new St(t,e,n,null==r?1:r)}function St(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ot(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Mt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Et(t,e,n,r)}function jt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Et)return new Et(t.h,t.s,t.l,t.opacity);if(t instanceof at||(t=bt(t)),!t)return new Et;if(t instanceof Et)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Et(a,s,c,t.opacity)}(t):new Et(t,e,n,null==r?1:r)}function Et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function It(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}it(at,bt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),it(St,kt,ot(at,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new St(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new St(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Ot(this.r)+Ot(this.g)+Ot(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),it(Et,jt,ot(at,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Et(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Et(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new St(It(t>=240?t-240:t+120,i,r),It(t,i,r),It(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Tt=Math.PI/180,Ct=180/Math.PI,At=.96422,zt=1,Nt=.82521,Dt=4/29,Lt=6/29,Pt=3*Lt*Lt,Rt=Lt*Lt*Lt;function $t(t){if(t instanceof qt)return new qt(t.l,t.a,t.b,t.opacity);if(t instanceof Kt){if(isNaN(t.h))return new qt(t.l,0,0,t.opacity);var e=t.h*Tt;return new qt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof St||(t=wt(t));var n,r,i=Vt(t.r),o=Vt(t.g),a=Vt(t.b),s=Bt((.2225045*i+.7168786*o+.0606169*a)/zt);return i===o&&o===a?n=r=s:(n=Bt((.4360747*i+.3850649*o+.1430804*a)/At),r=Bt((.0139322*i+.0971045*o+.7141733*a)/Nt)),new qt(116*s-16,500*(n-s),200*(s-r),t.opacity)}function Ut(t,e,n,r){return 1===arguments.length?$t(t):new qt(t,e,n,null==r?1:r)}function qt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Bt(t){return t>Rt?Math.pow(t,1/3):t/Pt+Dt}function Wt(t){return t>Lt?t*t*t:Pt*(t-Dt)}function Ft(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ht(t){if(t instanceof Kt)return new Kt(t.h,t.c,t.l,t.opacity);if(t instanceof qt||(t=$t(t)),0===t.a&&0===t.b)return new Kt(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ct;return new Kt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Yt(t,e,n,r){return 1===arguments.length?Ht(t):new Kt(t,e,n,null==r?1:r)}function Kt(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}it(qt,Ut,ot(at,{brighter:function(t){return new qt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new qt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new St(Ft(3.1338561*(e=At*Wt(e))-1.6168667*(t=zt*Wt(t))-.4906146*(n=Nt*Wt(n))),Ft(-.9787684*e+1.9161415*t+.033454*n),Ft(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),it(Kt,Yt,ot(at,{brighter:function(t){return new Kt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Kt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return $t(this).rgb()}}));var Jt=-.29227,Xt=-.90649,Zt=1.97294,Gt=Zt*Xt,Qt=1.78277*Zt,te=1.78277*Jt- -.14861*Xt;function ee(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ne)return new ne(t.h,t.s,t.l,t.opacity);t instanceof St||(t=wt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(te*r+Gt*e-Qt*n)/(te+Gt-Qt),o=r-i,a=(Zt*(n-i)-Jt*o)/Xt,s=Math.sqrt(a*a+o*o)/(Zt*i*(1-i)),c=s?Math.atan2(a,o)*Ct-120:NaN;return new ne(c<0?c+360:c,s,i,t.opacity)}(t):new ne(t,e,n,null==r?1:r)}function ne(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function re(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}it(ne,ee,ot(at,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ne(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ne(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Tt,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new St(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Jt*r+Xt*i)),255*(e+n*(Zt*r)),this.opacity)}}));var ie=function(t){return function(){return t}};function oe(t,e){return function(n){return t+n*e}}function ae(t,e){var n=e-t;return n?oe(t,n>180||n<-180?n-360*Math.round(n/360):n):ie(isNaN(t)?e:t)}function se(t){return 1==(t=+t)?ce:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ie(isNaN(e)?n:e)}}function ce(t,e){var n=e-t;return n?oe(t,n):ie(isNaN(t)?e:t)}var ue=function t(e){var n=se(e);function r(t,e){var r=n((t=kt(t)).r,(e=kt(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ce(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function fe(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=kt(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var le=fe(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return re((n-r/e)*e,a,i,o,s)}}),he=(fe(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return re((n-r/e)*e,i,o,a,s)}}),function(t,e){return e-=t=+t,function(n){return t+e*n}}),de=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(de.source,"g");var me,ye,ve,_e,be=function(t,e){var n,r,i,o=de.lastIndex=pe.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=de.exec(t))&&(r=pe.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,c.push({i:a,x:he(n,r)})),o=pe.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})},ge=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?ie(e):("number"===r?he:"string"===r?(n=bt(e))?(e=n,ue):be:e instanceof bt?ue:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ge(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ge(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:he)(t,e)},xe=180/Math.PI,we={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ke=function(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*xe,skewX:Math.atan(c)*xe,scaleX:a,scaleY:s}};function Se(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);s.push({i:c-4,x:he(t,i)},{i:c-2,x:he(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:he(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:he(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:he(t,n)},{i:s-2,x:he(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var Oe=Se(function(t){return"none"===t?we:(me||(me=document.createElement("DIV"),ye=document.documentElement,ve=document.defaultView),me.style.transform=t,t=ve.getComputedStyle(ye.appendChild(me),null).getPropertyValue("transform"),ye.removeChild(me),t=t.slice(7,-1).split(","),ke(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Me=Se(function(t){return null==t?we:(_e||(_e=document.createElementNS("http://www.w3.org/2000/svg","g")),_e.setAttribute("transform",t),(t=_e.transform.baseVal.consolidate())?(t=t.matrix,ke(t.a,t.b,t.c,t.d,t.e,t.f)):we)},", ",")",")"),je=Math.SQRT2;function Ee(t){return((t=Math.exp(t))+1/t)/2}var Ie=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],c=e[1],u=e[2],f=s-i,l=c-o,h=f*f+l*l;if(h<1e-12)r=Math.log(u/a)/je,n=function(t){return[i+t*f,o+t*l,a*Math.exp(je*t*r)]};else{var d=Math.sqrt(h),p=(u*u-a*a+4*h)/(2*a*2*d),m=(u*u-a*a-4*h)/(2*u*2*d),y=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-y)/je,n=function(t){var e,n=t*r,s=Ee(y),c=a/(2*d)*(s*(e=je*n+y,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[i+c*f,o+c*l,a*s/Ee(je*n+y)]}}return n.duration=1e3*r,n};function Te(t){return function(e,n){var r=t((e=jt(e)).h,(n=jt(n)).h),i=ce(e.s,n.s),o=ce(e.l,n.l),a=ce(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Te(ae),Te(ce);function Ce(t){return function(e,n){var r=t((e=Yt(e)).h,(n=Yt(n)).h),i=ce(e.c,n.c),o=ce(e.l,n.l),a=ce(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Ce(ae),Ce(ce);function Ae(t){return function e(n){function r(e,r){var i=t((e=ee(e)).h,(r=ee(r)).h),o=ce(e.s,r.s),a=ce(e.l,r.l),s=ce(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Ae(ae);var ze=Ae(ce);var Ne,De,Le=0,Pe=0,Re=0,$e=1e3,Ue=0,qe=0,Be=0,We="object"==typeof performance&&performance.now?performance:Date,Fe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ve(){return qe||(Fe(He),qe=We.now()+Be)}function He(){qe=0}function Ye(){this._call=this._time=this._next=null}function Ke(t,e,n){var r=new Ye;return r.restart(t,e,n),r}function Je(){qe=(Ue=We.now())+Be,Le=Pe=0;try{!function(){Ve(),++Le;for(var t,e=Ne;e;)(t=qe-e._time)>=0&&e._call.call(null,t),e=e._next;--Le}()}finally{Le=0,function(){var t,e,n=Ne,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ne=e);De=t,Ze(r)}(),qe=0}}function Xe(){var t=We.now(),e=t-Ue;e>$e&&(Be-=e,Ue=t)}function Ze(t){Le||(Pe&&(Pe=clearTimeout(Pe)),t-qe>24?(t<1/0&&(Pe=setTimeout(Je,t-We.now()-Be)),Re&&(Re=clearInterval(Re))):(Re||(Ue=We.now(),Re=setInterval(Xe,$e)),Le=1,Fe(Je)))}Ye.prototype=Ke.prototype={constructor:Ye,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ve():+n)+(null==e?0:+e),this._next||De===this||(De?De._next=this:Ne=this,De=this),this._call=t,this._time=n,Ze()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ze())}};var Ge=function(t,e,n){var r=new Ye;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},Qe=d("start","end","cancel","interrupt"),tn=[],en=0,nn=1,rn=2,on=3,an=4,sn=5,cn=6,un=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(c){var u,f,l,h;if(n.state!==nn)return s();for(u in i)if((h=i[u]).name===n.name){if(h.state===on)return Ge(o);h.state===an?(h.state=cn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<e&&(h.state=cn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(Ge(function(){n.state===on&&(n.state=an,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=rn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===rn){for(n.state=on,r=new Array(l=n.tween.length),u=0,f=-1;u<l;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=sn,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===sn&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=cn,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Ke(function(t){n.state=nn,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:Qe,tween:tn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:en})};function fn(t,e){var n=hn(t,e);if(n.state>en)throw new Error("too late; already scheduled");return n}function ln(t,e){var n=hn(t,e);if(n.state>on)throw new Error("too late; already running");return n}function hn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var dn=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>rn&&n.state<sn,n.state=cn,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}};function pn(t,e,n){var r=t._id;return t.each(function(){var t=ln(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return hn(t,r).value[e]}}var mn=function(t,e){var n;return("number"==typeof e?he:e instanceof bt?ue:(n=bt(e))?(e=n,ue):be)(t,e)};var yn=tt.prototype.constructor;function vn(t){return function(){this.style.removeProperty(t)}}var _n=0;function bn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function gn(){return++_n}var xn=tt.prototype;bn.prototype=function(t){return tt().transition(t)}.prototype={constructor:bn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=b(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,u=r[a],f=u.length,l=o[a]=new Array(f),h=0;h<f;++h)(s=u[h])&&(c=t.call(s,s.__data__,h,u))&&("__data__"in s&&(c.__data__=s.__data__),l[h]=c,un(l[h],e,n,h,l,hn(s,n)));return new bn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=x(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c,u=r[s],f=u.length,l=0;l<f;++l)if(c=u[l]){for(var h,d=t.call(c,c.__data__,l,u),p=hn(c,n),m=0,y=d.length;m<y;++m)(h=d[m])&&un(h,e,n,m,d,p);o.push(d),a.push(c)}return new bn(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&c.push(o);return new bn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,u=e[s],f=n[s],l=u.length,h=a[s]=new Array(l),d=0;d<l;++d)(c=u[d]||f[d])&&(h[d]=c);for(;s<r;++s)a[s]=e[s];return new bn(a,this._parents,this._name,this._id)},selection:function(){return new yn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=gn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,u=0;u<c;++u)if(a=s[u]){var f=hn(a,e);un(a,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new bn(r,this._parents,t,n)},call:xn.call,nodes:xn.nodes,node:xn.node,size:xn.size,empty:xn.empty,each:xn.each,on:function(t,e){var n=this._id;return arguments.length<2?hn(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?fn:ln;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=y(t),r="transform"===n?Me:mn;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,c));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,s,c=n(this);if(null!=c)return(a=this.getAttribute(t))===(s=c+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,c));this.removeAttribute(t)}})(n,r,pn(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}:function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=y(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,i)),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,i)),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Oe:mn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=T(this,t),a=(this.style.removeProperty(t),T(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,vn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=T(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=T(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}(t,r,pn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var c=ln(this,t),u=c.on,f=null==c.value[a]?o||(o=vn(e)):void 0;u===n&&i===f||(r=(n=u).copy()).on(s,i=f),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=T(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e(r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(pn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=hn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=ln(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=ln(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){fn(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){fn(this,t).delay=e}})(e,t)):hn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ln(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ln(this,t).duration=e}})(e,t)):hn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ln(this,t).ease=e}}(e,t)):hn(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){0==--i&&o()}};n.each(function(){var n=ln(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e})})}};(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n})(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var wn=2*Math.PI,kn=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wn);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*wn)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wn);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*wn)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wn);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*wn)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function Sn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return kn.time=Ve(),kn;return n}tt.prototype.interrupt=function(t){return this.each(function(){dn(this,t)})},tt.prototype.transition=function(t){var e,n;t instanceof bn?(e=t._id,t=t._name):(e=gn(),(n=kn).time=Ve(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,u=0;u<c;++u)(a=s[u])&&un(a,t,e,u,s,n||Sn(a,e));return new bn(r,this._parents,t,e)};["e","w"].map(On),["n","s"].map(On),["n","e","s","w","nw","ne","se","sw"].map(On);function On(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var Mn=Math.PI,jn=2*Mn,En=jn-1e-6;function In(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Tn(){return new In}In.prototype=Tn.prototype={constructor:In,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,c=r-e,u=o-t,f=a-e,l=u*u+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>1e-6)if(Math.abs(f*s-c*u)>1e-6&&i){var h=n-o,d=r-a,p=s*s+c*c,m=h*h+d*d,y=Math.sqrt(p),v=Math.sqrt(l),_=i*Math.tan((Mn-Math.acos((p+l-m)/(2*y*v)))/2),b=_/v,g=_/y;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(e+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>u*d)+","+(this._x1=t+g*s)+","+(this._y1=e+g*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+a,u=e+s,f=1^o,l=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+c+","+u),n&&(l<0&&(l=l%jn+jn),l>En?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=c)+","+(this._y1=u):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=Mn)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Cn(){}function An(t,e){var n=new Cn;if(t instanceof Cn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Cn.prototype=An.prototype={constructor:Cn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var zn=An;function Nn(){}var Dn=zn.prototype;function Ln(t,e){var n=new Nn;if(t instanceof Nn)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Nn.prototype=Ln.prototype={constructor:Nn,has:Dn.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Dn.remove,clear:Dn.clear,values:Dn.keys,size:Dn.size,empty:Dn.empty,each:Dn.each};Array.prototype.slice;var Pn={},Rn={},$n=34,Un=10,qn=13;function Bn(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Wn(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Fn(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Vn(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Fn(-e,6):e>9999?"+"+Fn(e,6):Fn(e,4))+"-"+Fn(t.getUTCMonth()+1,2)+"-"+Fn(t.getUTCDate(),2)+(o?"T"+Fn(n,2)+":"+Fn(r,2)+":"+Fn(i,2)+"."+Fn(o,3)+"Z":i?"T"+Fn(n,2)+":"+Fn(r,2)+":"+Fn(i,2)+"Z":r||n?"T"+Fn(n,2)+":"+Fn(r,2)+"Z":"")}var Hn=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,c=o<=0,u=!1;function f(){if(c)return Rn;if(u)return u=!1,Pn;var e,r,i=a;if(t.charCodeAt(i)===$n){for(;a++<o&&t.charCodeAt(a)!==$n||t.charCodeAt(++a)===$n;);return(e=a)>=o?c=!0:(r=t.charCodeAt(a++))===Un?u=!0:r===qn&&(u=!0,t.charCodeAt(a)===Un&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===Un)u=!0;else if(r===qn)u=!0,t.charCodeAt(a)===Un&&++a;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Un&&--o,t.charCodeAt(o-1)===qn&&--o;(r=f())!==Rn;){for(var l=[];r!==Pn&&r!==Rn;)l.push(r),r=f();e&&null==(l=e(l,s++))||i.push(l)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Vn(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Bn(t);return function(r,i){return e(n(r),i,t)}}(t,e):Bn(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Wn(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Wn(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}},Yn=Hn(","),Kn=Yn.parse,Jn=(Yn.parseRows,Yn.format,Yn.formatBody,Yn.formatRows,Hn("\t")),Xn=Jn.parse;Jn.parseRows,Jn.format,Jn.formatBody,Jn.formatRows;function Zn(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var Gn=function(t,e){return fetch(t,e).then(Zn)};function Qn(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Gn(e,n).then(function(e){return t(e,r)})}}Qn(Kn),Qn(Xn);function tr(t){return function(e,n){return Gn(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}tr("application/xml"),tr("text/html"),tr("image/svg+xml");function er(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,c,u,f,l,h,d=t._root,p={data:r},m=t._x0,y=t._y0,v=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(o=(m+v)/2))?m=o:v=o,(f=n>=(a=(y+_)/2))?y=a:_=a,i=d,!(d=d[l=f<<1|u]))return i[l]=p,t;if(s=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===s&&n===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(u=e>=(o=(m+v)/2))?m=o:v=o,(f=n>=(a=(y+_)/2))?y=a:_=a}while((l=f<<1|u)==(h=(c>=a)<<1|s>=o));return i[h]=d,i[l]=p,t}var nr=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function rr(t){return t[0]}function ir(t){return t[1]}function or(t,e,n){var r=new ar(null==e?rr:e,null==n?ir:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ar(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function sr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var cr=or.prototype=ar.prototype;cr.copy=function(){var t,e,n=new ar(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=sr(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=sr(e));return n},cr.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return er(this.cover(e,n),e,n,t)},cr.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),c=1/0,u=1/0,f=-1/0,l=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<c&&(c=r),r>f&&(f=r),i<u&&(u=i),i>l&&(l=i));if(c>f||u>l)return this;for(this.cover(c,u).cover(f,l),n=0;n<o;++n)er(this,a[n],s[n],t[n]);return this},cr.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,c=i-n,u=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=u,u=a,c*=2,s){case 0:i=n+c,o=r+c;break;case 1:n=i-c,o=r+c;break;case 2:i=n+c,r=o-c;break;case 3:n=i-c,r=o-c}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},cr.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},cr.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},cr.find=function(t,e,n){var r,i,o,a,s,c,u,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new nr(m,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);c=p.pop();)if(!(!(m=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<f||(s=c.y1)<l))if(m.length){var y=(i+a)/2,v=(o+s)/2;p.push(new nr(m[3],y,v,a,s),new nr(m[2],i,v,y,s),new nr(m[1],y,o,a,v),new nr(m[0],i,o,y,v)),(u=(e>=v)<<1|t>=y)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=c)}else{var _=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),g=_*_+b*b;if(g<n){var x=Math.sqrt(n=g);f=t-x,l=e-x,h=t+x,d=e+x,r=m.data}}return r},cr.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,c,u,f,l,h,d=this._root,p=this._x0,m=this._y0,y=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=o>=(s=(p+y)/2))?p=s:y=s,(f=a>=(c=(m+v)/2))?m=c:v=c,e=d,!(d=d[l=f<<1|u]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},cr.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},cr.root=function(){return this._root},cr.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},cr.visit=function(t){var e,n,r,i,o,a,s=[],c=this._root;for(c&&s.push(new nr(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&c.length){var u=(r+o)/2,f=(i+a)/2;(n=c[3])&&s.push(new nr(n,u,f,o,a)),(n=c[2])&&s.push(new nr(n,r,f,u,a)),(n=c[1])&&s.push(new nr(n,u,i,o,f)),(n=c[0])&&s.push(new nr(n,r,i,u,f))}return this},cr.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new nr(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,c=e.x1,u=e.y1,f=(a+c)/2,l=(s+u)/2;(o=i[0])&&n.push(new nr(o,a,s,f,l)),(o=i[1])&&n.push(new nr(o,f,s,c,l)),(o=i[2])&&n.push(new nr(o,a,l,f,u)),(o=i[3])&&n.push(new nr(o,f,l,c,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},cr.x=function(t){return arguments.length?(this._x=t,this):this._x},cr.y=function(t){return arguments.length?(this._y=t,this):this._y};Math.PI,Math.sqrt(5);var ur=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},fr=function(t){return(t=ur(Math.abs(t)))?t[1]:NaN},lr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hr(t){return new dr(t)}function dr(t){if(!(e=lr.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}hr.prototype=dr.prototype,dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pr,mr,yr=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},vr=function(t,e){var n=ur(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},_r={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return vr(100*t,e)},r:vr,s:function(t,e){var n=ur(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(pr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ur(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},br=function(t){return t},gr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];mr=function(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(t.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):br,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):br,s=t.percent||"%";function c(t){var e=(t=hr(t)).fill,n=t.align,c=t.sign,u=t.symbol,f=t.zero,l=t.width,h=t.comma,d=t.precision,p=t.trim,m=t.type;"n"===m?(h=!0,m="g"):_r[m]||(null==d&&(d=12),p=!0,m="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var y="$"===u?i[0]:"#"===u&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===u?i[1]:/[%p]/.test(m)?s:"",_=_r[m],b=/[defgprs%]/.test(m);function g(t){var i,s,u,g=y,x=v;if("c"===m)x=_(t)+x,t="";else{var w=(t=+t)<0;if(t=_(Math.abs(t),d),p&&(t=yr(t)),w&&0==+t&&(w=!1),g=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+g,x=("s"===m?gr[8+pr/3]:"")+x+(w&&"("===c?")":""),b)for(i=-1,s=t.length;++i<s;)if(48>(u=t.charCodeAt(i))||u>57){x=(46===u?o+t.slice(i+1):t.slice(i))+x,t=t.slice(0,i);break}}h&&!f&&(t=r(t,1/0));var k=g.length+t.length+x.length,S=k<l?new Array(l-k+1).join(e):"";switch(h&&f&&(t=r(S+t,S.length?l-x.length:1/0),S=""),n){case"<":t=g+t+x+S;break;case"=":t=g+S+t+x;break;case"^":t=S.slice(0,k=S.length>>1)+g+t+x+S.slice(k);break;default:t=S+g+t+x}return a(t)}return d=null==d?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),g.toString=function(){return t+""},g}return{format:c,formatPrefix:function(t,e){var n=c(((t=hr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(fr(e)/3))),i=Math.pow(10,-r),o=gr[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),mr.format,mr.formatPrefix;var xr=function(){return new wr};function wr(){this.reset()}wr.prototype={constructor:wr,reset:function(){this.s=this.t=0},add:function(t){Sr(kr,t,this.t),Sr(this,kr.s,this.s),this.s?this.t+=kr.t:this.s=kr.t},valueOf:function(){return this.s}};var kr=new wr;function Sr(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Or=1e-6,Mr=Math.PI,jr=Mr/2,Er=Mr/4,Ir=2*Mr,Tr=Mr/180,Cr=Math.abs,Ar=Math.atan,zr=Math.atan2,Nr=Math.cos,Dr=(Math.ceil,Math.exp),Lr=(Math.floor,Math.log),Pr=(Math.pow,Math.sin),Rr=(Math.sign,Math.sqrt),$r=Math.tan;function Ur(t){return t>1?0:t<-1?Mr:Math.acos(t)}function qr(t){return t>1?jr:t<-1?-jr:Math.asin(t)}function Br(){}xr(),xr();function Wr(t){var e=t[0],n=t[1],r=Nr(n);return[r*Nr(e),r*Pr(e),Pr(n)]}function Fr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Vr(t){var e=Rr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}xr();function Hr(t,e){return[Cr(t)>Mr?t+Math.round(-t/Ir)*Ir:t,e]}Hr.invert=Hr;var Yr=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Br,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Kr=function(t,e){return Cr(t[0]-e[0])<Or&&Cr(t[1]-e[1])<Or};function Jr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Xr=function(t,e,n,r,i){var o,a,s=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Kr(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Jr(r,t,null,!0)),c.push(n.o=new Jr(r,null,n,!1)),s.push(n=new Jr(a,t,null,!1)),c.push(n.o=new Jr(a,null,n,!0))}}),s.length){for(c.sort(e),Zr(s),Zr(c),o=0,a=c.length;o<a;++o)c[o].e=n=!n;for(var u,f,l=s[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=u.length;o<a;++o)i.point((f=u[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((f=u[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}u=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}};function Zr(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var Gr=xr(),Qr=function(t,e){var n=e[0],r=e[1],i=Pr(r),o=[Pr(n),-Nr(n),0],a=0,s=0;Gr.reset(),1===i?r=jr+Or:-1===i&&(r=-jr-Or);for(var c=0,u=t.length;c<u;++c)if(l=(f=t[c]).length)for(var f,l,h=f[l-1],d=h[0],p=h[1]/2+Er,m=Pr(p),y=Nr(p),v=0;v<l;++v,d=b,m=x,y=w,h=_){var _=f[v],b=_[0],g=_[1]/2+Er,x=Pr(g),w=Nr(g),k=b-d,S=k>=0?1:-1,O=S*k,M=O>Mr,j=m*x;if(Gr.add(zr(j*S*Pr(O),y*w+j*Nr(O))),a+=M?k+S*Ir:k,M^d>=n^b>=n){var E=Fr(Wr(h),Wr(_));Vr(E);var I=Fr(o,E);Vr(I);var T=(M^k>=0?-1:1)*qr(I[2]);(r>T||r===T&&(E[0]||E[1]))&&(s+=M^k>=0?1:-1)}}return(a<-Or||a<Or&&Gr<-Or)^1&s},ti=function(t,e,n,r){return function(i){var o,a,c,u=e(i),f=Yr(),l=e(f),h=!1,d={point:p,lineStart:y,lineEnd:v,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=g,a=[],o=[]},polygonEnd:function(){d.point=p,d.lineStart=y,d.lineEnd=v,a=s(a);var t=Qr(o,r);a.length?(h||(i.polygonStart(),h=!0),Xr(a,ni,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function m(t,e){u.point(t,e)}function y(){d.point=m,u.lineStart()}function v(){d.point=p,u.lineEnd()}function _(t,e){c.push([t,e]),l.point(t,e)}function b(){l.lineStart(),c=[]}function g(){_(c[0][0],c[0][1]),l.lineEnd();var t,e,n,r,s=l.clean(),u=f.result(),d=u.length;if(c.pop(),o.push(c),c=null,d)if(1&s){if((e=(n=u[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&s&&u.push(u.pop().concat(u.shift())),a.push(u.filter(ei))}return d}};function ei(t){return t.length>1}function ni(t,e){return((t=t.x)[0]<0?t[1]-jr-Or:jr-t[1])-((e=e.x)[0]<0?e[1]-jr-Or:jr-e[1])}ti(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Mr:-Mr,c=Cr(o-n);Cr(c-Mr)<Or?(t.point(n,r=(r+a)/2>0?jr:-jr),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&c>=Mr&&(Cr(n-i)<Or&&(n-=i*Or),Cr(o-s)<Or&&(o-=s*Or),r=function(t,e,n,r){var i,o,a=Pr(t-n);return Cr(a)>Or?Ar((Pr(e)*(o=Nr(r))*Pr(n)-Pr(r)*(i=Nr(e))*Pr(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*jr,r.point(-Mr,i),r.point(0,i),r.point(Mr,i),r.point(Mr,0),r.point(Mr,-i),r.point(0,-i),r.point(-Mr,-i),r.point(-Mr,0),r.point(-Mr,i);else if(Cr(t[0]-e[0])>Or){var o=t[0]<e[0]?Mr:-Mr;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Mr,-jr]);xr();xr(),xr();function ri(t){this._context=t}ri.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ir)}},result:Br};xr();function ii(){this._string=[]}function oi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}ii.prototype={_radius:4.5,_circle:oi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=oi(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};function ai(t){return function(e){var n=new si;for(var r in t)n[r]=t[r];return n.stream=e,n}}function si(){}si.prototype={constructor:si,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Nr(30*Tr);ai({point:function(t,e){this.stream.point(t*Tr,e*Tr)}});function ci(t){return function(e,n){var r=Nr(e),i=Nr(n),o=t(r*i);return[o*i*Pr(e),o*Pr(n)]}}function ui(t){return function(e,n){var r=Rr(e*e+n*n),i=t(r),o=Pr(i),a=Nr(i);return[zr(e*o,r*a),qr(r&&n*o/r)]}}var fi=ci(function(t){return Rr(2/(1+t))});fi.invert=ui(function(t){return 2*qr(t/2)});var li=ci(function(t){return(t=Ur(t))&&t/Pr(t)});li.invert=ui(function(t){return t});function hi(t,e){return[t,Lr($r((jr+e)/2))]}hi.invert=function(t,e){return[t,2*Ar(Dr(e))-jr]};function di(t,e){return[t,e]}di.invert=di;var pi=1.340264,mi=-.081106,yi=893e-6,vi=.003796,_i=Rr(3)/2;function bi(t,e){var n=qr(_i*Pr(e)),r=n*n,i=r*r*r;return[t*Nr(n)/(_i*(pi+3*mi*r+i*(7*yi+9*vi*r))),n*(pi+mi*r+i*(yi+vi*r))]}bi.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(pi+mi*i+o*(yi+vi*i))-e)/(pi+3*mi*i+o*(7*yi+9*vi*i)))*r)*i*i,!(Cr(n)<1e-12));++a);return[_i*t*(pi+3*mi*i+o*(7*yi+9*vi*i))/Nr(r),qr(Pr(r)/_i)]};function gi(t,e){var n=Nr(e),r=Nr(t)*n;return[n*Pr(t)/r,Pr(e)/r]}gi.invert=ui(Ar);function xi(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}xi.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Cr(n)>Or&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function wi(t,e){return[Nr(e)*Pr(t),Pr(e)]}wi.invert=ui(qr);function ki(t,e){var n=Nr(e),r=1+Nr(t)*n;return[n*Pr(t)/r,Pr(e)/r]}ki.invert=ui(function(t){return 2*Ar(t)});function Si(t,e){return[Lr($r((jr+e)/2)),-t]}Si.invert=function(t,e){return[-e,2*Ar(Dr(t))-jr]};function Oi(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Mi(t,e){var n,r,i,o,a,s=new Ti(t),c=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=ji);n=u.pop();)if(c&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)u.push(r=n.children[o]=new Ti(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Ii)}function ji(t){return t.children}function Ei(t){t.data=t.data.data}function Ii(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Ti(t){this.data=t,this.depth=this.height=0,this.parent=null}Ti.prototype=Mi.prototype={constructor:Ti,count:function(){return this.eachAfter(Oi)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Mi(this).eachBefore(Ei)}};Array.prototype.slice;var Ci=function(t,e,n,r,i){for(var o,a=t.children,s=-1,c=a.length,u=t.value&&(r-e)/t.value;++s<c;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u};function Ai(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ai.prototype=Object.create(Ti.prototype);var zi=function(t,e,n,r,i){for(var o,a=t.children,s=-1,c=a.length,u=t.value&&(i-n)/t.value;++s<c;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u},Ni=(1+Math.sqrt(5))/2;function Di(t,e,n,r,i,o){for(var a,s,c,u,f,l,h,d,p,m,y,v=[],_=e.children,b=0,g=0,x=_.length,w=e.value;b<x;){c=i-n,u=o-r;do{f=_[g++].value}while(!f&&g<x);for(l=h=f,y=f*f*(m=Math.max(u/c,c/u)/(w*t)),p=Math.max(h/y,y/l);g<x;++g){if(f+=s=_[g].value,s<l&&(l=s),s>h&&(h=s),y=f*f*m,(d=Math.max(h/y,y/l))>p){f-=s;break}p=d}v.push(a={value:f,dice:c<u,children:_.slice(b,g)}),a.dice?Ci(a,n,r,i,w?r+=u*f/w:o):zi(a,n,r,w?n+=c*f/w:i,o),w-=f,b=g}return v}(function t(e){function n(t,n,r,i,o){Di(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n})(Ni),function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,c,u,f,l=-1,h=a.length,d=t.value;++l<h;){for(c=(s=a[l]).children,u=s.value=0,f=c.length;u<f;++u)s.value+=c[u].value;s.dice?Ci(s,n,r,i,r+=(o-r)*s.value/d):zi(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Di(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ni);var Li=function(){return Math.random()},Pi=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Li),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Li)),Ri=(function t(e){function n(){var t=Pi.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Li),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Li));(function t(e){function n(t){var n=Ri.source(e)(t);return function(){return n()/t}}return n.source=t,n})(Li),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Li);var $i=Array.prototype;$i.map,$i.slice;var Ui=new Date,qi=new Date;function Bi(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Bi(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Ui.setTime(+e),qi.setTime(+r),t(Ui),t(qi),Math.floor(n(Ui,qi))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Wi=Bi(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Wi.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Bi(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Wi:null};Wi.range;var Fi=6e4,Vi=6048e5,Hi=Bi(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Yi=(Hi.range,Bi(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Fi)},function(t,e){return(e-t)/Fi},function(t){return t.getMinutes()})),Ki=(Yi.range,Bi(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Fi)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),Ji=(Ki.range,Bi(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fi)/864e5},function(t){return t.getDate()-1})),Xi=Ji;Ji.range;function Zi(t){return Bi(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fi)/Vi})}var Gi=Zi(0),Qi=Zi(1),to=Zi(2),eo=Zi(3),no=Zi(4),ro=Zi(5),io=Zi(6),oo=(Gi.range,Qi.range,to.range,eo.range,no.range,ro.range,io.range,Bi(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),ao=(oo.range,Bi(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));ao.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Bi(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var so=ao,co=(ao.range,Bi(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Fi)},function(t,e){return(e-t)/Fi},function(t){return t.getUTCMinutes()})),uo=(co.range,Bi(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),fo=(uo.range,Bi(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),lo=fo;fo.range;function ho(t){return Bi(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Vi})}var po=ho(0),mo=ho(1),yo=ho(2),vo=ho(3),_o=ho(4),bo=ho(5),go=ho(6),xo=(po.range,mo.range,yo.range,vo.range,_o.range,bo.range,go.range,Bi(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),wo=(xo.range,Bi(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));wo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Bi(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ko=wo;wo.range;function So(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Oo(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mo(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var jo,Eo,Io,To={"-":"",_:" ",0:"0"},Co=/^\s*\d+/,Ao=/^%/,zo=/[\\^$*+?|[\]().{}]/g;function No(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Do(t){return t.replace(zo,"\\$&")}function Lo(t){return new RegExp("^(?:"+t.map(Do).join("|")+")","i")}function Po(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Ro(t,e,n){var r=Co.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $o(t,e,n){var r=Co.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Uo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function qo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Bo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Wo(t,e,n){var r=Co.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Fo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Vo(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ho(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ko(t,e,n){var r=Co.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Jo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Xo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Zo(t,e,n){var r=Co.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Go(t,e,n){var r=Co.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Qo(t,e,n){var r=Co.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ta(t,e,n){var r=Ao.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ea(t,e,n){var r=Co.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function na(t,e,n){var r=Co.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function ra(t,e){return No(t.getDate(),e,2)}function ia(t,e){return No(t.getHours(),e,2)}function oa(t,e){return No(t.getHours()%12||12,e,2)}function aa(t,e){return No(1+Xi.count(so(t),t),e,3)}function sa(t,e){return No(t.getMilliseconds(),e,3)}function ca(t,e){return sa(t,e)+"000"}function ua(t,e){return No(t.getMonth()+1,e,2)}function fa(t,e){return No(t.getMinutes(),e,2)}function la(t,e){return No(t.getSeconds(),e,2)}function ha(t){var e=t.getDay();return 0===e?7:e}function da(t,e){return No(Gi.count(so(t),t),e,2)}function pa(t,e){var n=t.getDay();return t=n>=4||0===n?no(t):no.ceil(t),No(no.count(so(t),t)+(4===so(t).getDay()),e,2)}function ma(t){return t.getDay()}function ya(t,e){return No(Qi.count(so(t),t),e,2)}function va(t,e){return No(t.getFullYear()%100,e,2)}function _a(t,e){return No(t.getFullYear()%1e4,e,4)}function ba(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+No(e/60|0,"0",2)+No(e%60,"0",2)}function ga(t,e){return No(t.getUTCDate(),e,2)}function xa(t,e){return No(t.getUTCHours(),e,2)}function wa(t,e){return No(t.getUTCHours()%12||12,e,2)}function ka(t,e){return No(1+lo.count(ko(t),t),e,3)}function Sa(t,e){return No(t.getUTCMilliseconds(),e,3)}function Oa(t,e){return Sa(t,e)+"000"}function Ma(t,e){return No(t.getUTCMonth()+1,e,2)}function ja(t,e){return No(t.getUTCMinutes(),e,2)}function Ea(t,e){return No(t.getUTCSeconds(),e,2)}function Ia(t){var e=t.getUTCDay();return 0===e?7:e}function Ta(t,e){return No(po.count(ko(t),t),e,2)}function Ca(t,e){var n=t.getUTCDay();return t=n>=4||0===n?_o(t):_o.ceil(t),No(_o.count(ko(t),t)+(4===ko(t).getUTCDay()),e,2)}function Aa(t){return t.getUTCDay()}function za(t,e){return No(mo.count(ko(t),t),e,2)}function Na(t,e){return No(t.getUTCFullYear()%100,e,2)}function Da(t,e){return No(t.getUTCFullYear()%1e4,e,4)}function La(){return"+0000"}function Pa(){return"%"}function Ra(t){return+t}function $a(t){return Math.floor(+t/1e3)}!function(t){jo=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=Lo(i),f=Po(i),l=Lo(o),h=Po(o),d=Lo(a),p=Po(a),m=Lo(s),y=Po(s),v=Lo(c),_=Po(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ra,e:ra,f:ca,H:ia,I:oa,j:aa,L:sa,m:ua,M:fa,p:function(t){return i[+(t.getHours()>=12)]},Q:Ra,s:$a,S:la,u:ha,U:da,V:pa,w:ma,W:ya,x:null,X:null,y:va,Y:_a,Z:ba,"%":Pa},g={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:ga,e:ga,f:Oa,H:xa,I:wa,j:ka,L:Sa,m:Ma,M:ja,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:Ra,s:$a,S:Ea,u:Ia,U:Ta,V:Ca,w:Aa,W:za,x:null,X:null,y:Na,Y:Da,Z:La,"%":Pa},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=_[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Yo,e:Yo,f:Qo,H:Jo,I:Jo,j:Ko,L:Go,m:Ho,M:Xo,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=f[r[0].toLowerCase()],n+r[0].length):-1},Q:ea,s:na,S:Zo,u:$o,U:Uo,V:qo,w:Ro,W:Bo,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:Fo,Y:Wo,Z:Vo,"%":ta};function w(t,e){return function(n){var r,i,o,a=[],s=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(c,s)),null!=(i=To[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),c=s+1);return a.push(t.slice(c,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=Mo(1900);if(S(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Oo(Mo(o.y))).getUTCDay(),r=i>4||0===i?mo.ceil(r):mo(r),r=lo.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=e(Mo(o.y))).getDay(),r=i>4||0===i?Qi.ceil(r):Qi(r),r=Xi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Oo(Mo(o.y)).getUTCDay():e(Mo(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Oo(o)):e(o)}}function S(t,e,n,r){for(var i,o,a=0,s=e.length,c=n.length;a<s;){if(r>=c)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in To?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),g.x=w(n,g),g.X=w(r,g),g.c=w(e,g),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",So);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",g);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Oo);return e.toString=function(){return t},e}}}(t),jo.format,jo.parse,Eo=jo.utcFormat,Io=jo.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Eo("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Io("%Y-%m-%dT%H:%M:%S.%LZ");var Ua=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},qa=(Ua("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ua("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ua("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ua("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ua("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ua("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ua("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ua("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ua("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),function(t){return le(t[t.length-1])});qa(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ua)),qa(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ua)),qa(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ua)),qa(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ua)),qa(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ua)),qa(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ua)),qa(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ua)),qa(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ua)),qa(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ua)),qa(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ua)),qa(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ua)),qa(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ua)),qa(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ua)),qa(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ua)),qa(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ua)),qa(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ua)),qa(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ua)),qa(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ua)),qa(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ua)),qa(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ua)),qa(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ua)),qa(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ua)),qa(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ua)),qa(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ua)),qa(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ua)),qa(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ua)),qa(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ua)),ze(ee(300,.5,0),ee(-240,.5,1)),ze(ee(-100,.75,.35),ee(80,1.5,.8)),ze(ee(260,.75,.35),ee(80,1.5,.8)),ee(),kt(),Math.PI,Math.PI;function Ba(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Ba(Ua("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ba(Ua("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ba(Ua("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ba(Ua("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt;var Wa=1e-12,Fa=Math.PI,Va=2*Fa;function Ha(t){this._context=t}Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ya=function(t){return new Ha(t)};Ja(Ya);function Ka(t){this._curve=t}function Ja(t){function e(e){return new Ka(t(e))}return e._curve=t,e}Ka.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};Array.prototype.slice;Math.sqrt(1/3);var Xa=Math.sin(Fa/10)/Math.sin(7*Fa/10),Za=(Math.sin(Va/10),Math.cos(Va/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function Ga(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Qa(t){this._context=t}Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ga(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ga(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ts(t){this._context=t}ts.prototype={areaStart:Za,areaEnd:Za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ga(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function es(t){this._context=t}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ga(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ns(t,e){this._basis=new Qa(t),this._beta=e}ns.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*e[c]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new Qa(t):new ns(t,e)}return n.beta=function(e){return t(+e)},n})(.85);function rs(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function is(t,e){this._context=t,this._k=(1-e)/6}is.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rs(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:rs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new is(t,e)}return n.tension=function(e){return t(+e)},n})(0);function os(t,e){this._context=t,this._k=(1-e)/6}os.prototype={areaStart:Za,areaEnd:Za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new os(t,e)}return n.tension=function(e){return t(+e)},n})(0);function as(t,e){this._context=t,this._k=(1-e)/6}as.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new as(t,e)}return n.tension=function(e){return t(+e)},n})(0);function ss(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Wa){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Wa){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function cs(t,e){this._context=t,this._alpha=e}cs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new cs(t,e):new is(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function us(t,e){this._context=t,this._alpha=e}us.prototype={areaStart:Za,areaEnd:Za,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new us(t,e):new os(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function fs(t,e){this._context=t,this._alpha=e}fs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new fs(t,e):new as(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function ls(t){this._context=t}ls.prototype={areaStart:Za,areaEnd:Za,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function hs(t){return t<0?-1:1}function ds(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(hs(o)+hs(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function ps(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ms(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function ys(t){this._context=t}function vs(t){this._context=new _s(t)}function _s(t){this._context=t}function bs(t){this._context=t}function gs(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ms(this,this._t0,ps(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ms(this,ps(this,n=ds(this,t,e)),n);break;default:ms(this,this._t0,n=ds(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(vs.prototype=Object.create(ys.prototype)).point=function(t,e){ys.prototype.point.call(this,e,t)},_s.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=gs(t),i=gs(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xs(t,e){this._context=t,this._t=e}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};function ws(){this._=null}function ks(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ss(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Os(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ms(t){for(;t.L;)t=t.L;return t}ws.prototype={constructor:ws,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ms(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ss(this,n),n=(t=n).U),n.C=!1,r.C=!0,Os(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Os(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ss(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ms(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ss(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Os(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ss(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Os(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ss(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Os(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var js=ws;function Es(t,e,n,r){var i=[null,null],o=Gs.push(i)-1;return i.left=t,i.right=e,n&&Ts(i,t,e,n),r&&Ts(i,e,t,r),Xs[t.index].halfedges.push(o),Xs[e.index].halfedges.push(o),i}function Is(t,e,n){var r=[e,n];return r.left=t,r}function Ts(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Cs(t,e,n,r,i){var o,a=t[0],s=t[1],c=a[0],u=a[1],f=0,l=1,h=s[0]-c,d=s[1]-u;if(o=e-c,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>f&&(f=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<l&&(l=o)}if(o=n-u,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>f&&(f=o)}if(o=i-u,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<l&&(l=o)}return!(f>0||l<1)||(f>0&&(t[0]=[c+f*h,u+f*d]),l<1&&(t[1]=[c+l*h,u+l*d]),!0)}}}}}function As(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,c=t[0],u=t.left,f=t.right,l=u[0],h=u[1],d=f[0],p=f[1],m=(l+d)/2,y=(h+p)/2;if(p===h){if(m<e||m>=r)return;if(l>d){if(c){if(c[1]>=i)return}else c=[m,n];o=[m,i]}else{if(c){if(c[1]<n)return}else c=[m,i];o=[m,n]}}else if(s=y-(a=(l-d)/(p-h))*m,a<-1||a>1)if(l>d){if(c){if(c[1]>=i)return}else c=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(c){if(c[1]<n)return}else c=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<p){if(c){if(c[0]>=r)return}else c=[e,a*e+s];o=[r,a*r+s]}else{if(c){if(c[0]<e)return}else c=[r,a*r+s];o=[e,a*e+s]}return t[0]=c,t[1]=o,!0}function zs(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ns(t,e){return e[+(e.left!==t.site)]}function Ds(t,e){return e[+(e.left===t.site)]}var Ls,Ps=[];function Rs(){ks(this),this.x=this.y=this.arc=this.site=this.cy=null}function $s(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],c=r[0]-a,u=r[1]-s,f=o[0]-a,l=o[1]-s,h=2*(c*l-u*f);if(!(h>=-tc)){var d=c*c+u*u,p=f*f+l*l,m=(l*d-u*p)/h,y=(c*p-f*d)/h,v=Ps.pop()||new Rs;v.arc=t,v.site=i,v.x=m+a,v.y=(v.cy=y+s)+Math.sqrt(m*m+y*y),t.circle=v;for(var _=null,b=Zs._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){_=b.P;break}b=b.L}else{if(!b.R){_=b;break}b=b.R}Zs.insert(_,v),_||(Ls=v)}}}}function Us(t){var e=t.circle;e&&(e.P||(Ls=e.N),Zs.remove(e),Ps.push(e),ks(e),t.circle=null)}var qs=[];function Bs(){ks(this),this.edge=this.site=this.circle=null}function Ws(t){var e=qs.pop()||new Bs;return e.site=t,e}function Fs(t){Us(t),Js.remove(t),qs.push(t),ks(t)}function Vs(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Fs(t);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<Qs&&Math.abs(r-c.circle.cy)<Qs;)o=c.P,s.unshift(c),Fs(c),c=o;s.unshift(c),Us(c);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Qs&&Math.abs(r-u.circle.cy)<Qs;)a=u.N,s.push(u),Fs(u),u=a;s.push(u),Us(u);var f,l=s.length;for(f=1;f<l;++f)u=s[f],c=s[f-1],Ts(u.edge,c.site,u.site,i);c=s[0],(u=s[l-1]).edge=Es(c.site,u.site,null,i),$s(c),$s(u)}function Hs(t){for(var e,n,r,i,o=t[0],a=t[1],s=Js._;s;)if((r=Ys(s,a)-o)>Qs)s=s.L;else{if(!((i=o-Ks(s,a))>Qs)){r>-Qs?(e=s.P,n=s):i>-Qs?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Xs[t.index]={site:t,halfedges:[]}}(t);var c=Ws(t);if(Js.insert(e,c),e||n){if(e===n)return Us(e),n=Ws(e.site),Js.insert(c,n),c.edge=n.edge=Es(e.site,c.site),$s(e),void $s(n);if(n){Us(e),Us(n);var u=e.site,f=u[0],l=u[1],h=t[0]-f,d=t[1]-l,p=n.site,m=p[0]-f,y=p[1]-l,v=2*(h*y-d*m),_=h*h+d*d,b=m*m+y*y,g=[(y*_-d*b)/v+f,(h*b-m*_)/v+l];Ts(n.edge,u,p,g),c.edge=Es(u,t,null,g),n.edge=Es(t,p,null,g),$s(e),$s(n)}else c.edge=Es(e.site,c.site)}}function Ys(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],c=n[1],u=c-e;if(!u)return s;var f=s-r,l=1/o-1/u,h=f/u;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*u)-c+u/2+i-o/2)))/l+r:(r+s)/2}function Ks(t,e){var n=t.N;if(n)return Ys(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Js,Xs,Zs,Gs,Qs=1e-6,tc=1e-12;function ec(t,e){return e[1]-t[1]||e[0]-t[0]}function nc(t,e){var n,r,i,o=t.sort(ec).pop();for(Gs=[],Xs=new Array(t.length),Js=new js,Zs=new js;;)if(i=Ls,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Hs(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Vs(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Xs.length;i<o;++i)if((t=Xs[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=zs(t,Gs[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],c=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=Gs.length;o--;)As(i=Gs[o],t,e,n,r)&&Cs(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Qs||Math.abs(i[0][1]-i[1][1])>Qs)||delete Gs[o]}(a,s,c,u),function(t,e,n,r){var i,o,a,s,c,u,f,l,h,d,p,m,y=Xs.length,v=!0;for(i=0;i<y;++i)if(o=Xs[i]){for(a=o.site,s=(c=o.halfedges).length;s--;)Gs[c[s]]||c.splice(s,1);for(s=0,u=c.length;s<u;)p=(d=Ds(o,Gs[c[s]]))[0],m=d[1],l=(f=Ns(o,Gs[c[++s%u]]))[0],h=f[1],(Math.abs(p-l)>Qs||Math.abs(m-h)>Qs)&&(c.splice(s,0,Gs.push(Is(a,d,Math.abs(p-t)<Qs&&r-m>Qs?[t,Math.abs(l-t)<Qs?h:r]:Math.abs(m-r)<Qs&&n-p>Qs?[Math.abs(h-r)<Qs?l:n,r]:Math.abs(p-n)<Qs&&m-e>Qs?[n,Math.abs(l-n)<Qs?h:e]:Math.abs(m-e)<Qs&&p-t>Qs?[Math.abs(h-e)<Qs?l:t,e]:null))-1),++u);u&&(v=!1)}if(v){var _,b,g,x=1/0;for(i=0,v=null;i<y;++i)(o=Xs[i])&&(g=(_=(a=o.site)[0]-t)*_+(b=a[1]-e)*b)<x&&(x=g,v=o);if(v){var w=[t,e],k=[t,r],S=[n,r],O=[n,e];v.halfedges.push(Gs.push(Is(a=v.site,w,k))-1,Gs.push(Is(a,k,S))-1,Gs.push(Is(a,S,O))-1,Gs.push(Is(a,O,w))-1)}}for(i=0;i<y;++i)(o=Xs[i])&&(o.halfedges.length||delete Xs[i])}(a,s,c,u)}this.edges=Gs,this.cells=Xs,Js=Zs=Gs=Xs=null}nc.prototype={constructor:nc,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Ns(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,c,u,f=n.site,l=-1,h=e[i[o-1]],d=h.left===f?h.right:h.left;++l<o;)a=d,d=(h=e[i[l]]).left===f?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(c=a,u=d,((s=f)[0]-u[0])*(c[1]-s[1])-(s[0]-c[0])*(u[1]-s[1])<0)&&t.push([f.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var c=t-i.site[0],u=e-i.site[1],f=c*c+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var c=t-s[0],u=e-s[1],l=c*c+u*u;l<f&&(f=l,a=s.index)}})}while(null!==a);return o._found=r,null==n||f<=n*n?i.site:null}};var rc=n(14);n.d(e,"a",function(){return ge}),n.d(e,"b",function(){return Ie}),n.d(e,"c",function(){return rc.identity})},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(2),i=n(1);const o=Object(r.Record)({label:"",show:!0,tags:Object(r.Set)(),dx:0,dy:0,fontSize:20});class a extends o{static fromJS(t){return new a(t).update("tags",r.Set)}showLabel(){return this.label.length>0&&this.show}renderLabel(t,e,n){if(this.label&&this.show){const n=this.label.split("\\n");return Object(i.a)("g",{key:"label",attrs:{transform:`translate(${t+this.dx}, ${e+this.dy+this.fontSize})`,"font-size":this.fontSize}},n.map((t,e)=>Object(i.a)("text",{key:e,attrs:{dy:e*this.fontSize*1.2}},t)))}return null}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,u=0,f=[],l=n(59);function h(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(_(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(_(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertAt.before,n);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function _(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=c||(c=y(e)),r=x.bind(null,n,a,!1),i=x.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=l(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return h(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}t&&h(d(t,e),e);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var b,g=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function x(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"createElementWithModules",function(){return y}),n.d(e,"createElement",function(){return v});var r=n(35),i=n.n(r),o=function(t){return void 0===t},a=function(t){return function(t){return"string"==typeof t}(t)||function(t){return"number"==typeof t}(t)},s={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},c=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return i.a.apply(void 0,[!0].concat(t))},u=function(t,e,n){for(var r,i=n,o=0;o<t.length;o++){var a=t[o];r=a,i=Array.isArray(r)?u(a,e,i):e(i,a)}return i},f=function(t,e){return Object.keys(t).map(function(n){return e(n,t[n])}).reduce(function(t,e){return c(t,e)},{})},l=function(t,e){return f(e,function(e,n){return e!==t?((r={})[e]=n,r):{};var r})},h=function(t){return t.sel in s?function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return i.a.apply(void 0,[!1].concat(t))}(t,{data:l("props",c(t.data,{ns:"http://www.w3.org/2000/svg",attrs:l("className",c(t.data.props,{class:t.data.props?t.data.props.className:void 0}))}))},{children:o(t.children)?void 0:t.children.map(function(t){return h(t)})}):t},d={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},p=function(t,e){return h(function(t,e){return f(t,function(t,n){var r,i={};if(i[t]=n,d[t]&&void 0!==e[d[t]])return(r={})[d[t]]=i,r;if(null===d[t])return{};for(var o,a=Object.keys(d),s=0;s<a.length;s++){var c,u=a[s];if("*"===u.charAt(u.length-1)&&0===t.indexOf(u.slice(0,-1))&&void 0!==e[d[u]])return(c={})[d[u]]=i,c}return void 0!==e[t]?((o={})[e[t]?e[t]:t]=n,o):void 0!==e.props?{props:i}:i})}(function(t,e){return f(t,function(t,n){var r,i=t.indexOf("-");if(i>-1&&void 0!==e[t.slice(0,i)]){var o,a={};return a[t.slice(i+1)]=n,(o={})[t.slice(0,i)]=a,o}return(r={})[t]=n,r})}(t,e),e))},m=function(t){return u(t,function(t,e){var n,r,i=function(t){return"object"==typeof t&&null!==t}(r=e)&&"sel"in r&&"data"in r&&"children"in r&&"text"in r?e:a(n=e)?{text:n,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0;return t.push(i),t},[])},y=function(t){return function(e,n){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];if("function"==typeof e)return e(n||{},r);var o=function(t){return t.length>1||!a(t[0])?void 0:t[0]}(r);return h({sel:e,data:n?p(n,t):{},children:o?void 0:m(r),text:o,elm:void 0,key:n?n.key:void 0})}},v=y({attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""}),_={createElement:v,createElementWithModules:y};e.default=_},function(t,e,n){"use strict";(function(t){var n,r=("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:Function("return this")()).Symbol;n="function"==typeof r?r("parent"):"@@snabbdom-selector-parent",e.a=n}).call(this,n(19))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return s}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return h});var r=n(1),i=n(0),o=n.n(i),a=n(9);const s=({x:t,y:e,k:n,style:i,dataset:o,attrs:s})=>Object(r.a)("circle",{attrs:Object.assign({cx:t,cy:e,r:a.a/n,"fill-opacity":.5,stroke:"black","stroke-width":2/n},s),style:i,dataset:o}),c=({x:t,y:e,k:n})=>Object(r.a)("g",{attrs:{transform:`translate(${t-a.b/n/2}, ${e-a.b/n/2})`}},[Object(r.a)("line",{attrs:{x1:0,y1:0,x2:a.b/n,y2:a.b/n,stroke:"black","stroke-width":2/n}}),Object(r.a)("line",{attrs:{x1:a.b/n,y1:0,x2:0,y2:a.b/n,stroke:"black","stroke-width":2/n}})]),u=({x:t,y:e,k:n})=>Object(r.a)("rect",{attrs:{x:t-a.b/n/2,y:e-a.b/n/2,width:a.b/n,height:a.b/n,stroke:"#666666","stroke-width":2/n,fill:"white"}}),f=({k:t,x1:e,y1:n,x2:i,y2:o})=>Object(r.a)("line",{attrs:{stroke:"#aaaaaa","stroke-width":2/t,"stroke-dasharray":`${8/t},${5/t}`,x1:e,y1:n,x2:i,y2:o}}),l=({k:e,bbox:{x:n,y:r,width:i,height:o}})=>t.createElement("g",{className:"bbox-indicator"},t.createElement(f,{k:e,x1:n,y1:r,x2:n+i,y2:r}),t.createElement(f,{k:e,x1:n+i,y1:r,x2:n+i,y2:r+o}),t.createElement(f,{k:e,x1:n+i,y1:r+o,x2:n,y2:r+o}),t.createElement(f,{k:e,x1:n,y1:r+o,x2:n,y2:r}));function h({mouse:e,state:n}){const r=n.map(t=>({bbox:t.getBBox(),Shape:t.sitem()?t.sitem().locked?c:u:null})),i=o.a.combine(r,n).map(([{bbox:t,Shape:e},n])=>{if(null==t)return null;const{x:r,y:i}=t,o=n.transform.k;return{k:o,x0:r-a.b/2/o,y0:i-a.b/2/o,bbox:t,size:a.b/o,showShape:"bbox"===n.selMode,Shape:e}}),s=o.a.combine(i,e.move$).map(([t,{x:e,y:n}])=>{if(t){const{Shape:r,showShape:i,x0:o,y0:a,bbox:{width:s,height:c},size:f}=t;if(r===u&&i){const t=o<=e&&e<=o+f,r=o+s/2<=e&&e<=o+s/2+f,i=o+s<=e&&e<=o+s+f,u=a<=n&&n<=a+f,l=a+c/2<=n&&n<=a+c/2+f,h=a+c<=n&&n<=a+c+f;return u&&t?"nw-resize":u&&r?"n-resize":u&&i?"ne-resize":l&&t?"w-resize":l&&i?"e-resize":h&&t?"sw-resize":h&&r?"s-resize":h&&i?"se-resize":null}}return null}).whenNot(e.pressing$);return{DOM:i.map(e=>{if(null==e)return null;const{k:n,bbox:r,Shape:i,showShape:o}=e,{x:a,y:s,width:c,height:u}=r;return t.createElement("g",{className:"selection-indicator"},t.createElement(l,{bbox:r,k:n}),o?t.createElement("g",{className:"resizer"},t.createElement(i,{k:n,x:a,y:s}),t.createElement(i,{k:n,x:a+c/2,y:s}),t.createElement(i,{k:n,x:a+c,y:s}),t.createElement(i,{k:n,x:a,y:s+u/2}),t.createElement(i,{k:n,x:a+c,y:s+u/2}),t.createElement(i,{k:n,x:a,y:s+u}),t.createElement(i,{k:n,x:a+c/2,y:s+u}),t.createElement(i,{k:n,x:a+c,y:s+u})):t.createElement("g",null))}),nextResizer:s}}}).call(this,n(20))},function(t,e,n){"use strict";function r(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=r,e.default=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{prepare(t){return t}getMessage(){return this.constructor.name}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(15),i=n(2),o=n(3);const a=Object(i.Record)({transform:r.c,items:Object(i.Map)(),zlist:Object(i.List)(),selMode:"bbox",selIdSet:Object(i.OrderedSet)()});class s extends a{sitem(){return this.items.find(t=>this.selIdSet.has(t.id))||null}vertices(){const t=this.sitem();return"vertices"!==this.selMode||null==t?Object(i.List)():t.getVertices()}sitems(){return this.items.filter(t=>this.selIdSet.has(t.id))}getBBox(){const t=this.sitems().toList().flatMap(t=>t.getVertices());return Object(o.d)(t)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(1),i=n(2),o=n(50),a=n(28),s=n(3),c=n(16);const u=Object(i.Record)({id:-1,locked:!1,sem:new c.a,opacity:1,x:0,y:0,width:0,height:0,naturalWidth:0,naturalHeight:0,url:""},"ImgItem");class f extends u{static fromImgFileStat({file:t,naturalHeight:e,naturalWidth:n,url:r}){return new f({naturalWidth:n,naturalHeight:e,width:n,height:e,url:r})}static fromJS(t){return new f(t).update("sem",c.a.fromJS)}toJS(){return null}render(){return Object(r.a)("image",{key:this.id,attrs:{x:this.x,y:this.y,href:this.url,width:this.width,height:this.height,opacity:this.opacity}})}resize(t,{h:e,v:n},r,i){if(this.locked)return this;const a=this.getVertices(),c=this.height/this.width,u=e?Object(s.e)(t.x,r.x,i.x):o.a,f=n?Object(s.e)(t.y,r.y,i.y):o.a,l=a.map(t=>({x:u(t.x),y:f(t.y)})),h=l.map(t=>t.x).min(),d=l.map(t=>t.y).min(),p=l.map(t=>t.x).max()-h,m=l.map(t=>t.y).max()-d;return this.set("x",h).set("y",d).set("width",Math.max(p,m/c)).set("height",Math.max(m,p*c))}move(t,e){return this.locked?this:this.update("x",Object(a.a)(t)).update("y",Object(a.a)(e))}getVertices(){return Object(i.List)([{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}])}containsPoint(t){return Object(s.a)(this.getVertices().toArray(),t)}supportEditVertex(){return!1}getShortDescription(){return"ImgItem"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i={},o=function(){function t(t,e){this.i=t,this.p=e,e.ils[t]=this}return t.prototype._n=function(t){var e=this.p;e.out!==i&&e.up(t,this.i)},t.prototype._e=function(t){this.p._e(t)},t.prototype._c=function(){this.p.down(this.i,this)},t}();e.SampleCombineListener=o;var a,s=function(){function t(t,e){this.type="sampleCombine",this.ins=t,this.others=e,this.out=i,this.ils=[],this.Nn=0,this.vals=[]}return t.prototype._start=function(t){this.out=t;for(var e=this.others,n=this.Nn=e.length,r=this.vals=new Array(n),a=0;a<n;a++)r[a]=i,e[a]._add(new o(a,this));this.ins._add(this)},t.prototype._stop=function(){var t=this.others,e=t.length,n=this.ils;this.ins._remove(this);for(var r=0;r<e;r++)t[r]._remove(n[r]);this.out=i,this.vals=[],this.ils=[]},t.prototype._n=function(t){var e=this.out;e!==i&&(this.Nn>0||e._n([t].concat(this.vals)))},t.prototype._e=function(t){var e=this.out;e!==i&&e._e(t)},t.prototype._c=function(){var t=this.out;t!==i&&t._c()},t.prototype.up=function(t,e){var n=this.vals[e];this.Nn>0&&n===i&&this.Nn--,this.vals[e]=t},t.prototype.down=function(t,e){this.others[t]._remove(e)},t}();e.SampleCombineOperator=s,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return new r.Stream(new s(e,t))}},e.default=a},function(t,e,n){"use strict";var r=n(8),i=Object(r.a)(function(t,e){return Number(t)+Number(e)});e.a=i},function(t,e,n){"use strict";function r(t,e){var n,r,i=e.elm,o=t.data.class,a=e.data.class;if((o||a)&&o!==a){for(r in a=a||{},o=o||{})a[r]||i.classList.remove(r);for(r in a)(n=a[r])!==o[r]&&i.classList[n?"add":"remove"](r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:r,update:r},e.default=e.classModule},function(t,e,n){"use strict";function r(t,e){var n,r,i=e.elm,o=t.data.props,a=e.data.props;if((o||a)&&o!==a){for(n in a=a||{},o=o||{})a[n]||delete i[n];for(n in a)r=a[n],o[n]===r||"value"===n&&i[n]===r||(i[n]=r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:r,update:r},e.default=e.propsModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="http://www.w3.org/1999/xlink",i="http://www.w3.org/XML/1998/namespace",o=58,a=120;function s(t,e){var n,s=e.elm,c=t.data.attrs,u=e.data.attrs;if((c||u)&&c!==u){for(n in c=c||{},u=u||{}){var f=u[n];c[n]!==f&&(!0===f?s.setAttribute(n,""):!1===f?s.removeAttribute(n):n.charCodeAt(0)!==a?s.setAttribute(n,f):n.charCodeAt(3)===o?s.setAttributeNS(i,n,f):n.charCodeAt(5)===o?s.setAttributeNS(r,n,f):s.setAttribute(n,f))}for(n in c)n in u||s.removeAttribute(n)}}e.attributesModule={create:s,update:s},e.default=e.attributesModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,i=function(t){r(function(){r(t)})},o=!1;function a(t,e,n){i(function(){t[e]=n})}function s(t,e){var n,r,i=e.elm,o=t.data.style,s=e.data.style;if((o||s)&&o!==s){s=s||{};var c="delayed"in(o=o||{});for(r in o)s[r]||("-"===r[0]&&"-"===r[1]?i.style.removeProperty(r):i.style[r]="");for(r in s)if(n=s[r],"delayed"===r&&s.delayed)for(var u in s.delayed)n=s.delayed[u],c&&n===o.delayed[u]||a(i.style,u,n);else"remove"!==r&&n!==o[r]&&("-"===r[0]&&"-"===r[1]?i.style.setProperty(r,n):i.style[r]=n)}}e.styleModule={pre:function(){o=!1},create:s,update:s,destroy:function(t){var e,n,r=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)r.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){o||(getComputedStyle(document.body).transform,o=!0);var r,i=t.elm,a=0,s=n.remove,c=0,u=[];for(r in s)u.push(r),i.style[r]=s[r];for(var f=getComputedStyle(i)["transition-property"].split(", ");a<f.length;++a)-1!==u.indexOf(f[a])&&c++;i.addEventListener("transitionend",function(t){t.target===i&&--c,0===c&&e()})}else e()}},e.default=e.styleModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/[A-Z]/g;function i(t,e){var n,i=e.elm,o=t.data.dataset,a=e.data.dataset;if((o||a)&&o!==a){o=o||{},a=a||{};var s=i.dataset;for(n in o)a[n]||(s?n in s&&delete s[n]:i.removeAttribute("data-"+n.replace(r,"-$&").toLowerCase()));for(n in a)o[n]!==a[n]&&(s?s[n]=a[n]:i.setAttribute("data-"+n.replace(r,"-$&").toLowerCase(),a[n]))}}e.datasetModule={create:i,update:i},e.default=e.datasetModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=n(54);function o(t,e){var n,a=void 0!==e?e:i.default;if(a.isElement(t)){var s,c=t.id?"#"+t.id:"",u=t.getAttribute("class"),f=u?"."+u.split(" ").join("."):"",l=a.tagName(t).toLowerCase()+c+f,h={},d=[],p=void 0,m=void 0,y=t.attributes,v=t.childNodes;for(p=0,m=y.length;p<m;p++)"id"!==(s=y[p].nodeName)&&"class"!==s&&(h[s]=y[p].nodeValue);for(p=0,m=v.length;p<m;p++)d.push(o(v[p],e));return r.default(l,{attrs:h},d,void 0,t)}return a.isText(t)?(n=a.getTextContent(t),r.default(void 0,void 0,void 0,n,t)):a.isComment(t)?(n=a.getTextContent(t),r.default("!",{},[],n,t)):r.default("",{},[],void 0,t)}e.toVNode=o,e.default=o},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},c=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)},u=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},f=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(a)return a(t,e).value}return t[e]};t.exports=function t(){var e,n,r,i,o,a,l=arguments[0],h=1,d=arguments.length,p=!1;for("boolean"==typeof l&&(p=l,l=arguments[1]||{},h=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});h<d;++h)if(null!=(e=arguments[h]))for(n in e)r=f(l,n),l!==(i=f(e,n))&&(p&&i&&(c(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&c(r)?r:{},u(l,{name:n,newValue:t(p,a,i)})):void 0!==i&&u(l,{name:n,newValue:i}));return l}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],f=!1,l=-1;function h(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!f){var t=s(h);f=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||f||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i={},o=function(){function t(t,e){this.ins=t,this.type="dropRepeats",this.out=null,this.v=i,this.isEq=e||function(t,e){return t===e}}return t.prototype._start=function(t){this.out=t,this.ins._add(this)},t.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=i},t.prototype._n=function(t){var e=this.out;if(e){var n=this.v;n!==i&&this.isEq(t,n)||(this.v=t,e._n(t))}},t.prototype._e=function(t){var e=this.out;e&&e._e(t)},t.prototype._c=function(){var t=this.out;t&&t._c()},t}();e.DropRepeatsOperator=o,e.default=function(t){return void 0===t&&(t=void 0),function(e){return new r.Stream(new o(e,t))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return t.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},t.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},t.prototype._n=function(t){var e=this.out;e&&e._n(t)},t.prototype._e=function(t){var e=this.out;e&&e._e(t)},t.prototype._c=function(){var t=this.out;if(t){var e=this.streams;e[this.i]._remove(this),++this.i<e.length?e[this.i]._add(this):t._c()}},t}();e.default=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new r.Stream(new i(t))}},function(t,e,n){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if("undefined"!=typeof MutationObserver){var e=document.createTextNode(""),r=[],i=0;return new MutationObserver(function(){for(;r.length;)r.shift()()}).observe(e,{characterData:!0}),function(t){r.push(t),e.data=i=1-i}}return void 0!==t?t:void 0!==n?n.nextTick:setTimeout}}).call(this,n(55).setImmediate,n(36))},function(t,e,n){"use strict";(function(t){function r(){var e;return(e="undefined"!=typeof window?window:void 0!==t?t:this).Cyclejs=e.Cyclejs||{},(e=e.Cyclejs).adaptStream=e.adaptStream||function(t){return t},e}function i(t){return r().adaptStream(t)}n.d(e,"a",function(){return i})}).call(this,n(19))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return l});var r=n(1),i=n(0),o=n.n(i),a=n(43),s=n(7);function c({styles:t}){const e={};return null!=t.fill?"none"===t.fill?e.border="1px solid black":e.background=t.fill:e.background="#888888",null!=t.stroke&&"none"!=t.stroke&&(e.border=`1px solid ${t.stroke}`),e}function u(e,n){const r=e.sitem();return t.createElement("div",{key:"tag-list",className:"tag-list-wrapper"},t.createElement("h2",{style:{"margin-left":"10px"}},"Tags",t.createElement("button",{className:"manage",disabled:!0},"Manage")),t.createElement("ul",{className:"tag-list"},n.semantics.tags.map((e,n)=>t.createElement("li",{key:e.name,className:"tag","data-tag":e.name},t.createElement("div",{className:"preview",style:c(e)}),t.createElement("p",{className:"name"},n+1," ",e.name),t.createElement(a.a,{name:e.name,checked:r.sem.tags.has(e.name)})))))}const f={Label(t){const e=t.sitem();return Object(s.b)({label:"Label",key:"semantic-label"},[Object(s.a)({field:"sem.label",label:"label",type:"string",value:e.sem.label})])},Position(t,e){const n=t.sitem();return Object(s.b)({label:"Position",key:"label-position"},[Object(s.a)({field:"sem.dx",label:"dx",type:"number",value:n.sem.dx}),Object(s.a)({field:"sem.dy",label:"dy",type:"number",value:n.sem.dy})])},FontSize(t,e){const n=t.sitem();return Object(s.b)({label:"Font Size",key:"font-size"},[Object(s.a)({field:"sem.fontSize",label:"font size",type:"number",value:n.sem.fontSize})])}};function l({state:t,config:e,DOM:n}){const i=n.select(".tag-list .checkbox").events("click").map(t=>({type:"toggle-semantic-tag",tagName:t.ownerTarget.dataset.name})),a=n.select(".field input").events("input").map(t=>{const e=t.ownerTarget;return{type:"edit",field:e.dataset.field,value:e.value}});return{DOM:o.a.combine(t,e).map(([t,e])=>{let n=[];return n=null==t.sitem()?[Object(r.a)("p.empty-prompt",{key:"empty-prompt"},"No Selected Items.")]:[f.Label(t),f.Position(t,e),f.FontSize(t,e),u(t,e)],Object(r.a)("div.tab.semantic-tab",n)}),intent:o.a.merge(a,i)}}}).call(this,n(20))},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(1);function i({width:t=16,height:e=16,name:n,checked:i}){return Object(r.a)("svg.checkbox",{attrs:{width:`${t}px`,height:`${e}px`,viewBox:"0 0 16 16"},dataset:{name:n}},[Object(r.a)("rect",{attrs:{fill:i?"#1881DC":"#cccccc",x:0,y:0,width:16,height:16,rx:"2px"}}),i?Object(r.a)("path",{attrs:{d:"M11.6915897,5.28979659 C11.280376,4.90340114 10.6146515,4.90340114 10.2044894,5.28979659 L6.66657903,8.61418101 L5.79472179,7.79593181 C5.38455977,7.40953636 4.71883525,7.40953636 4.30762152,7.79593181 C3.89745949,8.18133904 3.89745949,8.80688462 4.30762152,9.19328008 L5.92302889,10.7102034 C6.33319092,11.0965989 6.99891544,11.0965989 7.41012916,10.7102034 L11.6915897,6.68714486 C12.1028034,6.30173763 12.1028034,5.67619204 11.6915897,5.28979659",fill:"#ffffff"}}):null].filter(Boolean))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return f});var r=n(1),i=n(0),o=n.n(i),a=n(4);n(62);function s({active:t,category:e},n){return Object(r.a)("div.category",[Object(r.a)("div.title",{dataset:{category:e},class:{active:t}},e),Object(r.a)("ol.menu-item-list",{style:{display:t?"block":"none"}},n)])}function c({name:t,hint:e,intent:n,disabled:i}){return Object(r.a)("li.menu-item",{dataset:{intent:n},class:{disabled:i}},[Object(r.a)("p",t),Object(r.a)("p.hint",e||"")])}function u(){return Object(r.a)("hr.seprator")}function f({DOM:e,state:n,appHistory:r}){const i=o.a.create(),f=i.dropRepeats().startWith(null),l=e.select(".menubar").events("blur").mapTo(null),h=e.select(".menu-item").events("click").filter(t=>!t.ownerTarget.classList.contains("disabled")).mapTo(null),d=e.select(".category .title").events("click").map(t=>t.ownerTarget.dataset.category),p=e.select(".category .title").events("mouseover").when(f).map(t=>t.ownerTarget.dataset.category);i.imitate(o.a.merge(l,h,d.sampleCombine(f).map(([t,e])=>t===e?null:t),p));const m=e.select("*[data-intent]").events("click").filter(t=>!t.ownerTarget.classList.contains("disabled")).map(t=>t.ownerTarget.dataset.intent);return{DOM:o.a.combine(n,r,f).map(([{selIdSet:e},n,r])=>t.createElement("div",{className:"menubar",tabIndex:"1"},t.createElement(s,{category:"File",active:"File"===r},t.createElement(c,{name:"Save as JSON",intent:"save"}),t.createElement(c,{name:"Load JSON",intent:"load-data"}),t.createElement(c,{name:"Load Image",intent:"load-image"})),t.createElement(s,{category:"Edit",active:"Edit"===r},t.createElement(c,{name:"Undo",disabled:n.getLastAction()===a.f,hint:"Ctrl+Z",intent:"undo"}),t.createElement(c,{name:"Redo",disabled:n.getNextAction()===a.f,hint:"Ctrl+Y",intent:"redo"}),t.createElement(u,null),t.createElement(c,{name:"Delete Selection",disabled:e.isEmpty(),hint:"D",intent:"delete"}),t.createElement(c,{name:"Toggle Lock",disabled:e.isEmpty(),hint:"B",intent:"toggle-lock"}),t.createElement(c,{name:"Toggle Selection Mode",hint:"E",intent:"toggle-sel-mode"}),t.createElement(u,null),t.createElement(c,{name:"Add Rectangle",hint:"R",intent:"rect"}),t.createElement(c,{name:"Add Polygon",hint:"P",intent:"polygon"}),t.createElement(c,{name:"Add Line",hint:"L",intent:"line"})),t.createElement(s,{category:"View",active:"View"===r},t.createElement(c,{name:"Centralize Selection",intent:"zoom-to-sel",disabled:e.isEmpty(),hint:"Num 1"}),t.createElement(c,{name:"Fit",intent:"zoom-to-fit",hint:"Num 2"}),t.createElement(c,{name:"Reset Zoom",intent:"reset-zoom",hint:"Num 3"})),t.createElement(s,{category:"Help",active:"Help"===r},t.createElement(c,{name:"About",intent:"show-about"}),t.createElement(c,{name:"Shortcut",intent:"show-shortcut"})))),intent:m}}}).call(this,n(20))},function(t,e,n){"use strict";(function(t){function r({size:e=16,className:n=""}){return t.createElement("svg",{viewBox:"0 0 1024 1024",height:e+"px",className:n,fill:"currentcolor"},t.createElement("path",{d:"M974.991554 109.146486 647.781177 109.146486c0-2.225921 2.225921-4.451842 2.225921-6.677763 0-55.648023-46.74434-102.392363-102.392363-102.392363l-66.777628 0C422.963163-2.14956 378.444744 44.594779 378.444744 100.242803c0 2.225921 0 4.451842 2.225921 6.677763L49.008446 106.920565c-22.259209 0-40.066577 17.807367-40.066577 40.066577s17.807367 40.066577 40.066577 40.066577l77.907233 0 0 636.613387c0 111.296047 91.262758 200.332884 200.332884 200.332884l389.536163 0c111.296047 0 200.332884-91.262758 200.332884-200.332884L917.11761 189.27964l60.099865 0c22.259209 0 40.066577-17.807367 40.066577-40.066577S997.250763 109.146486 974.991554 109.146486zM458.577898 100.242803c0-11.129605 11.129605-22.259209 22.259209-22.259209l66.777628 0c11.129605 0 22.259209 11.129605 22.259209 22.259209 0 2.225921 0 4.451842 2.225921 6.677763l-113.521968 0C456.351977 106.920565 458.577898 102.468724 458.577898 100.242803zM836.984456 825.893026c0 66.777628-53.422102 120.19973-120.19973 120.19973L327.248563 946.092757c-66.777628 0-120.19973-53.422102-120.19973-120.19973L207.048832 189.27964l629.935624 0L836.984456 825.893026zM411.833558 756.889478c22.259209 0 40.066577-17.807367 40.066577-40.066577l0-311.62893c0-22.259209-17.807367-40.066577-40.066577-40.066577s-40.066577 17.807367-40.066577 40.066577l0 311.62893C371.766981 739.08211 389.574349 756.889478 411.833558 756.889478zM632.19973 756.889478c22.259209 0 40.066577-17.807367 40.066577-40.066577l0-311.62893c0-22.259209-17.807367-40.066577-40.066577-40.066577-22.259209 0-40.066577 17.807367-40.066577 40.066577l0 311.62893C592.133154 739.08211 609.940521 756.889478 632.19973 756.889478z"}))}n.d(e,"a",function(){return r})}).call(this,n(20))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});n(68);const r="https://longaspire.github.io/trips/";function i({overlayType:e,DOM:n}){return{DOM:e.map(e=>t.createElement("div",{className:"overlay"},t.createElement("div",{className:"content"+("about"===e?" show":"")},t.createElement("button",{className:"close"},"CLOSE"),t.createElement("h1",null,"Editor"),t.createElement("p",null,"A simple SVG editor which focuses on editing polygons/polylines and attaching semantic data to them. This simple editor is part of"," ",t.createElement("a",{href:r,target:"_blank"},"TRIPS"),"."),t.createElement("p",null,"If you're interested in this editor, you can view documentation on"," ",t.createElement("a",{href:"https://github.com/shinima/trips-editor",target:"_blank"},"GitHub"),". There is also"," ",t.createElement("a",{href:"https://zhuanlan.zhihu.com/p/34026505",target:"_blank"},"an article in Chinese")," ","describing undo/redo functionalities in this editor."),t.createElement("p",null,"Version: ","1.0.0"),t.createElement("p",null,"Date: ","Sun Mar 31 2019 01:35:07 GMT+0800 (GMT+08:00)"),t.createElement("p",null,"License: MIT")),t.createElement("div",{className:"content"+("shortcut"===e?" show":"")},t.createElement("button",{className:"close"},"CLOSE"),t.createElement("h1",null,"Shortcut"),t.createElement("div",{className:"shortcut-list"},t.createElement("p",null,t.createElement("b",null,"ESC")," Abort current interaction and return back to idle"),t.createElement("p",null,t.createElement("b",null,"S / G / H")," Switch among semantic tabs"),t.createElement("p",null,t.createElement("b",null,"Ctrl + C / Ctrl + V")," Copy and paste"),t.createElement("p",null,t.createElement("b",null,"Ctrl + Z / Ctrl + Y")," Undo and redo"),t.createElement("p",null,t.createElement("b",null,"L / R / P")," Start drawing line / rectangle / polygon"),t.createElement("p",null,t.createElement("b",null,"B")," Toggle lock"),t.createElement("p",null,t.createElement("b",null,"E")," Toggle selection mode"),t.createElement("p",null,t.createElement("b",null,"Num 1 / 2 / 3")," Zoom"))))),closeOverlay:n.select(".close").events("click")}}}).call(this,n(20))},function(t,e,n){t.exports=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e,n){this.node=t,this.eventType=e,this.useCapture=n,this.type="fromEvent"}return t.prototype._start=function(t){this.listener=function(e){return t._n(e)},this.node.addEventListener(this.eventType,this.listener,this.useCapture)},t.prototype._stop=function(){this.node.removeEventListener(this.eventType,this.listener,this.useCapture),this.listener=null},t}();e.DOMEventProducer=i;var o=function(){function t(t,e){this.node=t,this.eventName=e,this.type="fromEvent"}return t.prototype._start=function(t){this.listener=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length>1?t._n(e):t._n(e[0])},this.node.addListener(this.eventName,this.listener)},t.prototype._stop=function(){this.node.removeListener(this.eventName,this.listener),this.listener=null},t}();e.NodeEventProducer=o,e.default=function(t,e,n){return void 0===n&&(n=!1),function(t){return t.emit&&t.addListener}(t)?new r.Stream(new o(t,e)):new r.Stream(new i(t,e,n))}},function(t,e,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=o.URL||o.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):r(c.href)?e(t,n,a):i(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){i(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){i(a)})}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var f=o.URL||o.webkitURL,l=f.createObjectURL(t);i?i.location=l:location.href=l,i=null,setTimeout(function(){f.revokeObjectURL(l)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?r.apply(e,i):r)||(t.exports=o)}).call(this,n(19))},function(t,e,n){"use strict";var r=n(6);function i(t){return t}var o=Object(r.a)(i);e.a=o},function(t,e,n){"use strict";n.r(e),function(t,r){var i,o=n(37);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(o.a)(i);e.default=a}.call(this,n(19),n(52)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.htmlDomApi={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}},e.default=e.htmlDomApi},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(56),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(19))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,c=1,u={},f=!1,l=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,r(c),c++},h.clearImmediate=d}function d(t){delete u[t]}function p(t){if(f)setTimeout(p,0,t);else{var e=u[t];if(e){f=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(19),n(36))},function(t,e,n){var r=n(58);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){var r=n(61);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".inspector {\n  width: 440px;\n  background: #e7e7e7;\n  overflow-y: auto;\n}\n.inspector .tab-chooser {\n  display: flex;\n  background: #282c34;\n}\n.inspector .tab-chooser .tab-chooser-item {\n  background: inherit;\n  border: none;\n  cursor: pointer;\n  color: rgba(231,231,231,0.5);\n  font-size: 12px;\n  height: 32px;\n  line-height: 24px;\n  padding: 4px 16px;\n  text-transform: uppercase;\n  outline: none;\n}\n.inspector .tab-chooser .tab-chooser-item:hover,\n.inspector .tab-chooser .tab-chooser-item:active,\n.inspector .tab-chooser .tab-chooser-item.active {\n  color: #e7e7e7;\n}\n.inspector .tab-chooser .tab-chooser-item.active {\n  border-bottom: 2px solid #fff;\n}\n.inspector .empty-prompt {\n  font-size: 20px;\n  text-align: center;\n}\n.inspector .semantic-tab .tag-list-wrapper > p {\n  margin: 0;\n  font-size: 16px;\n  line-height: 40px;\n  padding-left: 8px;\n}\n.inspector .semantic-tab .tag-list-wrapper .manage {\n  margin-left: 8px;\n}\n.inspector .semantic-tab .tag-list {\n  list-style: none;\n  margin: 0;\n}\n.inspector .semantic-tab .tag-list .tag {\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n}\n.inspector .semantic-tab .tag-list .tag .preview {\n  width: 20px;\n  height: 20px;\n}\n.inspector .semantic-tab .tag-list .tag .name {\n  margin: 0;\n  line-height: 32px;\n  padding-left: 12px;\n  width: 150px;\n}\n.inspector .semantic-tab .label-wrapper {\n  margin-top: 8px;\n}\n.inspector .semantic-tab .label-wrapper > p {\n  margin: 0;\n  font-size: 16px;\n  line-height: 40px;\n  padding-left: 8px;\n}\n.inspector .semantic-tab .label-wrapper > p input {\n  margin-left: 8px;\n  font-size: 16px;\n}\n.inspector .row {\n  display: flex;\n  margin: 10px;\n  overflow-x: hidden;\n}\n.inspector .row > h2 {\n  width: 130px;\n}\n.inspector .row .field {\n  display: flex;\n  flex-flow: column;\n}\n.inspector .row .field input {\n  height: 30px;\n}\n.inspector .row .field input[type=color] {\n  width: 70px;\n}\n.inspector .row .btn {\n  align-self: center;\n  width: 70px;\n  height: 30px;\n}\n.inspector .row .btn.z {\n  width: auto;\n  height: auto;\n}\n.inspector .history-tab .button-group {\n  margin: 20px;\n}\n.inspector .history-tab .button-group > button {\n  margin-right: 16px;\n}\n.inspector .history-tab .action-item {\n  height: 20px;\n  line-height: 20px;\n}\n",""])},function(t,e,n){var r=n(63);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".menubar {\n  flex-shrink: 0;\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  height: 22px;\n  padding: 0 10px;\n  background: #21252b;\n  outline: none;\n  z-index: 1;\n}\n.menubar .category {\n  position: relative;\n  line-height: 22px;\n}\n.menubar .category .title {\n  padding: 0 8px;\n  color: #9da5b4;\n  cursor: pointer;\n}\n.menubar .category .title:hover {\n  background-color: #2c313a;\n}\n.menubar .category .title:active {\n  background-color: rgba(255,255,255,0.18);\n}\n.menubar .category .title.active {\n  color: #000;\n  background-color: #fff;\n}\n.menubar .category .menu-item-list {\n  position: absolute;\n  margin: 0;\n  padding: 0;\n  top: 100%;\n  left: 0;\n  list-style: none;\n  width: 200px;\n  background: #fff;\n}\n.menubar .category .menu-item-list .seprator {\n  margin: 0;\n  border: none;\n  border-bottom: 1px solid #ccc;\n}\n.menubar .category .menu-item-list .menu-item {\n  display: flex;\n  padding: 0 8px;\n  height: 32px;\n  cursor: pointer;\n  transition: background 250ms;\n}\n.menubar .category .menu-item-list .menu-item:hover {\n  background: rgba(34,38,44,0.161);\n}\n.menubar .category .menu-item-list .menu-item.disabled {\n  color: #808080;\n  background: inherit;\n  cursor: default;\n}\n.menubar .category .menu-item-list .menu-item > p {\n  margin: 0;\n  line-height: 32px;\n}\n.menubar .category .menu-item-list .menu-item .hint {\n  margin-left: auto;\n  color: #808080;\n}\n",""])},function(t,e,n){var r=n(65);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".status-bar {\n  flex-shrink: 0;\n  display: flex;\n  align-items: stretch;\n  width: 100%;\n  height: 22px;\n  padding: 0 4px;\n  color: #9da5b4;\n  background-color: #21252b;\n}\n.status-bar p {\n  margin: 0;\n  line-height: 22px;\n}\n.status-bar .left {\n  display: flex;\n}\n.status-bar .right {\n  margin-left: auto;\n}\n.status-bar .item {\n  padding: 0 8px;\n}\n.status-bar .button {\n  padding: 0 8px;\n  cursor: pointer;\n}\n.status-bar .button:hover {\n  background-color: #2c313a;\n}\n.status-bar .button:active {\n  background-color: rgba(255,255,255,0.18);\n}\n",""])},function(t,e,n){var r=n(67);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".structure {\n  width: 240px;\n  background: #e7e7e7;\n}\n.structure .item-list {\n  padding: 0;\n}\n.structure .item-list .item {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  line-height: 1.5rem;\n  padding: 0 2rem;\n}\n.structure .item-list .item .text {\n  flex: 1;\n}\n.structure .item-list .item .delete-btn {\n  margin-left: auto;\n  display: none;\n}\n.structure .item-list .item.selected {\n  color: #e7e7e7;\n  background: #282c34;\n}\n.structure .item-list .item:hover .delete-btn {\n  display: initial;\n}\n",""])},function(t,e,n){var r=n(69);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".overlay {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.overlay .content {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  z-index: 10;\n  width: 700px;\n  background: #fff;\n  padding: 0 16px;\n  box-shadow: 1px 1px 5px 1px #9e9e9e;\n  transform: translate(-50%, -102%);\n  transition: transform 250ms;\n}\n.overlay .content.show {\n  transform: translate(-50%, 0);\n}\n.overlay .content p {\n  font-size: 16px;\n}\n.overlay .content .shortcut-list {\n  padding-left: 8px;\n  margin-bottom: 16px;\n}\n.overlay .content .shortcut-list p {\n  margin: 0.5em 0;\n}\n.overlay .content .shortcut-list b {\n  display: inline-block;\n  width: 170px;\n}\n.overlay .content .close {\n  position: absolute;\n  font-size: 16px;\n  top: 16px;\n  right: 16px;\n  border: none;\n  text-decoration: underline;\n  background: none;\n  cursor: pointer;\n}\n.overlay .content .close:hover {\n  background: #b0c4de;\n}\n",""])},function(t,e,n){var r=n(71);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".svg {\n  flex-grow: 1;\n  background: #eee;\n}\n.svg > g {\n  will-change: transform;\n  transform-origin: top left;\n}\n.svg polygon {\n  fill-rule: evenodd;\n}\n",""])},function(t,e,n){var r=n(73);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(18)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(17)(!1)).push([t.i,'.app {\n  z-index: 0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  user-select: none;\n  transition: filter 250ms;\n}\n.app > main {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n}\n* {\n  box-sizing: border-box;\n}\nbody,\ninput,\nbutton {\n  font: 12px Consolas, "Microsoft YaHei", monospace, sans-serif;\n}\nbody img.ruler {\n  z-index: -1;\n  max-width: 300px;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n',""])},function(t,e){t.exports={meta:{type:"editor-config",version:.7},minScale:.1,maxScale:5,senseRange:15,fontSize:20,semantics:{tags:[{name:"room",styles:{fill:"#cccccc",stroke:"#999999",strokeWidth:2}},{name:"staircase",styles:{fill:"#d4eb8b",stroke:"#999999",strokeWidth:2}},{name:"hallway",styles:{fill:"#ffffff",stroke:"none"}},{name:"door",styles:{stroke:"#666666",strokeWidth:4}}]}}},function(t,e,n){var r;!function(i,o,a){if(i){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},f={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)c[111+h]="f"+h;for(h=0;h<=9;++h)c[h+96]=h.toString();_.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},_.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},_.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},_.prototype.reset=function(){return this._callbacks={},this._directMap={},this},_.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function t(e,n){return null!==e&&e!==o&&(e===n||t(e.parentNode,n))}(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},_.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},_.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(c[e]=t[e]);s=null},_.init=function(){var t=_(o);for(var e in t)"_"!==e.charAt(0)&&(_[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},_.init(),i.Mousetrap=_,t.exports&&(t.exports=_),void 0===(r=function(){return _}.call(e,n,e,t))||(t.exports=r)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return c[t.which]?c[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function y(t,e,n){return n||(n=function(){if(!s)for(var t in s={},c)t>95&&t<112||c.hasOwnProperty(t)&&(s[c[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function v(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],l[r]&&(r=l[r]),e&&"keypress"!=e&&f[r]&&(r=f[r],o.push("shift")),m(r)&&o.push(r);return{key:r,modifiers:o,action:e=y(r,o,e)}}function _(t){var e=this;if(t=t||o,!(e instanceof _))return new _(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,a=!1,s=!1;function c(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function u(t,n,i,o,a,s){var c,u,f,l,h=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&m(t)&&(n=[t]),c=0;c<e._callbacks[t].length;++c)if(u=e._callbacks[t][c],(o||!u.seq||r[u.seq]==u.level)&&d==u.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(f=n,l=u.modifiers,f.sort().join(",")===l.sort().join(",")))){var p=!o&&u.combo==a,y=o&&u.seq==o&&u.level==s;(p||y)&&e._callbacks[t].splice(c,1),h.push(u)}return h}function f(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function l(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=p(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function h(t,e,o,a){function u(e){return function(){s=e,++r[t],clearTimeout(n),n=setTimeout(c,1e3)}}function l(e){f(o,e,t),"keyup"!==a&&(i=p(e)),setTimeout(c,10)}r[t]=0;for(var h=0;h<e.length;++h){var d=h+1===e.length?l:u(a||v(e[h+1]).action);y(e[h],d,a,t,h)}}function y(t,n,r,i,o){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?h(t,s,n,r):(a=v(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},i,t,o),e._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,n){var r,i=u(t,e,n),o={},l=0,h=!1;for(r=0;r<i.length;++r)i[r].seq&&(l=Math.max(l,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=l)continue;h=!0,o[i[r].seq]=1,f(i[r].callback,n,i[r].combo,i[r].seq)}else h||f(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&a;n.type!=s||m(t)||d||c(o),a=h&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)y(t[r],e,n)},d(t,"keypress",l),d(t,"keydown",l),d(t,"keyup",l)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){"use strict";n.r(e);var r=n(6),i=n(8),o=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};var a=Object(r.a)(function(t){return!!o(t)||!!t&&("object"==typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),s=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function c(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,c){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,c,u){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,c,u,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var u=Object(i.a)(function(t,e){return c(t.length,function(){return t.apply(e,arguments)})});function f(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function l(t,e,n,r){return t["@@transducer/result"](n[r](u(t["@@transducer/step"],t),e))}var h="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function d(t,e,n){if("function"==typeof t&&(t=function(t){return new s(t)}(t)),a(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return l(t,e,n,"fantasy-land/reduce");if(null!=n[h])return f(t,e,n[h]());if("function"==typeof n.next)return f(t,e,n);if("function"==typeof n.reduce)return l(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}function p(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!o(i)){for(var a=0;a<t.length;){if("function"==typeof i[t[a]])return i[t[a]].apply(i,r);a+=1}if(function(t){return null!=t&&"function"==typeof t["@@transducer/step"]}(i))return e.apply(null,r)(i)}return n.apply(this,arguments)}}var m=function(){return this.xf["@@transducer/init"]()},y=function(t){return this.xf["@@transducer/result"](t)},v=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=m,t.prototype["@@transducer/result"]=y,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),_=Object(i.a)(function(t,e){return new v(t,e)}),b=n(5);var g=Object(i.a)(function(t,e){return 1===t?Object(r.a)(e):c(t,function t(e,n,r){return function(){for(var i=[],o=0,a=e,s=0;s<n.length||o<arguments.length;){var u;s<n.length&&(!Object(b.a)(n[s])||o>=arguments.length)?u=n[s]:(u=arguments[o],o+=1),i[s]=u,Object(b.a)(u)||(a-=1),s+=1}return a<=0?r.apply(this,i):c(a,t(e,i,r))}}(t,[],e))});function x(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var w=Object.prototype.toString,k=function(){return"[object Arguments]"===w.call(arguments)?function(t){return"[object Arguments]"===w.call(t)}:function(t){return x("callee",t)}}(),S=!{toString:null}.propertyIsEnumerable("toString"),O=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],M=function(){return arguments.propertyIsEnumerable("length")}(),j=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},E="function"!=typeof Object.keys||M?Object(r.a)(function(t){if(Object(t)!==t)return[];var e,n,r=[],i=M&&k(t);for(e in t)!x(e,t)||i&&"length"===e||(r[r.length]=e);if(S)for(n=O.length-1;n>=0;)x(e=O[n],t)&&!j(r,e)&&(r[r.length]=e),n-=1;return r}):Object(r.a)(function(t){return Object(t)!==t?[]:Object.keys(t)}),I=Object(i.a)(p(["fantasy-land/map","map"],_,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return g(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return d(function(n,r){return n[r]=t(e[r]),n},{},E(e));default:return function(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}(t,e)}})),T=Object(i.a)(function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:d(function(t,n){return function(t,e){var n;e=e||[];var r=(t=t||[]).length,i=e.length,o=[];for(n=0;n<r;)o[o.length]=t[n],n+=1;for(n=0;n<i;)o[o.length]=e[n],n+=1;return o}(t,I(n,e))},[],t)}),C=Object(i.a)(function(t,e){var n=g(t,e);return g(t,function(){return d(T,I(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),A=Object(r.a)(function(t){return C(t.length,t)}),z=Object(r.a)(function(t){return!t}),N=A(z),D=n(0),L=n.n(D),P=n(38),R=n.n(P),$=n(27),U=n.n($);const q={};class B{constructor(t){this.p=t}_n(t){const e=this.p;e.out!==q&&(e.lastVal=t)}_e(t){this.p._e(t)}_c(){this.p.peekStream._remove(this)}}class W{constructor(t,e){this.type="peek",this.out=q,this.lastVal=q,this.peekStream=q,this.ins=t,this.peekStream=e}_start(t){this.out=t,this.il=new B(this),this.peekStream._add(this.il),this.ins._add(this)}_stop(){this.ins._remove(this),this.peekStream._remove(this.il),this.out=null}_n(t){this.out!==q&&this.lastVal!==q&&this.out._n(this.lastVal)}_e(t){this.out&&this.out._e(t)}_c(){this.out&&this.out._c()}}const F={};class V{constructor(t){this.p=t}_n(t){const e=this.p;e.out!==F&&(e.lastVal=t)}_e(t){this.p._e(t)}_c(){this.p.peekStream._remove(this)}}class H{constructor(t,e,n){this.type="when",this.out=F,this.lastVal=F,this.peekStream=F,this.ins=t,this.peekStream=e,this.filterFn=n}_start(t){this.out=t,this.il=new V(this),this.peekStream._add(this.il),this.ins._add(this)}_stop(){this.ins._remove(this),this.peekStream._remove(this.il),this.out=null}_n(t){this.out!==F&&this.lastVal!==F&&this.filterFn(this.lastVal)&&this.out._n(t)}_e(t){this.out&&this.out._e(t)}_c(){this.out&&this.out._c()}}D.Stream.prototype.peek=function(t){return this.compose(function(t){return function(e){return new D.Stream(new W(e,t))}}(t))},D.Stream.prototype.when=function(t,e=Boolean){return this.compose(function(t,e){return function(n){return new D.Stream(new H(n,t,e))}}(t,e))},D.Stream.prototype.whenNot=function(t,e=Boolean){return this.when(t,N(e))},D.Stream.prototype.sampleCombine=function(...t){return this.compose(U()(...t))},D.Stream.prototype.combine=function(...t){return L.a.combine(this,...t)},D.Stream.prototype.dropRepeats=function(t){return this.compose(R()(t))},D.Stream.prototype.checkedFlatMap=function(t,e){return void 0===e&&(e=t,t=Boolean),this.map(n=>t(n)?e(n):L.a.of(null)).flatten()};const{Transform:Y}=n(14);Y.prototype.invertPos=function(t){const[e,n]=this.invert([t.x,t.y]);return{x:e,y:n}},Y.prototype.applyPos=function(t){const[e,n]=this.apply([t.x,t.y]);return{x:e,y:n}};var K=n(1),J=n(40),X=n.n(J),Z=n(41),G=X()();function Q(t){return 0===Object.keys(t).length}function tt(t,e){if("function"!=typeof t)throw new Error("First argument given to Cycle must be the 'main' function.");if("object"!=typeof e||null===e)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(Q(e))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var n=function(t){if("object"!=typeof t||null===t)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(Q(t))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=L.a.create());return e}(t),n=function(t){for(var e in t)t.hasOwnProperty(e)&&t[e]&&"function"==typeof t[e].shamefullySendNext&&(t[e]=Object(Z.a)(t[e]));return t}(function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r](e[r],r),n[r]&&"object"==typeof n[r]&&(n[r]._isCycleSource=r));return n}(t,e));return{sources:n,run:function(t){return function(t,e){var n=Object.keys(t).filter(function(t){return!!e[t]}),r={},i={};n.forEach(function(t){r[t]={_n:[],_e:[]},i[t]={next:function(e){return r[t]._n.push(e)},error:function(e){return r[t]._e.push(e)},complete:function(){}}});var o=n.map(function(e){return L.a.fromObservable(t[e]).subscribe(i[e])});return n.forEach(function(t){var n=e[t],o=function(t){G(function(){return n._n(t)})},a=function(t){G(function(){(console.error||console.log)(t),n._e(t)})};r[t]._n.forEach(o),r[t]._e.forEach(a),i[t].next=o,i[t].error=a,i[t]._n=o,i[t]._e=a}),r=null,function(){o.forEach(function(t){return t.unsubscribe()})}}(t,e)},dispose:function(){(function(t){for(var e in t)t.hasOwnProperty(e)&&t[e]&&t[e].dispose&&t[e].dispose()})(n),function(t){Object.keys(t).forEach(function(e){return t[e]._c()})}(e)}}}(e),r=t(n.sources);return"undefined"!=typeof window&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=r),{sinks:r,sources:n.sources,run:function(){var t=n.run(r);return function(){t(),n.dispose()}}}}function et(t,e){var n=tt(t,e);return"undefined"!=typeof window&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(n.sinks),n.run()}n(57);var nt=n(10);var rt=0;function it(){return"cycle"+ ++rt}function ot(t,e){void 0===e&&(e=it()),function(t,e){if("function"!=typeof t)throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(null===e)throw new Error("Second argument given to isolate() must not be null")}(t,e);var n="object"==typeof e?it():"",r="string"==typeof e||"object"==typeof e?e:e.toString();return function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=function(t,e,n){var r={};return Object.keys(t).forEach(function(t){if("string"!=typeof e){var i=e[t];if(void 0===i){var o=e["*"];r[t]=void 0===o?n:o}else r[t]=i}else r[t]=e}),r}(e,r,n),s=function(t,e){var n={};for(var r in t){var i=t[r];t.hasOwnProperty(r)&&i&&null!==e[r]&&"function"==typeof i.isolateSource?n[r]=i.isolateSource(i,e[r]):t.hasOwnProperty(r)&&(n[r]=t[r])}return n}(e,a);return function(t,e,n){var r={};for(var i in e){var o=t[i],a=e[i];e.hasOwnProperty(i)&&o&&null!==n[i]&&"function"==typeof o.isolateSink?r[i]=Object(nt.adapt)(o.isolateSink(L.a.fromObservable(a),n[i])):e.hasOwnProperty(i)&&(r[i]=e[i])}return r}(e,t.apply(void 0,[s].concat(i)),a)}}ot.reset=function(){return rt=0};var at=ot;var st=n(2);var ct="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},ut=Object(i.a)(ct),ft=n(3),lt=n(7);function ht(t){const e=t.getBBox();if(null==e)return null;const{x:n,y:r,width:i,height:o}=e;return Object(K.a)("div",[Object(lt.b)({label:"Position",key:"position"},[Object(lt.a)({field:"x",label:"X",type:"number",disabled:!0,value:Object(ft.j)(n)}),Object(lt.a)({field:"y",label:"Y",type:"number",disabled:!0,value:Object(ft.j)(r)})]),Object(lt.b)({label:"Size",key:"size"},[Object(lt.a)({field:"width",label:"width",type:"number",disabled:!0,value:Object(ft.j)(i)}),Object(lt.a)({field:"height",label:"Height",type:"number",disabled:!0,value:Object(ft.j)(o)})])])}function dt(t){return Object(ft.g)(t)?Object(lt.b)({label:"Fill",key:"fill"},[Object(lt.a)({field:"fill",label:"Fill",type:"color",value:t.fill})]):null}function pt(t){return Object(ft.g)(t)||Object(ft.h)(t)?Object(lt.b)({label:"Stroke",key:"stroke"},[Object(lt.a)({field:"stroke",label:"Stroke",type:"color",value:t.stroke}),Object(lt.a)({field:"strokeWidth",label:"Stroke Width",type:"number",value:t.strokeWidth,min:0,step:.1})]):null}function mt(t){return Object(lt.b)({label:"Opacity",key:"opacity"},[Object(lt.a)({field:"opacity",label:"Opacity",type:"number",value:t.opacity,min:0,max:1,step:.1})])}function yt({selIdSet:t,items:e,zlist:n}){if(t.isEmpty())return null;const r=t.toList(),i=t.count(),o=Object(st.is)(r.sort(),n.take(i).sort()),a=Object(st.is)(r.sort(),n.takeLast(i).sort()),s=n.indexOf(t.first());return Object(lt.b)({label:"Z-index",key:"z"},[Object(K.a)("p",{style:{"align-self":"center","margin-right":"8px"}},String(s)),Object(K.a)("button.btn.z",{attrs:{disabled:o},dataset:{op:"bottom"}},"bottom"),Object(K.a)("button.btn.z",{attrs:{disabled:o},dataset:{op:"dec"}},"-1"),Object(K.a)("button.btn.z",{attrs:{disabled:a},dataset:{op:"inc"}},"+1"),Object(K.a)("button.btn.z",{attrs:{disabled:a},dataset:{op:"top"}},"top")])}function vt(t){return Object(lt.b)({label:"Lock",key:"lock"},t.locked?[Object(K.a)("h2","locked"),Object(K.a)("button.toggle-lock","Unlock")]:[Object(K.a)("h2","not locked"),Object(K.a)("button.toggle-lock","Lock")])}function _t(t){const e=t.DOM,n=t.state,r=e.select(".btn.z").events("click").map(t=>t.ownerTarget.dataset.op).map(t=>({type:"change-z-index",op:t})),i=e.select(".toggle-lock").events("click").mapTo("toggle-lock"),o=e.select(".field input").events("input").map(t=>{const e=t.ownerTarget;return{type:"edit",field:e.dataset.field,value:e.value}});return{DOM:n.map(t=>{let e;const n=t.sitem();return e=null==n?[Object(K.a)("p.empty-prompt","No Selected Items.")]:[ht(t),dt(n),pt(n),mt(n),yt(t),vt(n)],Object(K.a)("div.tab.geometric-tab",e)}),intent:L.a.merge(o,r,i)}}var bt=n(13);const gt=30,xt=20,wt=10;function kt(t){let e=0;const n=t.index+1,r=t.list.count()-n;return e=n<=xt?0:r<=wt?Math.max(0,t.list.count()-gt):n-xt,Object(K.a)("ol.action-list",{attrs:{start:1+e}},t.list.slice(e,e+gt).map((n,r)=>Object(K.a)("li.action-item",{key:r+e,style:r+e>t.index?{color:"#999999"}:null},n.getMessage())).toArray())}function St({DOM:t,appHistory:e}){const n=e.map(t=>Object(K.a)("div.tab.history-tab",t.list.isEmpty()?[Object(K.a)("p.empty-prompt","No Action History.")]:[Object(K.a)("div.button-group",[Object(K.a)("button.undo",{attrs:{disabled:t.getLastAction()===bt.c}},"Undo"),Object(K.a)("button.redo",{attrs:{disabled:t.getNextAction()===bt.c}},"Redo"),Object(K.a)("button.clear-history","Clear")]),kt(t)])),r=t.select(".undo").events("click").mapTo("undo"),i=t.select(".redo").events("click").mapTo("redo"),o=t.select(".clear-history").events("click").mapTo("clear-history");return{DOM:n,intent:L.a.merge(r,i,o)}}var Ot=n(42);n(60);const Mt=["geometric","semantic","history"];function jt(t){return Object(K.a)("div.tab-chooser",Mt.map(e=>(function({cntTabName:t,tabName:e}){return Object(K.a)("button.tab-chooser-item",{class:{active:t===e},dataset:{tab:e}},e)})({cntTabName:t,tabName:e})))}function Et(t){const e=t.keyboard,n=L.a.merge(t.DOM.select(".tab-chooser-item").events("click").map(t=>t.ownerTarget.dataset.tab),e.shortcut("s").mapTo("semantic"),e.shortcut("g").mapTo("geometric"),e.shortcut("h").mapTo("history")).startWith("geometric").dropRepeats().remember().map(e=>"geometric"===e?{inst:at(_t)(t),tabName:e}:"history"===e?{inst:at(St)(t),tabName:e}:{inst:at(Ot.a)(t),tabName:e});return{DOM:n.map(({inst:{DOM:t},tabName:e})=>t.map(t=>Object(K.a)("div.inspector",[jt(e),t].filter(Boolean)))).flatten(),intent:n.map(({inst:{intent:t}})=>t).flatten()}}var It=n(44);n(64);function Tt({DOM:t,mode:e,state:n,svgDOMRect:r}){const i=t.select(".reset-zoom").events("click").mapTo("reset-zoom"),o=t.select(".toggle-sel-mode").events("click").mapTo("toggle-sel-mode");return{DOM:L.a.combine(e,n,r).map(([t,e,n])=>Object(K.a)("div.status-bar",[Object(K.a)("div.left",[Object(K.a)("p.item.mode",{attrs:{title:"Current Interaction Mode"}},t),Object(K.a)("p.button.toggle-sel-mode",{attrs:{title:"Toggle Selection Mode"}},e.selMode),Object(K.a)("p.item.svg-dom-rect",{attrs:{title:"Current View Box"}},`${n.width} * ${n.height}`)]),Object(K.a)("div.right",[Object(K.a)("p.button.reset-zoom",{attrs:{title:"Click to Reset Zoom"}},`${Math.round(100*e.transform.k)}%`)])])),intent:L.a.merge(i,o)}}var Ct=n(45);n(66);function At({state:t,DOM:e}){const n=e.select(".item .text").events("click").map(t=>({type:"change-sel",itemIdArray:[Number(t.ownerTarget.parentElement.dataset.itemId)]})),r=e.select(".item .text").events("dblclick").map(t=>({type:"zoom-to-item",itemId:Number(t.ownerTarget.parentElement.dataset.itemId)})),i=e.select(".item .delete-btn").events("click").map(t=>({type:"delete-items",itemIdArray:[Number(t.ownerTarget.parentElement.dataset.itemId)]}));return{DOM:t.map(t=>Object(K.a)("div.structure",[Object(K.a)("ul.item-list",t.zlist.map(e=>{const n=t.items.get(e);return Object(K.a)("li.item",{key:e,dataset:{itemId:String(e)},class:{selected:t.selIdSet.has(e)}},[Object(K.a)("span.text",`${e} ${n.getShortDescription()}`),Object(Ct.a)({className:"delete-btn"})])}).toArray())])),intent:L.a.merge(n,i,r)}}var zt=n(46);function Nt({config:t,state:e,mouse:n}){return{DOM:L.a.combine(n.adjustedMoveInfo$,e,t).map(([t,{transform:e},n])=>{const r=t.applied.includes("cement")?Object(K.a)("circle",{key:"adjust-cement",attrs:{cx:t.point.x,cy:t.point.y,r:n.senseRange/e.k,fill:"red",opacity:.4}}):null,i=t.applied.includes("align")?Object(K.a)("g.adjust-align",{key:"adjust-align",style:{opacity:"0.6"}},[t.info.horizontalPoint?Object(K.a)("line.adjust-align-horizontal",{attrs:{"stroke-width":2/e.k,"stroke-dasharray":`${4/e.k}`,stroke:"red",x1:t.point.x,y1:t.point.y,x2:t.info.horizontalPoint.x,y2:t.info.horizontalPoint.y}}):null,t.info.verticalPoint?Object(K.a)("line.adjust-align-vertical",{attrs:{"stroke-width":2/e.k,"stroke-dasharray":`${4/e.k}`,stroke:"red",x1:t.point.x,y1:t.point.y,x2:t.info.verticalPoint.x,y2:t.info.verticalPoint.y}}):null].filter(Boolean)):null;return Object(K.a)("g.adjust-indicator",[r,i].filter(Boolean))})}}var Dt=n(22);function Lt({mouse:t,keyboard:e,state:n,config:r}){const i=n.map(t=>{const e=t.sitem(),n=t.vertices();return{editable:e&&!e.locked,vertices:n}}),o=i.map(({vertices:t,editable:e})=>t.isEmpty()?Object(st.List)():t.butLast().zip(t.rest()).push([t.last(),t.first()])),a=L.a.combine(i,r,t.move$,o,n,t.vertexIndex$).map(([{editable:t},e,n,r,{transform:i},o])=>-1===o&&t?r.findIndex(t=>Object(ft.c)(n,t[0],t[1])<=e.senseRange/i.k):-1);return{DOM:a.sampleCombine(o).map(([t,e])=>-1===t?null:e.get(t)).sampleCombine(n).map(([t,{transform:e}])=>t?Object(K.a)("line",{attrs:{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,stroke:"#14e01c","stroke-width":3/e.k}}):null),nextVertexInsertIndex:a.map(t=>-1===t?-1:t+1)}}var Pt=n(9);function Rt({mouse:t,state:e}){const n=e.map(t=>{const e=t.sitem(),n=t.vertices();return{editable:e&&!e.locked,vertices:n}}),r=L.a.combine(e,n,t.move$).whenNot(t.pressing$).map(([{transform:t},{editable:e,vertices:n},r])=>e?n.findIndex(e=>Object(ft.b)(e,r)<=Pt.a/t.k):-1);return{DOM:L.a.combine(e,n,t.vertexIndex$).map(([{transform:t},{vertices:e,editable:n},r])=>{const i=n?Dt.a:Dt.b;return Object(K.a)("g.vertices-indicator",{key:"vertices-indicator"},e.toArray().map((e,n)=>i({x:e.x,y:e.y,k:t.k,dataset:{pointIndex:String(n)},attrs:{fill:n===r?"red":"white",className:"vertex"}})))}),nextVertexIndex:r}}var $t=n(24);class Ut extends $t.a{constructor(t){super(),this.item=t}prepare(t){return this.itemId=Object(ft.f)(t.state),this.prevSelIdSet=t.state.selIdSet,t}next(t){return t.update("items",t=>t.set(this.itemId,this.item.set("id",this.itemId))).update("zlist",t=>t.push(this.itemId)).set("selIdSet",Object(st.OrderedSet)([Object(ft.f)(t)]))}prev(t){return t.deleteIn(["items",this.itemId]).update("zlist",t=>t.filterNot(ut(this.itemId))).set("selIdSet",this.prevSelIdSet)}getMessage(){return`Add item ${this.itemId}`}}n(70);var qt=n(4);function Bt(t){const e=t.DOM,n=e.select(".svg"),r=t.state,i=t.config,o=t.mouse,a=t.keyboard,s=t.working;n.events("dragover",{preventDefault:!0}).addListener({next(t){t.dataTransfer.dropEffect="copy"}});const c=n.events("drop",{preventDefault:!0}).map(t=>t.dataTransfer.files[0]).filter(Boolean),u=c.map(e=>t.FILE.filter(t=>t.file===e).take(1).map(qt.b.fromImgFileStat).map(t=>new Ut(t))).flatten(),f=e.select("svg").events("mousedown"),l=e.select("svg").events("click"),h=e.select("svg").events("dblclick"),d=e.select("svg").events("wheel").map(t=>({pos:t,deltaY:t.deltaY})),p=at(Dt.c,".selection-indicator")(t),m=at(Rt,".vertices-indicator")(t),y=at(Lt,".vertex-insert-indicator")(t),v=at(Nt,".adjust-indicator")(t),_=L.a.combine(p.DOM.startWith(null),y.DOM.startWith(null),m.DOM.startWith(null),v.DOM.startWith(null),t.polygonCloseIndicator).map(([t,e,n,r,i])=>Object(K.a)("g.indicators",[t,e,n,r,i].filter(Boolean))),b=L.a.combine(r,i,a.isPressing("`"),s.editing).map(([{zlist:t,items:e},n,r,i])=>Object(K.a)("g.items",(r?t.reverse():t).map(t=>e.get(t)).map(t=>i.has(t.id)?t.set("opacity",.6*t.opacity):t).map(t=>t.render(n)).toArray()));return{DOM:L.a.combine(b,o.cursor$,r,i,s.drawing,_).map(([t,e,{transform:n},r,i,o])=>Object(K.a)("svg.svg",{style:{cursor:e}},[Object(K.a)("g",{attrs:{transform:String(n)}},[Object(K.a)("line",{attrs:{x1:0,y1:0,x2:300,y2:0,stroke:"red"}}),Object(K.a)("line",{attrs:{x1:0,y1:0,x2:0,y2:300,stroke:"red"}}),t,Object(K.a)("g.drawing-item",[i&&i.set("opacity",.6*i.opacity).render(r)].filter(Boolean)),o])])),FILE:c,action:u,rawDown:f,rawDblclick:h,rawClick:l,rawWheel:d,nextResizer:p.nextResizer,nextVertexIndex:m.nextVertexIndex,nextVertexInsertIndex:y.nextVertexInsertIndex,svgDOMRectTrigger:e.select(".svg").events("load")}}var Wt=n(28),Ft=Object(Wt.a)(1),Vt=Object(r.a)(function(t){return function(){return t}});var Ht=({keyboard:t,state:e,clipboard:n})=>{const r=t.shortcut("mod+c").peek(e).map(t=>t.sitem()).filter(Boolean),i=L.a.create(),o=L.a.merge(i.mapTo(Ft),r.mapTo(Vt(0))).fold((t,e)=>e(t),0),a=t.shortcut("mod+v").when(n).peek(L.a.combine(n,o)).map(([t,e])=>t.set("locked",!1).move(Pt.d*(1+e),Pt.d*(1+e)).set("locked",t.locked)).map(t=>new Ut(t));return i.imitate(a),{nextClipboard:r,action:a}};class Yt extends qt.a{constructor(t,e,n,r){super(),this.target=t,this.start=e,this.mousePos=n,this.senseRange=r}prepare(t){const e=t.getLastAction();return e!==qt.f&&e instanceof Yt&&(this.start==e.start||null!=this.mousePos&&null!=e.mousePos&&Object(ft.b)(this.mousePos,e.mousePos)<this.senseRange*Pt.c)?t.pop():t}next(t){return t.set("transform",this.target)}prev(t){return t.set("transform",this.start)}getMessage(){return`Set transform. ${`x=${this.target.x.toFixed(1)}`}, ${`y=${this.target.y.toFixed(1)}`}, ${`k=${this.target.k.toFixed(1)}`}`}}var Kt=({mouse:t,mode:e,state:n,config:r})=>{return{action:t.rawDown$.when(e,ut("idle")).whenNot(t.isBusy$).sampleCombine(n,r).map(([t,e,n])=>{const r=e.transform.invertPos(t);return e.items.filter(t=>t.containsPoint(r)).every(t=>t.locked)?{rawPos:t,transform:e.transform,senseRange:n.senseRange}:null}).filter(Boolean).map(e=>t.rawMove$.map(t=>{const n=e.transform.k,r=t.x-e.rawPos.x,i=t.y-e.rawPos.y,o=e.transform.translate(r/n,i/n);return new Yt(o,e.transform,null,e.senseRange)}).endWhen(t.up$)).flatten()}};class Jt extends qt.a{constructor(t){super(),this.itemIds=t}prepare(t){return this.prevSelIdSet=t.state.selIdSet,t}next(t){return t.set("selIdSet",Object(st.OrderedSet)(this.itemIds))}prev(t){return t.set("selIdSet",this.prevSelIdSet)}getMessage(){return 0===this.itemIds.length?"Clear selection":`Select items. items={${this.itemIds.join(",")}}`}}class Xt extends qt.a{constructor(t){super(),this.config=t}prepare(t){const e=t.getLastAction();return e!=qt.f&&e instanceof Xt&&e.config.startPos==this.config.startPos?(this.prevItems=e.prevItems,t.pop()):(this.prevItems=this.config.startItems,t)}next(t){const e=this.config.movingPos.x-this.config.startPos.x,n=this.config.movingPos.y-this.config.startPos.y,r=this.config.startItems.map(t=>t.move(e,n));return t.mergeIn(["items"],r)}prev(t){return t.mergeIn(["items"],this.prevItems)}getMessage(){const t=this.config.startItems.keySeq().join(","),e=this.config.movingPos.x-this.config.startPos.x,n=this.config.movingPos.y-this.config.startPos.y;return`Move items. items={${t}}, dx=${e.toFixed(1)}, dy=${n.toFixed(1)}`}}var Zt=({mouse:t,mode:e,state:n})=>{const r=t.down$.when(e,ut("idle")).whenNot(t.isBusy$).sampleCombine(n).map(([t,e])=>{const n=e.items.filter(e=>e.containsPoint(t)),r=e.zlist.findLast(t=>n.has(t));return{pos:t,clickItemId:r}}).sampleCombine(n).map(([{clickItemId:t,pos:e},{selIdSet:n}])=>{const r={shouldUpdate:!1,idArray:[],pos:e};return null==t?n.isEmpty()||(r.shouldUpdate=!0):n.has(t)?r.idArray=n.toArray():(r.shouldUpdate=!0,r.idArray=[t]),r}),i=r.filter(t=>t.shouldUpdate).map(t=>t.idArray).map(t=>new Jt(t)),o=r.sampleCombine(n).map(([{pos:t,idArray:e},n])=>{const r=n.items.filter(t=>e.includes(t.id));return r.some(e=>e.containsPoint(t))&&r.every(t=>!t.locked)?{startPos:t,startItems:r}:null}).filter(Boolean),a=o.mapTo(t.move$.endWhen(t.up$).mapTo("dragging").take(1)).flatten(),s=a.peek(o).map(t=>t.startItems.keySeq().toSet()),c=o.map(({startItems:n,startPos:r})=>t.move$.when(e,ut("dragging")).map(t=>new Xt({startPos:r,movingPos:t,startItems:n})).endWhen(t.up$)).flatten(),u=t.up$.when(e,ut("dragging")).mapTo("idle");return{action:L.a.merge(i,c),nextMode:L.a.merge(a,u),nextWorking:{editing:L.a.merge(s,u.mapTo(Object(st.Set)()))}}};var Gt=({mouse:t,UI:e,mode:n,keyboard:r})=>{const i=L.a.merge(e.intent("line"),r.shortcut("l")).mapTo("line.ready"),o=t.adown$.when(n,ut("line.ready")).remember(),a=o.mapTo("line.drawing"),s=o.map(e=>t.amove$.when(n,ut("line.drawing")).startWith(e)).flatten(),c=n.checkedFlatMap(ut("line.drawing"),()=>L.a.combine(o,s).map(qt.d.lineFromPoints)).filter(Boolean),u=t.aup$.when(n,ut("line.drawing")).peek(c),f=u.mapTo("idle"),l=L.a.merge(i,a,f),h=l.map(t=>"line.ready"===t||"line.drawing"===t?[{type:"cement"},{type:"align"}]:[]);return{nextWorking:{drawing:c},action:u.map(t=>new Ut(t)),nextMode:l,nextAdjustConfigs:h}};var Qt=({mouse:t,keyboard:e,UI:n,mode:r,state:i,config:o})=>{const a=L.a.create(),s=L.a.create(),c=L.a.merge(a.map(t=>e=>e.push(t)),s.mapTo(Vt(Object(st.List)()))).fold((t,e)=>e(t),Object(st.List)()),u=L.a.combine(t.move$,i,o).sampleCombine(c).map(([[t,{transform:e},n],r])=>r.count()>=3&&Object(ft.b)(r.first(),t)<n.senseRange/e.k).dropRepeats().startWith(!1),f=L.a.merge(e.shortcut("p"),n.intent("polygon")).mapTo("polygon"),l=t.aclick$.when(r,ut("polygon")).whenNot(u);a.imitate(l);const h=t.click$.when(u).peek(c).map(qt.c.fromPoints),d=h.mapTo("idle"),p=h.map(t=>new Ut(t));s.imitate(L.a.merge(p,f));const m=r.checkedFlatMap(ut("polygon"),()=>t.amove$.sampleCombine(u,c).map(([t,e,n])=>n.isEmpty()?null:e?qt.c.fromPoints(n.push(n.first())):qt.c.fromPoints(n.push(t)))).startWith(null),y=L.a.combine(r,u).checkedFlatMap(([t,e])=>"polygon"===t&&e,()=>c.map(t=>t.first())).checkedFlatMap(t=>L.a.combine(i,o).map(([{transform:e},n])=>Object(K.a)("circle.close-indicator",{attrs:{cx:t.x,cy:t.y,fill:"red",opacity:.3,r:n.senseRange/e.k}}))).startWith(null),v=L.a.merge(f,d);return{nextWorking:{drawing:m},action:p,nextMode:v,nextAdjustConfigs:L.a.combine(u,v,e.isPressing("shift")).map(([t,e,n])=>"polygon"===e?t?L.a.of([]):n?c.map(t=>t.last()).map(t=>[{type:"restrict",anchor:t},{type:"cement"},{type:"align"}]):L.a.of([{type:"cement"},{type:"align"}]):L.a.of([])).flatten(),nextPolygonCloseIndicator:y}};var te=({UI:t,mouse:e,mode:n,keyboard:r})=>{const i=L.a.merge(t.intent("rect"),r.shortcut("r")).mapTo("rect.ready"),o=e.adown$.when(n,ut("rect.ready")),a=o.mapTo("rect.drawing"),s=o.map(t=>e.amove$.when(n,ut("rect.drawing")).map(e=>qt.c.rectFromPoints(t,e)).startWith(qt.c.rectFromPoints(t,t))).flatten(),c=e.aup$.when(n,ut("rect.drawing")).peek(s).filter(t=>{const e=Object(ft.d)(t.getVertices());return e.width*e.height>0}),u=c.mapTo("idle"),f=L.a.merge(i,u,a),l=f.map(t=>"rect.ready"===t||"rect.drawing"===t?[{type:"cement"},{type:"align"}]:[]);return{nextWorking:{drawing:s},action:c.map(t=>new Ut(t)),nextMode:f,nextAdjustConfigs:l}};class ee extends qt.a{constructor(t){super(),this.vertexIndex=t}prepare(t){return this.prevItem=t.state.items.get(t.state.selIdSet.first()),t}next(t){return t.update("items",e=>e.update(t.selIdSet.first(),t=>t.supportEditVertex()?t.deleteVertex(this.vertexIndex):t))}prev(t){return t.update("items",t=>t.set(this.prevItem.id,this.prevItem))}getMessage(){return`Delete vertex. item-id=${this.prevItem.id}, vertex-index=${this.vertexIndex}`}}var ne=n(47);class re extends qt.a{constructor(t){super(),this.config=t}prepare(t){return this.prevItem=t.state.sitem(),t}next(t){const[e,n]=this.config;return Object(ne.updateIn)(t,["items",t.selIdSet.first()],t=>t.supportEditVertex()?t.insertVertex(n,e):t)}prev(t){return t.set("items",t.items.set(this.prevItem.id,this.prevItem))}getMessage(){return`Insert vertex. item=${this.prevItem.id}, insert-index=${this.config[1]}`}}class ie extends qt.a{constructor(t){super(),this.config=t}prepare(t){const e=t.getLastAction(),{item:n,vertexIndex:r,startPos:i,movingPos:o}=this.config,a=o.x-i.x,s=o.y-i.y;return this.nextItem=n.supportEditVertex()?n.moveVertex(r,a,s):n,e!==qt.f&&e instanceof ie&&e.config.startPos==this.config.startPos?(this.prevItem=e.prevItem,t.pop()):(this.prevItem=t.state.items.get(this.config.item.id),t)}next(t){const{item:e,vertexIndex:n,startPos:r,movingPos:i}=this.config;i.x,r.x,i.y,r.y;return t.set("items",t.items.set(e.id,this.nextItem))}prev(t){return t.set("items",t.items.set(this.prevItem.id,this.prevItem))}getMessage(){const{vertexIndex:t}=this.config,e=this.prevItem.getVertices().get(t),n=this.nextItem.getVertices().get(t),r=(n.x-e.x).toFixed(1),i=(n.y-e.y).toFixed(1);return`Move vertex. item=${this.prevItem.id}, vertex-index=${t}, dx=${r}, dy=${i}`}}class oe extends qt.a{prepare(t){return this.nextMode="bbox"===t.state.selMode?"vertices":"bbox",t}next(t){return t.set("selMode","bbox"===t.selMode?"vertices":"bbox")}prev(t){return this.next(t)}getMessage(){return`Change selection mode to ${this.nextMode}`}}var ae=({UI:t,mouse:e,state:n,mode:r,keyboard:i})=>{const o=L.a.merge(i.shortcut("e"),t.intent("toggle-sel-mode")).when(r,ut("idle")).map(()=>new oe),a=e.down$.whenNot(e.vertexInsertIndex$,ut(-1)).sampleCombine(e.vertexInsertIndex$),s=a.map(([t,e])=>n.drop(1).take(1).map(n=>({startPos:t,item:n.sitem(),vertexIndex:e}))).flatten(),c=e.down$.when(r,ut("idle")).whenNot(e.vertexIndex$,ut(-1)).when(n,t=>"vertices"===t.selMode).sampleCombine(e.vertexIndex$,n).map(([t,e,n])=>({startPos:t,item:n.sitem().setIn(["points",e],t),vertexIndex:e})),u=L.a.merge(s,c),f=L.a.merge(e.up$,e.vertexIndex$.filter(ut(-1))),l=u.mapTo(e.move$.endWhen(f).mapTo("vertex.moving").take(1)).flatten(),h=l.peek(u).map(t=>t.item.id),d=u.map(({item:t,vertexIndex:r})=>L.a.merge(e.move$.peek(n).map(e=>[{type:"align",exclude:[e.getIn(["items",t.id,"points",r])]}]).startWith([{type:"align",exclude:[]}]).endWhen(e.up$),e.up$.mapTo([]))).flatten(),p=u.map(({item:t,startPos:n,vertexIndex:i})=>e.amove$.when(r,ut("vertex.moving")).map(e=>new ie({item:t,vertexIndex:i,startPos:n,movingPos:e})).endWhen(f)).flatten(),m=e.up$.when(r,ut("vertex.moving")).mapTo("idle"),y=i.shortcut("d").peek(e.vertexIndex$).filter(t=>-1!==t).map(t=>new ee(t));return{action:L.a.merge(o,p,a.map(t=>new re(t)),y),nextVertexIndex:L.a.merge(s.map(t=>t.vertexIndex),y.mapTo(-1)),nextAdjustConfigs:d,nextMode:L.a.merge(l,m),nextEditingItemId:L.a.merge(h,m.mapTo(-1))}};class se extends qt.a{constructor(t){super(),this.newState=t}prepare(t){return this.prevState=t.state,t}next(t){return t.merge(this.newState).set("selIdSet",Object(st.OrderedSet)())}prev(t){return this.prevState}getMessage(){return"Load."}}var ce=n(26);function ue(t){if(Object(ft.g)(t))return"PolygonItem";if(Object(ft.h)(t))return"PolylineItem";throw new Error("Invalid item.")}var fe={toJS(t){const e=t.items.filter(t=>Object(ft.g)(t)||Object(ft.h)(t)).map(t=>Object.assign({type:ue(t)},t.toObject())).valueSeq().toArray(),n=Object(st.Set)(e.map(t=>t.id));return{items:e,zlist:t.zlist.filter(t=>n.has(t)).toArray()}},fromJS(t){const e=Object(st.Seq)(t.items).toIndexedSeq().map(t=>(function(t){if("PolygonItem"===t)return qt.c;if("PolylineItem"===t)return qt.d;if("ImgItem"===t)return ce.a;throw new Error("Invalid type name.")})(t.type).fromJS(t)).toMap().mapKeys((t,e)=>e.id),n=Object(st.Seq)(t.zlist).toIndexedSeq().toList();return new qt.e({items:e,zlist:n})}};var le=({FILE:t,UI:e,keyboard:n,state:r})=>{const i=e.intent("save").peek(r).map(t=>({blob:new Blob([JSON.stringify(fe.toJS(t))],{type:"text/plain;charset=utf-8"}),filename:"data.json"})),o=e.intent("load-data").mapTo({type:"dialog",accept:".json"}),a=o.mapTo(t.take(1)).flatten().map(t=>fe.fromJS(JSON.parse(t.content))),s=a.map(t=>new se(t)),c=a.mapTo("idle"),u=e.intent("load-image").mapTo({type:"dialog",accept:"image/*"}),f=u.mapTo(t.take(1)).flatten().map(qt.b.fromImgFileStat).map(t=>new Ut(t));return{SAVE:i,FILE:L.a.merge(o,u),action:L.a.merge(s,f),nextMode:c}};class he extends qt.a{constructor(t){super(),this.config=t}prepare(t){const e=t.list.get(t.index);return null!=e&&e instanceof he&&this.config.startPos==e.config.startPos?(this.prevItems=e.prevItems,t.pop()):(this.prevItems=this.config.startItems,t)}next(t){const{startItems:e,startPos:n,anchor:r,movingPos:i,resizeDirConfig:o}=this.config,a=e.map(t=>t.resize(r,o,n,i));return t.mergeIn(["items"],a)}prev(t){return t.mergeIn(["items"],this.prevItems)}getMessage(){return`Resize items. items={${this.prevItems.keySeq().join(",")}}`}}function de(t,e){const{x:n,y:r,width:i,height:o}=e;if("nw-resize"===t)return{x:n,y:r};if("n-resize"===t)return{x:0,y:r};if("ne-resize"===t)return{x:n+i,y:r};if("w-resize"===t)return{x:n,y:0};if("e-resize"===t)return{x:n+i,y:0};if("sw-resize"===t)return{x:n,y:r+o};if("s-resize"===t)return{x:0,y:r+o};if("se-resize"===t)return{x:n+i,y:r+o};throw new Error(`Invalid resizer: ${t}`)}function pe(t,e){return de(function(t){if("nw-resize"===t)return"se-resize";if("se-resize"===t)return"nw-resize";if("n-resize"===t)return"s-resize";if("s-resize"===t)return"n-resize";if("ne-resize"===t)return"sw-resize";if("sw-resize"===t)return"ne-resize";if("e-resize"===t)return"w-resize";if("w-resize"===t)return"e-resize";throw new Error(`Invalid resizer: ${t}`)}(t),e)}function me(t){if("nw-resize"===t||"ne-resize"===t||"sw-resize"===t||"se-resize"===t)return{h:!0,v:!0};if("n-resize"===t||"s-resize"===t)return{h:!1,v:!0};if("w-resize"===t||"e-resize"===t)return{h:!0,v:!1};throw new Error(`Invalid resizer: ${t}`)}var ye=({mouse:t,mode:e,state:n})=>{const r=t.down$.when(e,ut("idle")).when(t.resizer$).peek(L.a.combine(t.resizer$,n)).map(([t,e])=>{const n=e.sitems(),r=e.getBBox();return{startPos:de(t,r),startItems:n,anchor:pe(t,r),resizeDirConfig:me(t)}}),i=r.mapTo(t.move$.endWhen(t.up$).mapTo("resizing").take(1)).flatten(),o=i.peek(r).map(t=>t.startItems.keySeq().toSet()),a=r.map(n=>t.move$.when(e,ut("resizing")).map(t=>Object.assign({movingPos:t},n)).endWhen(t.up$)).flatten().map(t=>new he(t)),s=t.up$.when(e,ut("resizing")).mapTo("idle");return{action:a,nextMode:L.a.merge(i,s),nextWorking:{editing:L.a.merge(o,s.mapTo(Object(st.Set)()))}}};class ve extends qt.a{constructor(t){super(),this.op=t}prepare(t){return this.prevZList=t.state.zlist,t}next(t){const e=t.selIdSet;if(1!==e.count())return t;{const n=e.first(),r=t.zlist,i=r.indexOf(n),o=r.delete(i);return"inc"===this.op?t.set("zlist",o.insert(i+1,n)):"dec"===this.op?0===i?t:t.set("zlist",o.insert(i-1,n)):"top"===this.op?t.set("zlist",o.push(n)):t.set("zlist",o.unshift(n))}}prev(t){return t.set("zlist",this.prevZList)}getMessage(){return`Change z-index. op=${this.op}`}}class _e extends qt.a{constructor(t){super(),this.itemIdArray=t}prepare(t){return this.prevSelIdSet=t.state.selIdSet,this.deletedItems=t.state.items.filter((t,e)=>this.itemIdArray.includes(e)),this.prevZList=t.state.zlist,t}next(t){return t.update("items",t=>t.filterNot(t=>this.itemIdArray.includes(t.id))).update("zlist",t=>t.filterNot(t=>this.itemIdArray.includes(t))).set("selIdSet",Object(st.OrderedSet)())}prev(t){return t.update("items",t=>t.merge(this.deletedItems)).set("zlist",this.prevZList).set("selIdSet",this.prevSelIdSet)}getMessage(){return`Delete items. items={${this.deletedItems.keySeq().join(",")}}`}}class be extends qt.a{constructor(t,e){super(),this.field=t,this.val=e}prepare(t){const e=t.getLastAction();return this.prevItems=t.state.sitems(),e!==qt.f&&e instanceof be&&Object(st.is)(this.prevItems.keySeq(),e.prevItems.keySeq())&&this.field==e.field?(this.prevItems=e.prevItems,t.pop()):t}next(t){const e=t.sitems().map(t=>t.setIn(this.field.split("."),this.val));return t.mergeIn(["items"],e)}prev(t){return t.mergeIn(["items"],this.prevItems)}getMessage(){const t=this.prevItems.keySeq().join(","),e=JSON.stringify(this.val);return`Edit items. items={${t}}, field=${this.field}, value=${e}`}}class ge extends qt.a{prepare(t){const e=t.state.sitems();return this.lock=e.some(t=>!t.locked),this.itemIdSet=e.filter(t=>t.locked!==this.lock).map(t=>t.locked).keySeq().toSet(),t}next(t){const e=t.sitems().map(t=>t.set("locked",this.lock));return t.update("items",t=>t.merge(e))}prev(t){const e=t.items.filter(t=>this.itemIdSet.has(t.id)).map(t=>t.update("locked",z));return t.update("items",t=>t.merge(e))}getMessage(){const t=this.itemIdSet.keySeq().join(",");return`${this.lock?"Lock":"Unlock"} items. items={${t}}`}}class xe extends qt.a{constructor(t){super(),this.tagConfig=t}prepare(t){return this.prevItem=t.state.sitem(),this.addOrRemove=this.prevItem.sem.tags.has(this.tagConfig.name)?"remove":"add",t}next(t){const e=t.sitem(),n=this.tagConfig.name,r=e.sem.tags.has(n)?e.update("sem",t=>t.update("tags",t=>t.remove(n))):e.update("sem",t=>t.update("tags",t=>t.add(n))).merge(this.tagConfig.styles);return t.setIn(["items",e.id],r)}prev(t){return t.set("items",t.items.set(this.prevItem.id,this.prevItem))}getMessage(){return`${"add"===this.addOrRemove?"Add":"Remove"} tag. item=${this.prevItem.id}, tag=${this.tagConfig.name}`}}var we=({mouse:t,keyboard:e,UI:n,mode:r,state:i,config:o})=>{const a=n.intent("change-sel").sampleCombine(i).filter(([{itemIdArray:t},e])=>!Object(st.is)(e.selIdSet,Object(st.OrderedSet)(t))).map(([{itemIdArray:t}])=>new Jt(t)),s=L.a.merge(n.intent("delete"),e.shortcut("d").when(i,t=>!t.selIdSet.isEmpty()&&("bbox"===t.selMode||t.sitem().locked))).peek(i).map(t=>new _e(t.selIdSet.toArray())),c=n.intent("delete-items").map(({itemIdArray:t})=>new _e(t)),u=L.a.merge(n.intent("toggle-lock"),e.shortcut("b")).when(i,t=>!t.selIdSet.isEmpty()).map(()=>new ge),f=n.intent("edit").map(({field:t,value:e})=>{const n=["strokeWidth","opacity","sem.dx","sem.dy","sem.fontSize"].includes(t)?Number(e):e;return new be(t,n)}),l=n.intent("change-z-index").map(({op:t})=>new ve(t)),h=n.intent("toggle-semantic-tag").when(i,t=>!t.selIdSet.isEmpty()).sampleCombine(i,o).map(([{tagName:t},e,n])=>{const r=n.semantics.tags.find(e=>e.name===t);return new xe(r)}),d=e.shortcut("esc").mapTo("idle");return{action:L.a.merge(a,s,c,u,f,l,h),nextMode:d,nextAdjustConfigs:d.mapTo([])}},ke=n(15);function Se(t){return function e(n,o,a){switch(arguments.length){case 0:return e;case 1:return Object(b.a)(n)?e:Object(i.a)(function(e,r){return t(n,e,r)});case 2:return Object(b.a)(n)&&Object(b.a)(o)?e:Object(b.a)(n)?Object(i.a)(function(e,n){return t(e,o,n)}):Object(b.a)(o)?Object(i.a)(function(e,r){return t(n,e,r)}):Object(r.a)(function(e){return t(n,o,e)});default:return Object(b.a)(n)&&Object(b.a)(o)&&Object(b.a)(a)?e:Object(b.a)(n)&&Object(b.a)(o)?Object(i.a)(function(e,n){return t(e,n,a)}):Object(b.a)(n)&&Object(b.a)(a)?Object(i.a)(function(e,n){return t(e,o,n)}):Object(b.a)(o)&&Object(b.a)(a)?Object(i.a)(function(e,r){return t(n,e,r)}):Object(b.a)(n)?Object(r.a)(function(e){return t(e,o,a)}):Object(b.a)(o)?Object(r.a)(function(e){return t(n,e,a)}):Object(b.a)(a)?Object(r.a)(function(e){return t(n,o,e)}):t(n,o,a)}}}var Oe=Se(function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n});function Me(t,{x:e,y:n,k:r}){const i=Math.min(t.width,t.height)/r;return[(t.width/2-e)/r,(t.height/2-n)/r,i]}function je(t){return(e,n)=>{const r=ke.b(Me(t,e),Me(t,n));return e=>(function(t,[e,n,r]){const i=Math.min(t.width,t.height)/r,o=t.width/2-e*i,a=t.height/2-n*i;return ke.c.translate(o,a).scale(i)})(t,r(e))}}function Ee(t,e,n,r){const i=Oe(n.minScale,n.maxScale,Math.min(t.width/e.width,t.height/e.height)/(1+r)),o=t.width/2-i*(e.x+e.width/2),a=t.height/2-i*(e.y+e.height/2);return ke.c.translate(o,a).scale(i)}var Ie=[Ht,le,we,Kt,Zt,ye,({mouse:t,config:e,mode:n,state:r,UI:i,keyboard:o,svgDOMRect:a})=>{const s=L.a.merge(t.rawDblclick$.map(t=>({pos:t,delta:2,useTransition:!0})),t.rawWheel$.map(({pos:t,deltaY:e})=>({pos:t,delta:.95**(e/100),useTransition:!1}))).sampleCombine(r,e,a).map(([{pos:t,delta:e,useTransition:n},{transform:r},i,o])=>{const{x:a,y:s,k:c}=r,u=Oe(i.minScale,i.maxScale,c*e),f=u/c,l=f*(a-t.x)+t.x,h=f*(s-t.y)+t.y;return{rawPos:t,targetTransform:ke.c.translate(l,h).scale(u),useTransition:n}}),c=o.shortcut("1").whenNot(r,t=>t.selIdSet.isEmpty()).peek(r).map(t=>({itemId:t.selIdSet.first()})),u=L.a.merge(c,i.intent("zoom-to-item"),i.intent("zoom-to-sel").peek(r.filter(t=>!t.selIdSet.isEmpty()).map(t=>t.selIdSet.first()).map(t=>({itemId:t})))).sampleCombine(r,e,a).map(([{itemId:t},e,n,r])=>{const i=e.items.get(t);return{targetTransform:Ee(r,Object(ft.d)(i.getVertices()),n,.8),useTransition:!0,rawPos:null}}),f=L.a.merge(o.shortcut("2"),i.intent("zoom-to-fit")).whenNot(r,t=>t.items.isEmpty()).peek(L.a.combine(r,e,a)).map(([t,e,n])=>({targetTransform:Ee(n,Object(ft.d)(t.items.toList().flatMap(t=>t.getVertices())),e,.3),useTransition:!0,rawPos:null})),l=L.a.merge(o.shortcut("3"),i.intent("reset-zoom")).whenNot(r,t=>(function(t){return 0===t.x&&0===t.y&&1===t.k})(t.transform)).mapTo({targetTransform:ke.c,useTransition:!0,rawPos:null});return{action:L.a.merge(s,u,f,l).sampleCombine(r,e,a).map(([t,{transform:e},n,r])=>{const{rawPos:i,targetTransform:o,useTransition:a}=t;return a?function(t,e,n,r=ke.a){let i;return L.a.create({start(o){const a=performance.now(),s=r(e,n);!function e(){const r=performance.now()-a;if(r>=t)return o.next(n),void o.complete();o.next(s(r/t)),i=requestAnimationFrame(e)}()},stop(){cancelAnimationFrame(i)}})}(250,e,o,je(r)).map(t=>new Yt(t,e,i,n.senseRange)):L.a.of(new Yt(o,e,i,n.senseRange))}).flatten()}},te,Qt,Gt,ae];n(72);function Te(t,e){return t.sampleCombine(e).map(([{x:t,y:e},{left:n,top:r}])=>({x:t-n,y:e-r}))}class Ce{constructor(t,e,n,r,i,o,a){this.down$=L.a.create(),this.rawDown$=L.a.create(),this.click$=L.a.create(),this.rawClick$=L.a.create(),this.dblclick$=L.a.create(),this.rawDblclick$=L.a.create(),this.wheel$=L.a.create(),this.rawWheel$=L.a.create(),this.svgDOMRect$=t,this.transform$=e.map(t=>t.transform).dropRepeats().remember(),this.rawMove$=Te(n,t),this.move$=this.convert(this.rawMove$),this.rawUp$=Te(r,t),this.up$=this.convert(this.rawUp$),this.resizer$=i.dropRepeats().startWith(null),this.vertexIndex$=o.dropRepeats().startWith(-1),this.vertexInsertIndex$=a.dropRepeats().startWith(-1),this.isBusy$=L.a.combine(this.resizer$,this.vertexIndex$,this.vertexInsertIndex$).map(([t,e,n])=>!(null==t&&-1===e&&-1===n)).remember(),this.pressing$=L.a.merge(this.rawDown$.mapTo(!0),this.rawUp$.mapTo(!1)).startWith(!1),this.cursor$=L.a.combine(this.resizer$,this.vertexIndex$,this.vertexInsertIndex$).map(([t,e,n])=>-1!==e||-1!==n?"crosshair":t||"auto").startWith("auto")}convert(t){return t.sampleCombine(this.transform$).map(([t,e])=>e.invertPos(t))}convertWheel(t){return t.sampleCombine(this.transform$).map(([{pos:t,deltaY:e},n])=>({pos:n.invertPos(t),deltaY:e}))}imitate(t,e,n,r){var i,o;this.rawDown$.imitate(Te(t,this.svgDOMRect$)),this.down$.imitate(this.convert(this.rawDown$)),this.rawClick$.imitate(Te(e,this.svgDOMRect$)),this.click$.imitate(this.convert(this.rawClick$)),this.rawDblclick$.imitate(Te(n,this.svgDOMRect$)),this.dblclick$.imitate(this.convert(this.rawDblclick$)),this.rawWheel$.imitate((i=r,o=this.svgDOMRect$,i.sampleCombine(o).map(([{deltaY:t,pos:e},{top:n,left:r}])=>({pos:{x:e.x-r,y:e.y-n},deltaY:t})))),this.wheel$.imitate(this.convertWheel(this.rawWheel$))}}function Ae([t,e]){return e(t)}class ze extends Ce{constructor(){super(...arguments),this.adjustedMoveInfo$=L.a.create(),this.adjustedDownInfo$=L.a.create(),this.adjustedUpInfo$=L.a.create(),this.adjustedClickInfo$=L.a.create(),this.amove$=this.adjustedMoveInfo$.map(t=>t.point),this.adown$=this.adjustedDownInfo$.map(t=>t.point),this.aup$=this.adjustedUpInfo$.map(t=>t.point),this.aclick$=this.adjustedClickInfo$.map(t=>t.point)}setAdjuster(t){this.adjustedMoveInfo$.imitate(this.move$.sampleCombine(t).map(Ae)),this.adjustedUpInfo$.imitate(this.up$.sampleCombine(t).map(Ae)),this.adjustedDownInfo$.imitate(this.down$.sampleCombine(t).map(Ae)),this.adjustedClickInfo$.imitate(this.click$.sampleCombine(t).map(Ae))}}var Ne=function(){return!0};const De=Object(st.Record)({x:0,y:0});class Le{constructor(t=[]){this.points=new Set(t)}[Symbol.iterator](){return this.points[Symbol.iterator]()}union(t){for(const e of t)this.points.add(e);return this}subtract(t){for(const e of t)this.points.delete(e);return this}minBy(t){let e=null,n=1/0;for(const r of this.points){const i=t(r);i<n&&(n=i,e=r)}return e}}const Pe={cement(t,e,n,r,i){if(null!=(r=r)){const o=new Le(i);o.subtract(r.exclude||[]),o.union(r.include||[]);const a=o.minBy(t=>Object(ft.b)(e,t));if(null!=a){if(Object(ft.b)(e,a)<=t.senseRange/n.k)return{point:a,ensure:Ne}}}return null},align(t,e,n,r,i){r=r;const o=t.senseRange/n.k,{exclude:a=[],include:s=[]}=r,c=new Le(i).subtract(a).union(s);let u=o,f=o,l=null;for(const t of c){const n=Math.abs(t.y-e.y);n<=u&&(u=n,(null==l||Math.abs(t.x-e.x)<Math.abs(l.x-e.x))&&(l=t))}let h=null;for(const t of c){const n=Math.abs(t.x-e.x);n<=f&&(f=n,(null==h||Math.abs(t.y-e.y)<Math.abs(h.y-e.y))&&(h=t))}const d=De(e);return l||h?{type:"align",point:d.set("y",l?l.y:e.y).set("x",h?h.x:e.x),ensure:Ne,info:{horizontalPoint:l,verticalPoint:h}}:null},restrict(t,e,n,r,i){r=r;const o=De(e),{anchor:a}=r;return{point:Math.abs(e.x-a.x)<Math.abs(e.y-a.y)?o.set("x",a.x):o.set("y",a.y),ensure:t=>t.x===a.x||t.y===a.y}}};class Re{constructor(){this.intent$=L.a.create()}intent(t){return this.intent$.filter(e=>"string"==typeof e?e===t:e.type===t)}imitate(t){this.intent$.imitate(t)}}var $e={items:[{type:"ImgItem",id:1,locked:!1,label:"",tags:[],opacity:.4,x:0,y:0,width:968,height:674,naturalWidth:968,naturalHeight:674,url:"http://7xo8xj.com1.z0.glb.clouddn.com/airport.png"},{type:"PolygonItem",id:2,locked:!1,sem:{label:"Toy Shop",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:12,y:7.004262924194336},{x:278.5,y:7.004262924194336},{x:278.5,y:127.50426292419434},{x:12,y:127.50426292419434}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:3,locked:!1,sem:{label:"Electronics Shop",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:278.5,y:7.004262924194336},{x:691.607384842044,y:7.004262924194336},{x:691.607384842044,y:127.50426292419434},{x:278.5,y:127.50426292419434}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:4,locked:!1,sem:{label:"Souvenir Shop",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:691.607384842044,y:7.004262924194336},{x:958.6403265782185,y:7.004262924194336},{x:958.6403265782185,y:127.50426292419434},{x:691.607384842044,y:127.50426292419434}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:5,locked:!1,sem:{label:"Northern Hall",show:!0,tags:["hallway"],dx:400,dy:13,fontSize:20},points:[{x:12,y:127.50426292419434},{x:958.6403265782185,y:127.50426292419434},{x:958.6403265782185,y:182.50671201908577},{x:12,y:182.50671201908577}],stroke:"#808080",strokeWidth:1,opacity:1,fill:"#ffffff"},{type:"PolylineItem",id:6,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:70.82016389910768,y:127.50426292419434},{x:133.3973744310988,y:127.50426292419434}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:7,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:329.29125087907096,y:127.50426292419434},{x:394.5892096950617,y:127.50426292419434}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:8,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:574.8387835100361,y:127.50426292419434},{x:638.776368184027,y:127.50426292419434}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:9,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:712.2365718520166,y:127.50426292419434},{x:776.1741565260076,y:127.50426292419434}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolygonItem",id:11,locked:!1,sem:{label:"Info\\nDesk",show:!0,tags:["hallway"],dx:82,dy:82,fontSize:20},points:[{x:379.55762997031957,y:230.86653447062747},{x:452.00438869996634,y:230.86653447062747},{x:452.00438869996634,y:182.50671201908577},{x:521.2542357343716,y:182.50671201908577},{x:521.2542357343716,y:230.86653447062747},{x:591.7759961222894,y:230.86653447062747},{x:591.7759961222894,y:393.7454519954075},{x:379.55762997031957,y:393.7454519954075}],stroke:"none",strokeWidth:4,opacity:1,fill:"#ffffff"},{type:"PolygonItem",id:12,locked:!1,sem:{label:"Center Hall",show:!0,tags:["hallway"],dx:126,dy:0,fontSize:20},points:[{x:304.49669480026864,y:393.7454519954075},{x:664.4418581103913,y:393.7454519954075},{x:664.4418581103913,y:460.8189545038693},{x:304.49669480026864,y:460.8189545038693}],stroke:"none",strokeWidth:2,opacity:1,fill:"#ffffff"},{type:"PolygonItem",id:13,locked:!1,sem:{label:"Cafe",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:664.4418581103913,y:208.12841764804205},{x:958.6403265782185,y:208.12841764804205},{x:958.6403265782185,y:314.32772551093444},{x:664.4418581103913,y:314.32772551093444}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:14,locked:!1,sem:{label:"MCM",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:836.5511314119611,y:314.32772551093444},{x:958.6403265782185,y:314.32772551093444},{x:958.6403265782185,y:541.6421230069197},{x:836.5511314119611,y:541.6421230069197}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:15,locked:!1,sem:{label:"Eastern\\nHall",show:!0,tags:["hallway"],dx:20,dy:0,fontSize:20},points:[{x:664.4418581103913,y:314.32772551093444},{x:836.5511314119611,y:314.32772551093444},{x:836.5511314119611,y:541.6421230069197},{x:664.4418581103913,y:541.6421230069197}],stroke:"none",strokeWidth:1,opacity:1,fill:"#ffffff"},{type:"PolygonItem",id:16,locked:!1,sem:{label:"Snack Bar",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:12,y:208.12841764804205},{x:304.49669480026864,y:208.12841764804205},{x:304.49669480026864,y:314.32772551093444},{x:12,y:314.32772551093444}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:17,locked:!1,sem:{label:"Chanel",show:!0,tags:["room"],dx:0,dy:0,fontSize:20},points:[{x:12,y:314.32772551093444},{x:133.3973744310988,y:314.32772551093444},{x:133.3973744310988,y:541.6421230069197},{x:12,y:541.6421230069197}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#cccccc"},{type:"PolygonItem",id:18,locked:!1,sem:{label:"Western\\nHall",show:!0,tags:["hallway"],dx:20,dy:0,fontSize:20},points:[{x:133.3973744310988,y:314.32772551093444},{x:304.49669480026864,y:314.32772551093444},{x:304.49669480026864,y:541.6421230069197},{x:133.3973744310988,y:541.6421230069197}],stroke:"none",strokeWidth:1,opacity:1,fill:"#ffffff"},{type:"PolygonItem",id:19,locked:!1,sem:{label:"",show:!0,tags:["staircase"],dx:0,dy:0,fontSize:20},points:[{x:403.02443824134735,y:460.8189545038693},{x:469.3689751208052,y:460.8189545038693},{x:469.3689751208052,y:541.6421230069197},{x:403.02443824134735,y:541.6421230069197}],stroke:"#999999",strokeWidth:2,opacity:1,fill:"#d4eb8b"},{type:"PolylineItem",id:20,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:192.22520357020278,y:314.32772551093444},{x:258.1153258135,y:314.32772551093444}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:21,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:133.3973744310988,y:422.82474448710013},{x:133.3973744310988,y:488.28059235511915}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:22,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:706.654041401089,y:314.32772551093444},{x:771.4040414010891,y:314.32772551093444}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"},{type:"PolylineItem",id:23,locked:!1,sem:{label:"",show:!0,tags:["door"],dx:0,dy:0,fontSize:20},points:[{x:836.5511314119611,y:422.82474448710013},{x:836.5511314119611,y:488.28059235511915}],stroke:"#666666",strokeWidth:4,opacity:1,fill:"none"}],zlist:[1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,20,21,22,23]};const Ue="idle",qe=n(74);var Be=n(48),We=n.n(Be);const Fe={left:0,top:0,bottom:0,right:0,height:window.innerHeight,width:window.innerWidth};const Ve=[".json",".yaml",".yml",".txt"],He=[".jpg",".bmp",".webp",".png",".svg"];var Ye=n(49);const Ke=n(75);class Je{constructor(){this.streamMap=Object(st.Map)()}shortcut(t,e){return this.getStream(t,void 0,e)}keydown(t,e){return this.getStream(t,"keydown",e)}keyup(t,e){return this.getStream(t,"keyup",e)}keypress(t,e){return this.getStream(t,"keypress",e)}isPressing(t){const e=Object(st.fromJS)({type:"ispressing",key:t});if(!this.streamMap.has(e)){const n=this.getStream(t,"keypress"),r=this.getStream(t,"keyup"),i=L.a.merge(n.mapTo(!0),r.mapTo(!1)).startWith(!1).dropRepeats().remember();this.streamMap=this.streamMap.set(e,i)}return this.streamMap.get(e)}getStream(t,e,n){n=n||{};const r=Object(st.fromJS)({type:e,key:t});if(!this.streamMap.has(r)){const i=L.a.create({start(r){Ke.bind(t,(t,e)=>(r.next(t),n.noPreventDefault),e)},stop(){}});this.streamMap=this.streamMap.set(r,i)}return this.streamMap.get(r)}}function Xe(t){let e;return function(){return L.a.create({start(n){e=(t=>n.next(t)),window.addEventListener(t,e)},stop(){window.removeEventListener(t,e)}})}}var Ze;et(function(t){const e=t.DOM,n=t.keyboard,r=t.svgDOMRect,i=L.a.create(),o=L.a.create(),a=L.a.create(),s=L.a.create(),c={editing:L.a.create(),drawing:L.a.create()},u=L.a.create(),f=L.a.create(),l=L.a.create(),h=L.a.create(),d=L.a.create(),p=o.startWith(null),m=i.startWith(qe),y=s.startWith(Ue),v=new Re,_=L.a.merge(v.intent("undo"),n.shortcut("mod+z").when(y,ut("idle"))).mapTo(bt.e),b=L.a.merge(v.intent("redo"),n.shortcut(["mod+y","mod+shift+z"]).when(y,ut("idle"))).mapTo(bt.d),g=v.intent("clear-history").mapTo(bt.a),x=L.a.merge(_,b,g,a).fold((t,e)=>e===bt.e?t.undo():e===bt.d?t.redo():e===bt.a?t.clearHistory():e.prepare(t).apply(e),bt.b.fromState(fe.fromJS($e))).dropRepeats().remember(),w=x.map(t=>t.state).dropRepeats().remember(),k=h.startWith([]),S={editing:c.editing.startWith(Object(st.Set)()),drawing:c.drawing.startWith(null)},O=d.startWith(null),M=new ze(r,w,t.mousemove,t.mouseup,u,f,l),j={appHistory:x,FILE:t.FILE,DOM:e,svgDOMRect:r,UI:v,mouse:M,keyboard:n,config:m,clipboard:p,mode:y,state:w,adjustConfigs:k,polygonCloseIndicator:O,working:S},E=at(It.a,"menubar")(j),I=at(Bt,"svg")(j),T=at(At,"structure")(j),C=at(Et,"inspector")(j),A=at(Tt,"status-bar")(j),z=Ie.map(t=>t(j)).concat([E,T,C,I,A]);a.imitate(Object(ft.i)(z,"action")),i.imitate(Object(ft.i)(z,"nextConfig")),o.imitate(Object(ft.i)(z,"nextClipboard")),c.editing.imitate(Object(ft.i)(z,"nextWorking.editing")),c.drawing.imitate(Object(ft.i)(z,"nextWorking.drawing")),s.imitate(Object(ft.i)(z,"nextMode")),h.imitate(Object(ft.i)(z,"nextAdjustConfigs")),d.imitate(Object(ft.i)(z,"nextPolygonCloseIndicator"));const N=Object(ft.i)(z,"SAVE"),D=Object(ft.i)(z,"FILE");M.imitate(I.rawDown,I.rawClick,I.rawDblclick,I.rawWheel),M.setAdjuster(function(t,e,n,r,i){const o=n.map(t=>t.items.toList().flatMap(t=>t.getVertices()));return L.a.combine(i,t.isPressing("z"),r,n,o).map(([t,e,n,r,i])=>o=>{const a={point:o,applied:[],ensure:Ne,info:{}};return e?a:n.reduce(function(e,n){const o=Pe[n.type](t,e.point,r.transform,n,i);return null!=o&&e.ensure(o.point)?{point:o.point,applied:e.applied.concat([n.type]),ensure:t=>e.ensure(t)&&o.ensure(t),info:Object.assign({},e.info,o.info)}:e},a)}).remember()}(n,0,w,k,m)),v.imitate(L.a.merge(T.intent,C.intent,E.intent,A.intent)),u.imitate(Object(ft.i)(z,"nextResizer")),f.imitate(Object(ft.i)(z,"nextVertexIndex")),l.imitate(Object(ft.i)(z,"nextVertexInsertIndex"));const P=L.a.create(),R=L.a.merge(v.intent("show-about").mapTo("about"),v.intent("show-shortcut").mapTo("shortcut"),P.mapTo(null),n.shortcut("esc").mapTo(null)).startWith(null),$=at(zt.a,"overlay")({overlayType:R,DOM:e});P.imitate($.closeOverlay);const U=R.map(Boolean);return{DOM:L.a.combine(U,$.DOM,E.DOM,I.DOM,T.DOM,C.DOM,A.DOM).map(([t,e,n,r,i,o,a])=>Object(K.a)("div",[e,Object(K.a)("div.app",{key:"app",style:{filter:t?"blur(3px)":"blur(0)"}},[n,Object(K.a)("main",[r,o]),a])].filter(Boolean))),FILE:D,SAVE:N,svgDOMRect:I.svgDOMRectTrigger}},{DOM:Object(K.b)("#container"),FILE:function(t){const e=t.filter(t=>"dialog"===t.type),n=L.a.create({start(t){e.addListener({next({accept:e,multiple:n=!1}){const r=document.createElement("input");r.type="file",null!=r&&(r.accept=e),r.multiple=n,r.click(),r.onchange=(e=>{const n=r.files[0];null!=n&&t.next(n)})},error(t){throw t}})},stop(){}}),r=t.filter(t=>t instanceof File);return L.a.create({start(t){L.a.merge(n,r).addListener({next(e){if(Ve.some(t=>e.name.endsWith(t))){const n=new FileReader;n.readAsText(e),n.onloadend=(()=>{const r=n.result;t.next({file:e,content:r})})}else if(He.some(t=>e.name.endsWith(t))){const n=URL.createObjectURL(e),r=document.createElement("img");r.classList.add("ruler"),r.src=n,document.body.appendChild(r),r.onload=(()=>{t.next({url:n,file:e,naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight}),r.remove()})}},error(t){throw t}})},stop(){}})},keyboard:function(){return new Je},mouseup:Xe("mouseup"),mousemove:Xe("mousemove"),SAVE:function(t){t.addListener({next(t){Object(Ye.saveAs)(t.blob,t.filename)}})},svgDOMRect:(Ze=".svg",function(t){const e=We()(window,"resize");return L.a.create({start(n){L.a.merge(e,t).addListener({next(){const t=document.querySelector(Ze);null!=t&&n.next(t.getBoundingClientRect())}})},stop(){}}).startWith(Fe)})})}]);